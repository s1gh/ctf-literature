/*1331709208,169776321*/

if (window.CavalryLogger) { CavalryLogger.start_js(["fbhRl"]); }

window.__DEV__=window.__DEV__||0;if(!window.skipDomainLower&&document.domain.toLowerCase().match(/(^|\.)facebook\..*/))document.domain=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');function bagofholding(){}function bagof(a){return function(){return a;};}if(!Date.now)Date.now=function now(){return new Date().getTime();};if(!Array.isArray)Array.isArray=function(a){return Object.prototype.toString.call(a)=='[object Array]';};if(!Object.create)Object.create=function create(a){var b=new Function();b.prototype=a;return new b();};Env=window.Env||{};Env.start=Env.start||Date.now();document.documentElement.className=document.documentElement.className.replace('no_js','');
(function(a){if(a.require)return;var b={},c={},d=0,e=1,f=2,g='special',h='refcount',i='exports',j='dependencies',k='module',l='waiting',m='factory',n=undefined,o='define',p='global',q='require',r='requireLazy',s='requireDynamic',t='context';function u(fa){var ga=b[fa],ha,ia;if(ga[l]&&ga[g]&f)x();if(!ga[i]){var ja=ga[i]={},ka=ga[m];if(Object.prototype.toString.call(ka)==='[object Function]'){var la=[],ma=ga[j],na=ma.length;if(ga[g]&f)na=Math.min(na,ka.length);for(ia=0;ia<na;ia++){ha=ma[ia];la.push(ha===k?ga:(ha===i?ja:u(ha)));}var oa=ka.apply(ga[t]||a,la);if(oa)ga[i]=oa;}else ga[i]=ka;}if(ga[h]--===1)delete b[fa];return ga[i];}function v(fa,ga,ha,ia,ja,ka){if(ga===n){ga=[];ha=fa;fa=z();}else if(ha===n){ha=ga;ga=fa;fa=z();}var la=b[fa]||{id:fa};if(ka)la[h]=(la[h]||0)+ka;if(b[fa])return;la[m]=ha;la[j]=ga;la[t]=ja;la[g]=ia;b[fa]=la;aa(fa);}function w(fa,ga,ha){v(fa,ga,n,e,ha,1);}function x(){var fa={},ga;for(ga in c)if(b[ga]&&!fa[ga]&&b[ga][g]&f)y({},ga,fa);}function y(fa,ga,ha){ha[ga]=1;var ia=c[ga],ja;if(!ia)return;fa[ga]=1;for(ja in ia){if(!b[ja][g]&f)continue;if(fa[ja]){delete ia[ja];b[ja][l]--;if(!b[ja][l])ba(ja);}else y(fa,ja,ha);}fa[ga]=0;}function z(){return '__mod__'+d++;}function aa(fa){var ga=b[fa],ha=0;for(var ia=0;ia<ga[j].length;ia++){var ja=ga[j][ia];if(!b[ja]||b[ja][l]){c[ja]||(c[ja]={});if(!c[ja][fa])ha++;c[ja][fa]=1;}}ga[l]=ha;if(!ha)ba(fa);}function ba(fa){var ga=b[fa];if(ga[g]&e)u(fa);var ha=c[fa];if(ha){delete c[fa];for(var ia in ha)if(!--b[ia][l])ba(ia);}}function ca(fa,ga){b[fa]={id:fa};b[fa][i]=ga;}ca(k,0);ca(i,0);ca(o,v);ca(p,a);ca(q,u);ca(s,u);ca(r,w);v.amd={};a[o]=v;a[q]=u;a[s]=u;a[r]=w;var da=false,ea=function(fa,ga,ha,ia){v(fa,ga,ha,ia||f);if(b[fa][l]&&!da)da=setTimeout(function(){x();da=false;},9);};a.__d=function(fa,ga,ha,ia){ga=[p,q,s,r,k,i].concat(ga);ea(fa,ga,ha,ia);};a.__e=a.__d;})(this);
__d("hasArrayNature",[],function(a,b,c,d,e,f){function g(h){return (!!h&&(typeof h=='object'||typeof h=='function')&&('length' in h)&&!('setInterval' in h)&&(Object.prototype.toString.call(h)==="[object Array]"||('callee' in h)||('item' in h)));}e.exports=g;});
__d("ArrayUtils",["hasArrayNature"],function(a,b,c,d,e,f){var g=b("hasArrayNature"),h={createFrom:function(i){if(!g(i))return [i];if(i.item){var j=i.length,k=new Array(j);while(j--)k[j]=i[j];return k;}return Array.prototype.slice.call(i);}};e.exports=h;});
__d("copyProperties",[],function(a,b,c,d,e,f){function g(h,i){h=h||{};i=i||{};for(var j in i)h[j]=i[j];if(i.hasOwnProperty&&i.hasOwnProperty('toString')&&(typeof i.toString!='undefined')&&(h.toString!==i.toString))h.toString=i.toString;return h;}e.exports=g;});
__d("array-extensions",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){return function(){if(this===a)throw new TypeError();return i.apply(this,arguments);};}g(Array.prototype,{map:function(i,j){if(this===a||typeof i!='function')throw new TypeError();var k,l=this.length,m=new Array(l);for(k=0;k<l;++k)if(k in this)m[k]=i.call(j,this[k],k,this);return m;},forEach:function(i,j){this.map(i,j);},filter:h(function(i,j){if(typeof i!='function')throw new TypeError();var k,l,m=this.length,n=[];for(k=0;k<m;++k)if(k in this){l=this[k];if(i.call(j,l,k,this))n.push(l);}return n;}),every:h(function(i,j){if(typeof i!=='function')throw new TypeError();var k=new Object(this),l=k.length;for(var m=0;m<l;m++)if(m in k)if(!i.call(j,k[m],m,k))return false;return true;}),some:h(function(i,j){if(typeof i!=='function')throw new TypeError();var k=new Object(this),l=k.length;for(var m=0;m<l;m++)if(m in k)if(i.call(j,k[m],m,k))return true;return false;}),reduce:null,reduceRight:null,sort:h(Array.prototype.sort),reverse:h(Array.prototype.reverse),concat:h(Array.prototype.concat),slice:h(Array.prototype.slice),indexOf:h(Array.prototype.indexOf||function(i,j){var k=this.length;j|=0;if(j<0)j+=k;for(;j<k;j++)if(j in this&&this[j]===i)return j;return -1;}),contains:function(i){return this.indexOf(i)!=-1;},remove:function(i){var j=this.indexOf(i);if(j!=-1)this.splice(j,1);}});Array.prototype.each=Array.prototype.forEach;},3);
__d("Env",["copyProperties"],function(a,b,c,d,e,f){var g=b("copyProperties"),h={start:Date.now()};if(a.Env){g(h,a.Env);a.Env=undefined;}e.exports=h;});
__d("Util",[],function(a,b,c,d,e,f){if(typeof console=='undefined')a.console={log:bagofholding,info:bagofholding,warn:bagofholding,debug:bagofholding,dir:bagofholding,error:bagofholding};e.exports=a.console;});
__d("ErrorUtils",["Env","Util"],function(a,b,c,d,e,f){var g=b("Env"),h=b("Util"),i=[],j=[],k=window.chrome&&'type' in new Error();function l(q){if(!q){return {};}else if(q._originalError)return q;var r={line:q.lineNumber||q.line,message:q.message,name:q.name,script:q.fileName||q.sourceURL,stack:q.stackTrace||q.stack};r._originalError=q;if(k&&/(\w{3,5}:\/\/[^:]+):(\d+)/.test(q.stack)){r.script=RegExp.$1;r.line=parseInt(RegExp.$2,10);}for(var s in r)(r[s]==null&&delete r[s]);return r;}function m(q,r){q=l(q);!r;if(j.length<100)j.push(q);for(var s=0;s<i.length;s++)try{i[s](q);}catch(t){}}function n(q,r,s,t){if(g.nocatch||(/nocatch/).test(location.search))return q.apply(r,s||[]);try{return q.apply(r,s||[]);}catch(u){var v=l(u);if(t)t(v);v.callee=q;if(s)v.args=s;m(v);}}function o(q,r,s){m({message:q,script:r,line:s},true);}window.onerror=o;function p(q,r){i.push(q);if(r)for(var s=0;s<j.length;s++)q(j[s]);}e.exports={onerror:o,history:j,reportError:m,normalizeError:l,applyWithGuard:n,addListener:function(q){i.push(q);}};});
__d("Arbiter",["array-extensions","ArrayUtils","ErrorUtils","Util","copyProperties","hasArrayNature"],function(a,b,c,d,e,f){b("array-extensions");var g=b("ArrayUtils"),h=b("ErrorUtils"),i=b("Util"),j=b("copyProperties"),k=b("hasArrayNature");if(!window.async_callback)window.async_callback=function(m,n){return m;};function l(){j(this,{_listeners:[],_events:{},_callbacks:{},_last_id:1,_listen:{},_index:{}});j(this,l);}j(l,{SUBSCRIBE_NEW:'new',SUBSCRIBE_ALL:'all',BEHAVIOR_EVENT:'event',BEHAVIOR_PERSISTENT:'persistent',BEHAVIOR_STATE:'state',LIVEMESSAGE:'livemessage',BOOTLOAD:'bootload',FUNCTION_EXTENSION:'function_ext',subscribe:function(m,n,o){m=g.createFrom(m);var p=m.some(function(y){return !y||typeof(y)!='string';});if(p)return null;o=o||l.SUBSCRIBE_ALL;var q=l._getInstance(this);q._listeners.push({callback:n,types:m});var r=q._listeners.length-1;for(var s=0;s<m.length;s++){var t=m[s];if(!q._index[t])q._index[t]=[];q._index[t].push(r);if(o==l.SUBSCRIBE_ALL)if(t in q._events)for(var u=0;u<q._events[t].length;u++){var v=q._events[t][u],w=h.applyWithGuard(n,null,[t,v]);if(w===false){q._events[t].splice(u,1);u--;}}}var x={subscriberID:r};return x;},unsubscribe:function(m){var n=l._getInstance(this),o=n._listeners[m.subscriberID];if(!o)return;for(var p=0;p<o.types.length;p++){var q=o.types[p];if(n._index[q])for(var r=0;r<n._index[q].length;r++)if(n._index[q][r]==m.subscriberID){n._index[q].splice(r,1);if(n._index[q].length==0)delete n._index[q];break;}}delete n._listeners[m.subscriberID];},inform:function(m,n,o){var p=k(m);m=g.createFrom(m);var q=l._getInstance(this),r={};o=o||l.BEHAVIOR_EVENT;for(var s=0;s<m.length;s++){var t=m[s],u=null;if(o==l.BEHAVIOR_PERSISTENT){u=q._events.length;if(!(t in q._events))q._events[t]=[];q._events[t].push(n);q._events[t]._stateful=false;}else if(o==l.BEHAVIOR_STATE){u=0;q._events[t]=[n];q._events[t]._stateful=true;}else if(t in q._events)q._events[t]._stateful=false;window.ArbiterMonitor&&ArbiterMonitor.record('event',t,n,q);var v;if(q._index[t]){var w=g.createFrom(q._index[t]);for(var x=0;x<w.length;x++){var y=q._listeners[w[x]];if(y){v=h.applyWithGuard(y.callback,null,[t,n]);if(v===false){if(u!==null)q._events[t].splice(u,1);break;}}}}q._updateCallbacks(t,n);window.ArbiterMonitor&&ArbiterMonitor.record('done',t,n,q);r[t]=v;}return p?r:r[m[0]];},query:function(m){var n=l._getInstance(this);if(!(m in n._events))return null;if(n._events[m].length)return n._events[m][0];return null;},_instance:null,_getInstance:function(m){if(m instanceof l)return m;if(!l._instance)l._instance=new l();return l._instance;},registerCallback:function(m,n){var o,p=0,q=l._getInstance(this),r=false;if(typeof m=='function'){o=q._last_id;q._last_id++;r=true;}else{if(!q._callbacks[m])return null;o=m;}if(k(n)){var s={};for(var t=0;t<n.length;t++)s[n[t]]=1;n=s;}for(var u in n){try{if(q.query(u))continue;}catch(v){}p+=n[u];if(q._listen[u]===undefined)q._listen[u]={};q._listen[u][o]=(q._listen[u][o]||0)+n[u];}if(p==0&&r){h.applyWithGuard(m);return null;}if(!r){q._callbacks[o].depnum+=p;}else q._callbacks[o]={callback:async_callback(m,'arbiter'),depnum:p};return o;},_updateCallbacks:function(m,n){if(n===null||!this._listen[m])return;for(var o in this._listen[m]){this._listen[m][o]--;if(this._listen[m][o]<=0)delete this._listen[m][o];this._callbacks[o].depnum--;if(this._callbacks[o].depnum<=0){var p=this._callbacks[o].callback;delete this._callbacks[o];h.applyWithGuard(p);}}}});e.exports=l;});
__d("function-extensions",["ArrayUtils","copyProperties"],function(a,b,c,d,e,f){var g=b('ArrayUtils'),h=b('copyProperties'),i=Array.prototype.slice;Function.mixin=function(){var j=a.Mixins||{};for(var k=1,l=arguments.length;k<l;++k)h(arguments[0],j[arguments[k]]||arguments[k]);};if(!Function.prototype.bind)Function.prototype.bind=function __facebookBind(j){if(typeof this!=='function')throw new TypeError('Bind must be called on a function');var k=this,l=i.call(arguments,1);function m(){return k.apply(j,l.concat(i.call(arguments)));}m.displayName='bound:'+(k.displayName||k.name||'anonymous');m.toString=function(){return 'bound: '+k;};return m;};Function.prototype.curry=function(){var j=g.createFrom(arguments);return this.bind.apply(this,[null].concat(j));};Function.prototype.shield=function(j){if(typeof this!='function')throw new TypeError();var k=this.bind.apply(this,g.createFrom(arguments));return function(){return k();};};Function.prototype.defer=function(j,k){if(typeof this!='function')throw new TypeError();j=j||0;return setTimeout(this,j,k);};},3);
__d("isEmpty",[],function(a,b,c,d,e,f){function g(h){if(h instanceof Array){return h.length===0;}else if(h instanceof Object){for(var i in h)return false;return true;}else return !h;}e.exports=g;});
__d("CSSLoader",["function-extensions","Util","isEmpty"],function(a,b,c,d,e,f){b("function-extensions");var g=b("Util"),h=b("isEmpty"),i=20,j=5000,k,l,m={},n=[],o,p={};function q(v){var w=Array.prototype.slice(arguments,1);for(var x=0;x<v.length;x++)v[x].apply(null,w);}function r(v){if(l)return;l=true;var w=document.createElement('link');w.onload=function(){k=true;w.parentNode.removeChild(w);};w.rel='stylesheet';w.href='data:text/css;base64,';v.appendChild(w);}function s(){var v,w=[],x=[];if(Date.now()>=o){for(v in p){x.push(p[v].signal);w.push(p[v].error);}p={};}else for(v in p){var y=p[v].signal,z=window.getComputedStyle?getComputedStyle(y,null):y.currentStyle;if(z&&parseInt(z.height,10)>1){w.push(p[v].load);x.push(y);delete p[v];}}for(var aa=0;aa<x.length;aa++)x[aa].parentNode.removeChild(x[aa]);if(!h(w)){q(w);o=Date.now()+j;}return h(p);}function t(v,w,x,y){var z=document.createElement('meta');z.id='bootloader_'+v.replace(/[^a-z0-9]/ig,'_');w.appendChild(z);var aa=!h(p);o=Date.now()+j;p[v]={signal:z,load:x,error:y};if(!aa)var ba=setInterval(function _pollCSS(){if(s())clearInterval(ba);},i,false);}var u={loadStyleSheet:function(v,w,x,y,z){if(m[v])throw new Error('CSS component '+v+' has already been requested.');if(document.createStyleSheet){var aa;for(var ba=0;ba<n.length;ba++)if(n[ba].imports.length<31){aa=ba;break;}if(aa===undefined){n.push(document.createStyleSheet());aa=n.length-1;}n[aa].addImport(w);m[v]={styleSheet:n[aa],uri:w};t(v,x,y,z);return;}var ca=document.createElement('link');ca.rel='stylesheet';ca.type='text/css';ca.href=w;m[v]={link:ca};if(k){ca.onload=function(){ca.onload=ca.onerror=null;y();};ca.onerror=function(){ca.onload=ca.onerror=null;z();};}else{t(v,x,y,z);if(k===undefined)r(x);}x.appendChild(ca);},registerLoadedStyleSheet:function(v,w){if(m[v])throw new Error('CSS component '+v+' has already been requested.');m[v]={link:w};},unloadStyleSheet:function(v){if(!v in m)return;var w=m[v],x=w.link;if(x){x.onload=x.onerror=null;x.parentNode.removeChild(x);}else{var y=w.styleSheet;for(var z=0;z<y.imports.length;z++)if(y.imports[z].href==w.uri){y.removeImport(z);break;}}delete p[v];delete m[v];}};e.exports=u;});
__d("Bootloader",["ArrayUtils","Arbiter","CSSLoader","Util","isEmpty"],function(a,b,c,d,e,f){var g=b("ArrayUtils"),h=b("Arbiter"),i=b("CSSLoader"),j=b("Util"),k=b("isEmpty"),l={},m={},n={},o=null,p={},q={},r=false,s=[];function t(x,y,z,aa){var ba=w.done.curry([z],x=='css');if(x=='js'){var ca=document.createElement('script');ca.src=y;ca.type='text/javascript';ca.async=true;ca.onload=ca.onerror=ba;ca.onreadystatechange=function(){if(this.readyState in {loaded:1,complete:1})ba();};aa.appendChild(ca);}else if(x=='css')i.loadStyleSheet(z,y,aa,ba,function(){ba();});}function u(x){if(!p[x])return;if(p[x].type=='css'){i.unloadStyleSheet(x);delete l[x];h.inform(h.BOOTLOAD+'/'+x,null,h.BEHAVIOR_STATE);}}function v(x,y){if(!r){s.push([x,y]);return;}x=g.createFrom(x);var z=[];for(var aa=0;aa<x.length;++aa){if(!x[aa])continue;var ba=n[x[aa]];if(ba){var ca=ba.resources;for(var da=0;da<ca.length;++da)z.push(ca[da]);}}w.loadResources(z,y);}var w={configurePage:function(x){var y={},z=w.resolveResources(x),aa;for(aa=0;aa<z.length;aa++){y[z[aa].src]=z[aa];w.requested(z[aa].name);}var ba=document.getElementsByTagName('link');for(aa=0;aa<ba.length;++aa){if(ba[aa].rel!='stylesheet')continue;for(var ca in y)if(ba[aa].href.indexOf(ca)!==-1){var da=y[ca].name;if(y[ca].permanent)m[da]=true;delete y[ca];i.registerLoadedStyleSheet(da,ba[aa]);w.done([da],true);break;}}},loadComponents:function(x,y){x=g.createFrom(x);var z=[],aa=[];for(var ba=0;ba<x.length;ba++){var ca=n[x[ba]];if(ca&&!ca.module)continue;var da='legacy:'+x[ba];if(n[da]){x[ba]=da;z.push(da);}else if(ca&&ca.module){z.push(x[ba]);if(!ca.runWhenReady)aa.push(x[ba]);}}v(x,z.length?d.curry(z,y):y);},loadModules:function(x,y){var z=[],aa=[];for(var ba=0;ba<x.length;ba++){var ca=n[x[ba]];if(!ca||ca.module)z.push(x[ba]);}v(x,d.curry(z,y));},loadResources:function(x,y,z,aa){var ba;x=w.resolveResources(g.createFrom(x));if(z){var ca={};for(ba=0;ba<x.length;++ba)ca[x[ba].name]=true;for(var da in l)if(!(da in m)&&!(da in ca)&&!(da in q))u(da);q={};}var ea=[],fa=[];for(ba=0;ba<x.length;++ba){var ga=x[ba];if(ga.permanent)m[ga.name]=true;var ha=h.BOOTLOAD+'/'+ga.name;if(h.query(ha)!==null)continue;if(!ga.nonblocking)fa.push(ha);if(!l[ga.name]){w.requested(ga.name);ea.push(ga);window.CavalryLogger&&CavalryLogger.getInstance().measureResources(ga,aa);}}if(y)y=h.registerCallback(y,fa);var ia=document.documentMode||+(/MSIE.(\d+)/.exec(navigator.userAgent)||[])[1],ja=w.getHardpoint(),ka=ia?ja:document.createDocumentFragment();for(ba=0;ba<ea.length;++ba)t(ea[ba].type,ea[ba].src,ea[ba].name,ka);if(ja!==ka)ja.appendChild(ka);return y;},requestResource:function(x,y,z){var aa=w.getHardpoint();t(x,y,z,aa);},done:function(x,y){w.requested(x);if(!y){var z={sender:this};h.inform(h.BOOTLOAD,z,h.BEHAVIOR_EVENT);}for(var aa=0;aa<x.length;++aa){var ba=x[aa];h.inform(h.BOOTLOAD+'/'+ba,true,h.BEHAVIOR_STATE);}},requested:function(x){x=g.createFrom(x);for(var y=0;y<x.length;++y)l[x[y]]=true;},enableBootload:function(x){for(var y in x)if(!n[y])n[y]=x[y];if(!r){r=true;for(var z=0;z<s.length;z++)v.apply(null,s[z]);s=[];}},getHardpoint:function(){if(!o){var x=document.getElementsByTagName('head');o=x.length&&x[0]||document.body;}return o;},setResourceMap:function(x){if(!x)return;for(var y in x){if(!x[y].name)x[y].name=y;p[y]=x[y];}},resolveResources:function(x){if(!x)return [];var y=[];for(var z=0;z<x.length;++z)if(typeof x[z]=='string'){if(x[z] in p)y.push(p[x[z]]);}else y.push(x[z]);return y;},loadEarlyResources:function(x){var y;w.setResourceMap(x);var z=[];for(y in x)z.push(p[y]);w.loadResources(z);for(y in x){var aa=p[y];if(!aa.permanent)q[aa.name]=aa;}},isDisplayJS:function(x){if(typeof x=='string')x=p[x];return x.displayjs;}};e.exports=a.Bootloader||w;});
__d("legacy:bootloader",["Bootloader"],function(a,b,c,d){a.Bootloader=b('Bootloader');},3);
__d("OnloadEvent",[],function(a,b,c,d,e,f){var g={ONLOAD:'onload/onload',ONLOAD_CALLBACK:'onload/onload_callback',ONLOAD_DOMCONTENT:'onload/dom_content_ready',ONLOAD_DOMCONTENT_CALLBACK:'onload/domcontent_callback',ONBEFOREUNLOAD:'onload/beforeunload',ONUNLOAD:'onload/unload'};e.exports=g;});
__d("EagleEye",["Arbiter","Bootloader","Env","OnloadEvent","Util"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('Env'),j=b('OnloadEvent'),k=b('Util'),l=i.eagleEyeConfig||{},m='_e_',n=(window.name||'').toString();if(n.length==7&&n.substr(0,3)==m){n=n.substr(3);}else{n=l.seed;if(window==window.top)window.name=m+n;}var o=(window.location.protocol=='https:'&&document.cookie.match(/\bcsm=1/))?'; secure':'',p=m+n+'_',q=new Date(Date.now()+604800000).toGMTString(),r=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1'),s='; expires='+q+';path=/; domain='+r+o,t=0,u,v=l.sessionStorage&&a.sessionStorage,w=document.cookie.length,x=false,y=Date.now();function z(ea){var fa=2166136261;for(var ga=0,ha=ea.length;ga<ha;++ga)fa=(fa^ea.charCodeAt(ga))*16777619;fa+=fa<<13;fa^=fa>>7;fa+=fa<<3;fa^=fa>>17;fa+=fa<<5;return (fa|0)+2147483648;}function aa(ea){return p+(t++)+'='+encodeURIComponent(ea)+s;}function ba(){var ea=[],fa=false,ga=0,ha=0;this.isEmpty=function(){return !ea.length;};this.enqueue=function(ia,ja){if(ja){ea.unshift(ia);}else ea.push(ia);};this.dequeue=function(){ea.shift();};this.peek=function(){return ea[0];};this.clear=function(ia){w=Math.min(w,document.cookie.length);if(!x&&(new Date()-y>60000))x=true;var ja=!ia&&(document.cookie.search(m)>=0),ka=!!i.cookie_header_limit,la=i.cookie_count_limit||19,ma=i.cookie_header_limit||3950,na=la-5,oa=ma-1000;while(!this.isEmpty()){var pa=aa(this.peek());if(ka&&(pa.length>ma||(x&&pa.length+w>ma))){this.dequeue();continue;}if((ja||ka)&&((document.cookie.length+pa.length>ma)||(document.cookie.split(';').length>la)))break;document.cookie=pa;ja=true;this.dequeue();}var qa=Date.now();if(ia||!fa&&ja&&((ha>0)&&(Math.min(10*Math.pow(2,ha-1),60000)+ga<qa))&&g.query(j.ONLOAD)&&(!this.isEmpty()||(document.cookie.length>oa)||(document.cookie.split(';').length>na))){var ra=new Image(),sa=this,ta=i.tracking_domain||'';fa=true;ra.onload=function _EagleEye_logged(){fa=false;ha=0;sa.clear();};ra.onerror=ra.onabort=function _EagleEye_error(){fa=false;ga=Date.now();ha++;};var ua=i.fb_isb?'&fb_isb='+i.fb_isb:'',va='&__user='+i.user;ra.src=ta+'/ajax/nectar.php?asyncSignal='+(Math.floor(Math.random()*10000)+1)+ua+va+'&'+(!ia?'':'s=')+qa;}};}u=new ba();if(v){var ca=function(){var ea=0,fa=ea;function ga(){var ja=sessionStorage.getItem('_e_ids');if(ja){var ka=(ja+'').split(';');if(ka.length==2){ea=parseInt(ka[0],10);fa=parseInt(ka[1],10);}}}function ha(){var ja=ea+';'+fa;sessionStorage.setItem('_e_ids',ja);}function ia(ja){return '_e_'+((ja!==undefined)?ja:ea++);}this.isEmpty=function(){return fa===ea;};this.enqueue=function(ja,ka){var la=ka?ia(--fa):ia();sessionStorage.setItem(la,ja);ha();};this.dequeue=function(){this.isEmpty();sessionStorage.removeItem(ia(fa));fa++;ha();};this.peek=function(){var ja=sessionStorage.getItem(ia(fa));return ja?(ja+''):ja;};this.clear=u.clear;ga();};u=new ca();}var da={log:function(ea,fa,ga){if(i.no_cookies)return;var ha=[n,Date.now(),ea].concat(fa);ha.push(ha.length);function ia(){var ja=JSON.stringify(ha);try{u.enqueue(ja,!!ga);u.clear(!!ga);}catch(ka){if(v&&(ka.code===1000)){u=new ba();v=false;ia();}}}if(a.JSON){ia();}else h.loadModules(['json'],ia);},createLogger:function(ea,fa){fa=(fa===undefined)?1:fa;var ga=function(ha,ia){if(ga.enabled)da.log(ea,ha,ia);};ga.enabled=false;ga._key=(i.user||Math.random())+ea;ga.enabled=(z(ga._key)%65535/65535)<=fa;return ga;},getSessionID:function(){return n;},hash:function(ea){return z(ea);}};a.EagleEye=e.exports=da;},3);
__d("setUECookie",["Env"],function(a,b,c,d,e,f){var g=b("Env");function h(i){if(!g.no_cookies){var j=0;if(a.afterloaded){j=2;}else if(a.loaded)j=1;document.cookie="act="+encodeURIComponent(i+":"+j)+"; path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}}e.exports=h;});
__d("json",[],function(a,b,c,d,e,f){if(!this.JSON)this.JSON={};(function(){function g(p){return p<10?'0'+p:p;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(p){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+g(this.getUTCMonth()+1)+'-'+g(this.getUTCDate())+'T'+g(this.getUTCHours())+':'+g(this.getUTCMinutes())+':'+g(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(p){return this.valueOf();};}var h=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,k,l={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},m;function n(p){i.lastIndex=0;return i.test(p)?'"'+p.replace(i,function(q){var r=l[q];return typeof r==='string'?r:'\\u'+('0000'+q.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+p+'"';}function o(p,q){var r,s,t,u,v=j,w,x=q[p];if(x&&typeof x==='object'&&typeof x.toJSON==='function')x=x.toJSON(p);if(typeof m==='function')x=m.call(q,p,x);switch(typeof x){case 'string':return n(x);case 'number':return isFinite(x)?String(x):'null';case 'boolean':case 'null':return String(x);case 'object':if(!x)return 'null';j+=k;w=[];if(Object.prototype.toString.apply(x)==='[object Array]'){u=x.length;for(r=0;r<u;r+=1)w[r]=o(r,x)||'null';t=w.length===0?'[]':j?'[\n'+j+w.join(',\n'+j)+'\n'+v+']':'['+w.join(',')+']';j=v;return t;}if(m&&typeof m==='object'){u=m.length;for(r=0;r<u;r+=1){s=m[r];if(typeof s==='string'){t=o(s,x);if(t)w.push(n(s)+(j?': ':':')+t);}}}else for(s in x)if(Object.hasOwnProperty.call(x,s)){t=o(s,x);if(t)w.push(n(s)+(j?': ':':')+t);}t=w.length===0?'{}':j?'{\n'+j+w.join(',\n'+j)+'\n'+v+'}':'{'+w.join(',')+'}';j=v;return t;}}if(typeof JSON.stringify!=='function')JSON.stringify=function(p,q,r){var s;j='';k='';if(typeof r==='number'){for(s=0;s<r;s+=1)k+=' ';}else if(typeof r==='string')k=r;m=q;if(q&&typeof q!=='function'&&(typeof q!=='object'||typeof q.length!=='number'))throw new Error('JSON.stringify');return o('',{'':p});};if(typeof JSON.parse!=='function')JSON.parse=function(p,q){var r;function s(t,u){var v,w,x=t[u];if(x&&typeof x==='object')for(v in x)if(Object.hasOwnProperty.call(x,v)){w=s(x,v);if(w!==undefined){x[v]=w;}else delete x[v];}return q.call(t,u,x);}p=String(p);h.lastIndex=0;if(h.test(p))p=p.replace(h,function(t){return '\\u'+('0000'+t.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(p.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){r=(eval)('('+p+')');return typeof q==='function'?s({'':r},''):r;}throw new SyntaxError('JSON.parse');};JSON.stringify=function(p){return function(){var q=p.apply(this,arguments);return q?q.replace(/[%\u2028\u2029]/g,function(r){var s=r.charCodeAt(0).toString(16);return '\\u0000'.substring(0,6-s.length)+s;}):q;};}(JSON.stringify);}());if(!a.JSON)a.JSON=JSON;},3);
__d("ge",[],function(a,b,c,d,e,f){function g(h){return typeof h=='string'?document.getElementById(h):h;}e.exports=g;});
__d("collectDataAttributes",["json","ge"],function(a,b,c,d,e,f){b("json");var g=b("ge");function h(i,j){var k={},l={},m=j.length,n,o;for(n=0;n<m;++n){k[j[n]]={};l[j[n]]='data-'+j[n];}while(i){if(i.getAttribute)for(n=0;n<m;++n){var p=i.getAttribute(l[j[n]]);if(p){var q=JSON.parse(p);for(var r in q)if(k[j[n]][r]===undefined)k[j[n]][r]=q[r];}}if(i.getAttribute&&(o=i.getAttribute('data-ownerid'))){i=g(o);}else i=i.parentNode;}return k;}e.exports=h;});
__d("ClickRef",["Arbiter","EagleEye","copyProperties","setUECookie","collectDataAttributes"],function(a,b,c,d,e,f){var g=b("Arbiter"),h=b("EagleEye"),i=b("copyProperties"),j=b("setUECookie"),k=b("collectDataAttributes");function l(){function m(r){if(!!r){var s={profile_minifeed:1,info_tab:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,navSearch:1};for(var t=r;t&&t!=document.body;t=t.parentNode){if(!t.id||typeof t.id!=='string')continue;if(t.id.substr(0,8)=='pagelet_')return t.id.substr(8);if(t.id.substr(0,8)=='box_app_')return t.id;if(s[t.id])return t.id;}}return '-';}function n(r){return (r.getAttribute&&(r.getAttribute('ajaxify')||r.getAttribute('data-endpoint'))||r.action||r.href||r.name);}function o(r){if(!ge('content'))return [0,0,0,0];var s=$('content'),t=window.Vector2?Vector2.getEventPosition(r):{x:0,y:0};return [t.x,t.y,s.offsetLeft,s.clientWidth];}function p(r,s){if(s=='FORCE')return true;if(s=='INDIRECT')return false;return (r&&n(r));}function q(r,s,event,t){var u=(!window.ArbiterMonitor)?'r':'a',v=[0,0,0,0],w,x,y;if(!!event){w=event.type;if(w=='click'&&ge('content'))v=o(event);var z=0;event.ctrlKey&&(z+=1);event.shiftKey&&(z+=2);event.altKey&&(z+=4);event.metaKey&&(z+=8);if(z)w+=z;}if(!!s)x=n(s);var aa=[];if(window.ArbiterMonitor){y=ArbiterMonitor.getInternRef(s);aa=ArbiterMonitor.getActFields();}var ba=k(s,['ft','gt']);i(ba.ft,t.ft||{});i(ba.gt,t.gt||{});if(ba.gt.ua_id)r.set_ua_id(ba.gt.ua_id);if(typeof(ba.ft.ei)==='string')delete ba.ft.ei;var ca=[r._ue_ts,r._ue_count,x||'-',r._context,w||'-',y||m(s),u,window.URI?URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,ba].concat(v).concat(aa);return ca;}g.subscribe("UserAction/new",function(r,s){if(p(s.node,s.mode)){var t=q(s.ua,s.node,s.event,s.extra_data);j(s.ua.ue);h.log('act',t);}});}e.exports={init:l};});
__d("legacy:click-ref",["ClickRef"],function(a,b,c,d){b('ClickRef').init();},3);
__d("$",["ge"],function(a,b,c,d,e,f){var g=b("ge");function h(i){var j=g(i);return j;}e.exports=h;});
__d("css-core",["$"],function(a,b,c,d,e,f){var g=b('$'),h={hasClass:function(i,j){i=g(i);return (' '+i.className+' ').indexOf(' '+j+' ')>-1;},addClass:function(i,j){i=g(i);if(j&&!h.hasClass(i,j))i.className=i.className+' '+j;return i;},removeClass:function(i,j){i=g(i);if(h.hasClass(i,j))i.className=i.className.replace(new RegExp('(^|\\s)'+j+'(?:\\s|$)','g'),'$1').replace(/\s+/g,' ').replace(/^\s*|\s*$/g,'');return i;},toggleClass:function(i,j){return h.conditionClass(i,j,!h.hasClass(i,j));},conditionClass:function(i,j,k){return (k?h.addClass:h.removeClass)(i,j);},show:function(i){h.removeClass(i,'hidden_elem');},hide:function(i){h.addClass(i,'hidden_elem');},conditionShow:function(i,j){h.conditionClass(i,'hidden_elem',!j);}};a.CSS=e.exports=h;},3);
__d("Parent",["css-core"],function(a,b,c,d,e,f){var g=b("css-core"),h={byTag:function(i,j){j=j.toUpperCase();while(i&&i.nodeName!=j)i=i.parentNode;return i;},byClass:function(i,j){while(i&&!g.hasClass(i,j))i=i.parentNode;return i;},byAttribute:function(i,j){while(i&&(!i.getAttribute||!i.getAttribute(j)))i=i.parentNode;return i;}};e.exports=h;});
__d("legacy:parent",["Parent"],function(a,b,c,d){a.Parent=b('Parent');},3);
__d("trackReferrer",["Parent"],function(a,b,c,d,e,f){var g=b("Parent");function h(i,j){i=g.byAttribute(i,'data-referrer');if(i){var k=/^(?:(?:[^:\/?#]+):)?(?:\/\/(?:[^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/.exec(j)[1]||'';if(!k)return;var l=k+'|'+i.getAttribute('data-referrer'),m=new Date();m.setTime(Date.now()+1000);document.cookie="x-src="+encodeURIComponent(l)+"; "+"expires="+m.toGMTString()+";path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}return i;}e.exports=h;});
__d("legacy:referrer-tracker",["trackReferrer"],function(a,b,c,d){a.trackReferrer=b('trackReferrer');},3);
__d("UserNoOp",["copyProperties"],function(a,b,c,d,e,f){var g=b("copyProperties"),h=function(){},i=function(){return this;};g(h.prototype,{add_event:i,add_data:i,set_ua_id:i,set_namespace:i});e.exports=h;});
__d("FunctionUtils",[],function(a,b,c,d,e,f){function g(h,i,j,k){var l,m=function(){var n=arguments,o=this,p=function(){l=null;h.apply(o,n);};j&&m.reset();if(j||!l)l=setTimeout(p,i||100,k);};m.reset=function(){l&&clearTimeout(l);l=null;};return m;}e.exports={debounce:function(h,i,j){return g(h,i,true,j);},throttle:function(h,i,j){return g(h,i,false,j);}};});
__d("userAction",["function-extensions","array-extensions","Arbiter","EagleEye","FunctionUtils","Env","copyProperties","hasArrayNature"],function(a,b,c,d,e,f){b("function-extensions");b("array-extensions");var g=b("Arbiter"),h=b("EagleEye"),i=b("FunctionUtils"),j=b("Env"),k=b("copyProperties"),l=b("hasArrayNature");function m(w,x,y){var z=w+'/'+x;k(this,{ue:z,_ua_id:null,_ts:w,_ns:null,_start_ts:w,_prev_event:'s',_ue_ts:w,_ue_count:x,_context:y,_data_version:1,_event_version:2,_info_version:1});if(m.enable.report)this._log('uan',[1,w,x]);this._report=i.debounce(function report(){if(!m.enable.report)return;var aa=[this._info_version,this.ue,this._ns,this._ua_id];this._log('uai',aa);}.bind(this),100);}var n=[];m.enable=function(w){if(!w)return;if(!l(w))w=[w];for(var x=0;x<w.length;x++)m.enable[w[x]]=true;};var o=j.user||Math.random(),p={},q=10000;m.setSampleRate=function(w,x,y){if(!p[w])p[w]={};p[w][x]=y||q;};k(m.prototype,{_log:function(w,x){var y=p[this._ns],z=y?y[this._ua_id]:q,aa=1/z,ba=(h.hash(o)%65535/65535)<=aa;if(ba)h.log(w,x);},set_ua_id:function(w){this._ua_id=w;this._report();return this;},set_namespace:function(w){this._ns=w;this._report();return this;},add_event:function(w,x){if(!m.enable.events)return this;x=x||0;var y=(Date.now()-x),z=y-this._ts,aa=y-this._ue_ts,ba=[this._event_version,this.ue,this._ns,this._ua_id,this._prev_event,w,z,aa];this._log('uae',ba);this._ts=y;this._prev_event=w;return this;},add_data:function(w){if(!m.enable.data)return this;var x=[this._data_version,this.ue,w];this._log('uad',x);return this;}});var r=0,s=0,t=null,u=null;function v(w,x,event,y,z){var aa=Date.now(),ba=aa+'/'+r;z=z||{};if(!x&&event)x=event.getTarget();var ca=50;if(x&&t)if(aa-s<ca&&x==t&&y!="FORCE")return n[n.length-1];if(!window.addEventListener&&document.createEventObject)event=document.createEventObject(event);t=x;u=event;var da=new m(aa,r,w);n.push(da);while(n.length>10)n.shift();g.inform("UserAction/new",{ua:da,node:x,mode:y,event:event,extra_data:z});s=aa;r++;return da;}g.subscribe("UserAction/enable",function(w,x){m.enable(x);});g.subscribe('UserAction/loadSamplingRates',function(w,x){for(var y=0;y<x.length;y++){var z=x[y];m.setSampleRate(z.ns,z.ua_id,z.rate);}});e.exports=v;});
__d("legacy:UserAction",["UserNoOp","userAction"],function(a,b,c,d){a.UserNoOp=b('UserNoOp');a.user_action=a.user_action||b('userAction');a.report_data=a.report_data||function(e,f){user_action(e,null,null,'FORCE',f);};},3);
!function(){if(window.__primer)return;window.__primer=true;var a=null,b=/async(?:-post)?|dialog(?:-pipe|-post)?|theater|toggle/;document.documentElement.onclick=function(d){d=d||window.event;a=d.target||d.srcElement;var e=Parent.byTag(a,'A');if(!e)return;var f=e.getAttribute('ajaxify'),g=e.href,h=f||g;if(h){var i=user_action('a',e,d).set_namespace('primer');if(window.ArbiterMonitor)ArbiterMonitor.initUA(i,[e]);}if(f&&g&&!(/#$/).test(g)){var j=d.which&&d.which!=1,k=d.altKey||d.ctrlKey||d.metaKey||d.shiftKey;if(j||k)return;}trackReferrer(e,h);var l=e.rel&&e.rel.match(b);l=l&&l[0];function m(){Dialog.bootstrap(h,null,l=='dialog',null,null,e);}switch(l){case 'dialog':case 'dialog-post':Bootloader.loadComponents('dialog',m);break;case 'dialog-pipe':Bootloader.loadComponents(['ajaxpipe','dialog'],m);break;case 'async':case 'async-post':Bootloader.loadComponents('async',function(){AsyncRequest.bootstrap(h,e);});break;case 'theater':Bootloader.loadComponents('PhotoSnowlift',function(){PhotoSnowlift.bootstrap(h,e);});break;case 'toggle':CSS.toggleClass(e.parentNode,'openToggler');Bootloader.loadComponents('Toggler',function(){Toggler.bootstrap(e);});break;default:return;}return false;};document.documentElement.onsubmit=function(d){d=d||window.event;var e=d.target||d.srcElement;if(e&&e.nodeName=='FORM'&&e.getAttribute('rel')=='async'){var f=user_action('f',e,d).set_namespace('primer');if(window.ArbiterMonitor)ArbiterMonitor.initUA(f,[e]);var g=a;Bootloader.loadComponents('dom-form',function(){Form.bootstrap(e,g);});return false;}};var c=null;document.documentElement.onmouseover=function(d){d=d||window.event;c=d.target||d.srcElement;var e=Parent.byAttribute(c,'data-hover');if(!e)return;switch(e.getAttribute('data-hover')){case 'tooltip':Bootloader.loadComponents('Tooltip',function(){Tooltip.process(e,c);});break;}};}();
__d("ServerJS",["function-extensions","ErrorUtils","copyProperties"],function(a,b,c,d,e,f){b("function-extensions");var g=b("ErrorUtils"),h=b("copyProperties");function i(){this._moduleMap={};this._relativeTo=null;}h(i.prototype,{handle:function(n){g.applyWithGuard(function(o){k(o.require||[],this._handleRequire,this);k(o.define||[],this._handleDefine,this);k(o.instances||[],this._handleInstance,this);k(o.markup||[],this._handleMarkup,this);},this,[].concat(n));},handlePartial:function(n){if(n.instances)for(var o=0;o<n.instances.length;o++)l(this._moduleMap,3,n.instances[o]);if(n.markup)for(o=0;o<n.markup.length;o++)l(this._moduleMap,2,n.markup[o]);this.handle(n);},cleanup:function(){var n=[];for(var o in this._moduleMap)n.push(o);d.call(null,n,m);this._moduleMap={};},setRelativeTo:function(n){this._relativeTo=n;return this;},_handleDefine:function(n,o,p){define(n,o,function(){this._replaceTransportMarkers(p);return p;}.bind(this));},_handleRequire:function(n,o,p,q){var r=[n].concat(p||[]);d(r,function(s){q&&this._replaceTransportMarkers(q);o&&s[o].apply(s,q||[]);}.bind(this));},_handleInstance:function(n,o,p,q){define(n,o,function(r){this._replaceTransportMarkers(p);var s=function(){};s.prototype=r.prototype;var t=new s();r.apply(t,p);return t;}.bind(this),0,null,q);},_handleMarkup:function(n,o,p){define(n,['HTML'],function(q){return q.replaceJSONWrapper(o).getRootNode();},0,null,p);},_replaceTransportMarkers:function(n,o){var p=(typeof o!=='undefined')?n[o]:n,q;if(Array.isArray(p)){for(q=0;q<p.length;q++)this._replaceTransportMarkers(p,q);}else if(p&&typeof p=='object')if(p.__m){n[o]=b(p.__m);}else if(p.__e){n[o]=j(p.__e,p.root?b(p.root):null);}else if(p.__rel){n[o]=this._relativeTo;}else for(var r in p)this._replaceTransportMarkers(p,r);}});function j(n,o){var p;if(o){if(o.id==n){p=o;}else{var q=o.getElementsByTagName('*');for(var r=0;r<q.length;r++)if(q[r].id==n){p=q[r];break;}}}else p=document.getElementById(n);return p;}function k(n,o,p){for(var q=0;q<n.length;q++)o.apply(p,[].concat(n[q]));}function l(n,o,p){var q=p[0];if(!(q in n))p[o]=(p[o]||0)+1;n[q]=true;}function m(){return {};}e.exports=i;});
__d("commonjs-haste",["ServerJS"],function(a,b,c,d,e,f){var g=b('ServerJS'),h=new g();a.__c=function(){h.handle({require:[arguments]});};a.__i=function(){h.handle({instances:[arguments]});};a.__y=function(){h.handle({define:[arguments]});};a.__m=function(){h.handle({markup:[arguments]});};},3);
__d("legacy:ServerJS",["ServerJS"],function(a,b,c,d){a.ServerJS=b('ServerJS');},3);
__d("bind",["function-extensions","Util"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Util');function h(i,j){var k=Array.prototype.slice.call(arguments,2);if(typeof j!='string')return Function.prototype.bind.apply(j,[i].concat(k));function l(){var m=k.concat(Array.prototype.slice.call(arguments));if(i[j])return i[j].apply(i,m);}l.toString=function(){return 'bound lazily: '+i[j];};return l;}e.exports=h;a.bind=h;},3);
__d("Class",["function-extensions","Arbiter","bind"],function(a,b,c,d,e,f){b("function-extensions");var g=b("Arbiter"),h=b("bind"),i={},j=null,k={extend:function(s,t){if(!j)j=g.subscribe(g.BOOTLOAD,m);if(typeof t=='string'){l(s,t);}else n(s,t);},mixin:function(s,t){var u=Array.prototype.slice.call(arguments);u[0]=u[0].prototype;Function.mixin.apply(Function,u);}};function l(s,t){s.__class_extending=true;var u=g.registerCallback(h(null,n,s,t),[g.FUNCTION_EXTENSION+'/'+t,g.BOOTLOAD]);if(u!==null)i[t]=true;}function m(){for(var s in i)if(!!a[s]){delete i[s];if(!a[s].__class_extending){g.inform(g.FUNCTION_EXTENSION+'/'+s,true,g.BEHAVIOR_STATE);}else a[s].__class_name=s;}}function n(s,t){delete s.__class_extending;t=typeof t=='string'?a[t]:t;var u=o(t,0),v=o(s,u.prototype.__level+1);v.parent=u;if(!!s.__class_name)g.inform(g.FUNCTION_EXTENSION+'/'+s.__class_name,true,g.BEHAVIOR_STATE);}function o(s,t){if(s._metaprototype)return s._metaprototype;var u=new Function();u.construct=p;u.prototype.construct=r(s,t,true);u.prototype.__level=t;u.base=s;s.prototype.parent=u;s._metaprototype=u;return u;}function p(s){q(s.parent);var t=[],u=s;while(u.parent){var v=new u.parent();t.push(v);v.__instance=s;u=u.parent;}s.parent=t[1];t.reverse();t.pop();s.__parents=t;s.__instance=s;return s.parent.construct.apply(s.parent,arguments);}function q(s){if(s.initialized)return;var t=s.base.prototype;if(s.parent){q(s.parent);var u=s.parent.prototype;for(var v in u)if(v!='__level'&&v!='construct'&&t[v]===undefined)t[v]=s.prototype[v]=u[v];}s.initialized=true;var w=s.prototype.__level;for(var v in t)if(v!='parent')t[v]=s.prototype[v]=r(t[v],w);}function r(s,t,u){if(typeof s!='function'||s.__prototyped)return s;var v=function(){var w=this.__instance;if(w){var x=w.parent;w.parent=t?w.__parents[t-1]:null;var y=arguments;if(u){y=[];for(var z=1;z<arguments.length;z++)y.push(arguments[z]);}var aa=s.apply(w,y);w.parent=x;return aa;}else return s.apply(this,arguments);};v.__prototyped=true;return v;}e.exports=k;});
__d("legacy:Class",["Class"],function(a,b,c,d){a.Class=b('Class');},3);
__d("legacy:arbiter",["Arbiter"],function(a,b,c,d){a.Arbiter=b('Arbiter');},3);
__d("event-form-bubbling",[],function(a,b,c,d,e,f){a.Event=a.Event||function(){};Event.__inlineSubmit=function(g,event){var h=Event.__getHandler&&Event.__getHandler(g,'submit');return h?null:Event.__bubbleSubmit(g,event);};Event.__bubbleSubmit=function(g,event){if(document.documentElement.attachEvent){var h;while(h!==false&&(g=g.parentNode))h=g.onsubmit?g.onsubmit(event):Event.__fire&&Event.__fire(g,'submit',event);return h;}};},3);
__d("DataStore",[],function(a,b,c,d,e,f){var g={},h=1;function i(l){if(typeof l=='string'){return 'str_'+l;}else return 'elem_'+(l.__FB_TOKEN||(l.__FB_TOKEN=[h++]))[0];}function j(l){var m=i(l);return g[m]||(g[m]={});}var k={set:function(l,m,n){var o=j(l);o[m]=n;return l;},get:function(l,m,n){var o=j(l),p=o[m];if(typeof p==='undefined'&&l.getAttribute){var q=l.getAttribute('data-'+m);p=(null===q)?undefined:q;}if((n!==undefined)&&(p===undefined))p=o[m]=n;return p;},remove:function(l,m){var n=j(l),o=n[m];delete n[m];return o;},purge:function(l){delete g[i(l)];}};e.exports=k;});
__d("ObjectUtils",["copyProperties","hasArrayNature"],function(a,b,c,d,e,f){var g=b("copyProperties"),h=b("hasArrayNature"),i={isScalar:function(j){return (/string|number|boolean/).test(typeof j);},getKeys:function(j){var k=[];for(var l in j)k.push(l);return k;},getValues:function(j){var k=[];for(var l in j)k.push(j[l]);return k;},countKeys:function(j){var k=0;for(var l in j)k++;return k;},areEqual:function(j,k){return JSON.stringify(j)==JSON.stringify(k);},merge:function(){var j={};for(var k=0;k<arguments.length;k++)g(j,arguments[k]);return j;},coalesce:function(){for(var j=0;j<arguments.length;++j)if(arguments[j]!=null)return arguments[j];return null;},createFrom:function(j,k){var l={},m=h(k);if(typeof k=='undefined')k=true;for(var n=j.length;n--;)l[j[n]]=m?k[n]:k;return l;}};e.exports=i;});
__d("ua",[],function(a,b,c,d,e,f){var g={ie:function(){return g._populate()||this._ie;},ie64:function(){return g.ie()&&this._win64;},firefox:function(){return g._populate()||this._firefox;},opera:function(){return g._populate()||this._opera;},safari:function(){return g._populate()||this._safari;},chrome:function(){return g._populate()||this._chrome;},windows:function(){return g._populate()||this._windows;},osx:function(){return g._populate()||this._osx;},linux:function(){return g._populate()||this._linux;},iphone:function(){return g._populate()||this._iphone;},_populated:false,_populate:function(){if(g._populated)return;g._populated=true;var h=navigator.userAgent,i=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(h),j=/(Mac OS X)|(Windows)|(Linux)/.exec(h),k=/\b(iPhone|iP[ao]d)/.exec(h);g._win64=!!(/Win64/.exec(h));if(i){g._ie=i[1]?parseFloat(i[1]):NaN;if(g._ie&&document.documentMode)g._ie=document.documentMode;g._firefox=i[2]?parseFloat(i[2]):NaN;g._opera=i[3]?parseFloat(i[3]):NaN;g._safari=i[4]?parseFloat(i[4]):NaN;if(g._safari){i=/(?:Chrome\/(\d+\.\d+))/.exec(h);g._chrome=i&&i[1]?parseFloat(i[1]):NaN;}else g._chrome=NaN;}else g._ie=g._firefox=g._opera=g._chrome=g._safari=NaN;if(j){if(j[1]){var l=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(h);g._osx=l?parseFloat(l[1].replace('_','.')):true;}else g._osx=false;g._windows=!!j[2];g._linux=!!j[3];}else g._osx=g._windows=g._linux=false;g._iphone=k;}};a.ua=e.exports=g;},3);
__d("DOMQuery",["ArrayUtils","css-core","ObjectUtils","ge","ua"],function(a,b,c,d,e,f){var g=b("ArrayUtils"),h=b("css-core"),i=b("ObjectUtils"),j=b("ge"),k=b("ua"),l={find:function(m,n){var o=l.scry(m,n);return o[0];},scry:function(m,n){if(!m||!m.getElementsByTagName)return [];var o=n.split(' '),p=[m],q=!!m.documentElement;for(var r=0;r<o.length;r++){if(p.length===0)break;if(o[r]==='')continue;var s=o[r],t=[],u=false;if(s.charAt(0)=='^')if(r===0){u=true;s=s.slice(1);}else return [];s=s.replace(/\./g,' .');s=s.replace(/\#/g,' #');s=s.replace(/\[/g,' [');var v=s.split(' '),w=v[0]||'*',x=v[1]&&v[1].charAt(0)=='#';if(x){var y=j(v[1].slice(1),true);if(y&&('*'==w||y.tagName.toLowerCase()==w))for(var z=0;z<p.length;z++)if(u&&l.contains(y,p[z])){t=[y];break;}else if(document==p[z]||l.contains(p[z],y)){t=[y];break;}}else{var aa=[],ba=p.length,ca;for(var da=0;da<ba;da++){if(u){ca=[];var ea=p[da].parentNode,fa=w=='*';while(l.isElementNode(ea)){if(fa||ea.tagName.toLowerCase()==w)ca.push(ea);ea=ea.parentNode;}}else ca=p[da].getElementsByTagName(w);var ga=ca.length;for(var ha=0;ha<ga;ha++)aa.push(ca[ha]);}for(var ia=1;ia<v.length;ia++){var ja=v[ia],ka=ja.charAt(0)=='.',la=ja.substring(1);for(da=0;da<aa.length;da++){var ma=aa[da];if(!ma)continue;if(ka){if(!h.hasClass(ma,la))delete aa[da];continue;}else{var na=ja.slice(1,ja.length-1);if(na.indexOf('=')==-1){if(ma.getAttribute(na)===null){delete aa[da];continue;}}else{var oa=na.split('='),pa=oa[0],qa=oa[1];qa=qa.slice(1,qa.length-1);if(ma.getAttribute(pa)!=qa){delete aa[da];continue;}}}}}for(da=0;da<aa.length;da++)if(aa[da]){t.push(aa[da]);if(u)break;}}p=t;}return p;},getText:(function(){var m=document.createElement('div'),n=m.textContent!=null?'textContent':'innerText';return function(o){if(!o){return '';}else if(l.isTextNode(o)){return o.data;}else return o[n];};})(),getSelection:function(){var m=window.getSelection,n=document.selection;if(m){return m()+'';}else if(n)return n.createRange().text;return null;},contains:function(m,n){m=j(m);n=j(n);if(!m||!n){return false;}else if(m===n){return true;}else if(l.isTextNode(m)){return false;}else if(l.isTextNode(n)){return l.contains(m,n.parentNode);}else if(m.contains){return m.contains(n);}else if(m.compareDocumentPosition){return !!(m.compareDocumentPosition(n)&16);}else return false;},getRootElement:function(){var m=null;if(window.Quickling&&Quickling.isActive())m=j('content');return m||document.body;},isNode:function(m){return !!(m&&(typeof Node=='object'?m instanceof Node:typeof m=="object"&&typeof m.nodeType=='number'&&typeof m.nodeName=='string'));},isNodeOfType:function(m,n){var o=g.createFrom(n).join('|').toUpperCase().split('|'),p=i.createFrom(o);return l.isNode(m)&&m.nodeName in p;},isElementNode:function(m){return l.isNode(m)&&m.nodeType==1;},isTextNode:function(m){return l.isNode(m)&&m.nodeType==3;},getDocumentScrollElement:function(m){m=m||document;if(h.hasClass(m.documentElement,'wrapped')){var n=m.getElementById('body');if(n)return n;}return !(k.chrome()||k.safari())&&m.compatMode==='CSS1Compat'?m.documentElement:m.body;},getDocumentBodyElement:function(m){m=m||document;if(h.hasClass(m.documentElement,'wrapped')){var n=m.getElementById('body');if(n)return n;}return m.body;}};e.exports=l;});
__d("event-extensions",["event-form-bubbling","DataStore","DOMQuery","ObjectUtils","Parent","ErrorUtils","ua","$","copyProperties","userAction"],function(a,b,c,d,e,f){b('event-form-bubbling');var g=b('DataStore'),h=b('DOMQuery'),i=b('ObjectUtils'),j=b('Parent'),k=b('ErrorUtils'),l=b('ua'),m=b('$'),n=b('copyProperties'),o=b('userAction');Event.DATASTORE_KEY='Event.listeners';if(!Event.prototype)Event.prototype={};function p(y,z,aa){this.target=y;this.type=z;this.data=aa;}n(p.prototype,{getData:function(){this.data=this.data||{};return this.data;},stop:function(){this.cancelBubble=true;this.stopPropagation&&this.stopPropagation();return this;},prevent:function(){this.returnValue=false;this.preventDefault&&this.preventDefault();return this;},kill:function(){this.stop().prevent();return false;},getTarget:function(){var y=this.target||this.srcElement;return y?m(y):null;}});function q(y){if(y instanceof p)return y;y=y||window.event||{};if(!y._inherits_from_prototype)for(var z in Event.prototype)try{y[z]=Event.prototype[z];}catch(aa){}return y;}n(Event.prototype,{_inherits_from_prototype:true,getRelatedTarget:function(){var y=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return y?m(y):null;},getModifiers:function(){var y={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};y.access=l.osx()?y.control:y.alt;y.any=y.control||y.shift||y.alt||y.meta;return y;},isMiddleClick:function(){return this.which&&this.which!=1;}});n(Event.prototype,p.prototype);n(Event,{listen:function(y,z,aa,ba){if(typeof y=='string')y=m(y);if(typeof ba=='undefined')ba=Event.Priority.NORMAL;if(typeof z=='object'){var ca={};for(var da in z)ca[da]=Event.listen(y,da,z[da],ba);return ca;}if(z.match(/^on/i))throw new TypeError("Bad event name `"+event+"': use `click', not `onclick'.");if(y.nodeName=='LABEL'&&z=='click'){var ea=y.getElementsByTagName('input');y=ea.length==1?ea[0]:y;}else if(y===window&&z==='scroll'){var fa=h.getDocumentScrollElement();if(fa!==document.documentElement&&fa!==document.body)y=fa;}var ga=g.get(y,s,{});if(u[z]){var ha=u[z];z=ha.base;aa=ha.wrap(aa);}v(y,z);var ia=ga[z];if(!(ba in ia))ia[ba]=[];var ja=ia[ba].length,ka=new x(aa,ia[ba],ja);ia[ba].push(ka);return ka;},stop:function(y){return q(y).stop();},prevent:function(y){return q(y).prevent();},kill:function(y){return q(y).kill();},getKeyCode:function(event){event=q(event);if(!event)return false;switch(event.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34;}if(event.shiftKey)switch(event.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null;}return event.keyCode;},getPriorities:function(){if(!r){var y=i.getValues(Event.Priority);y.sort(function(z,aa){return z-aa;});r=y;}return r;},fire:function(y,z,aa){var ba=new p(y,z,aa),ca;do{var da=Event.__getHandler(y,z);if(da)ca=da(ba);y=y.parentNode;}while(y&&ca!==false&&!ba.cancelBubble);return ca!==false;},__fire:function(y,z,event){var aa=Event.__getHandler(y,z);if(aa)return aa(q(event));},__getHandler:function(y,z){return g.get(y,Event.DATASTORE_KEY+z);},getPosition:function(y){y=q(y);var z=h.getDocumentScrollElement(),aa=y.clientX+z.scrollLeft,ba=y.clientY+z.scrollTop;return {x:aa,y:ba};}});var r=null,s=Event.DATASTORE_KEY,t=function(y){return function(z){if(!h.contains(this,z.getRelatedTarget()))return y.call(this,z);};},u={mouseenter:{base:'mouseover',wrap:t},mouseleave:{base:'mouseout',wrap:t}},v=function(y,z){var aa='on'+z,ba=w.bind(y),ca=g.get(y,s);if(z in ca)return;ca[z]={};if(y.addEventListener){y.addEventListener(z,ba,false);}else if(y.attachEvent)y.attachEvent(aa,ba);g.set(y,s+z,ba);if(y[aa]){var da=y===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL,ea=y[aa];y[aa]=null;Event.listen(y,z,ea,da);}if(y.nodeName==='FORM'&&z==='submit')Event.listen(y,z,Event.__bubbleSubmit.curry(y),Event.Priority._BUBBLE);},w=function(event){event=q(event);var y=event.type;if(!g.get(this,s))throw new Error("Bad listenHandler context.");var z=g.get(this,s)[y];if(!z)throw new Error("No registered handlers for `"+y+"'.");if(y=='click'){var aa=j.byTag(event.getTarget(),'a'),ba=o('click',aa,event).set_namespace('evt_ext');if(window.ArbiterMonitor)ArbiterMonitor.initUA(ba,[aa]);}var ca=Event.getPriorities();for(var da=0;da<ca.length;da++){var ea=ca[da];if(ea in z){var fa=z[ea];for(var ga=0;ga<fa.length;ga++){if(!fa[ga])continue;var ha=fa[ga].fire(this,event);if(ha===false){return event.kill();}else if(event.cancelBubble)event.stop();}}}return event.returnValue;};Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1000};function x(y,z,aa){this._handler=y;this._container=z;this._index=aa;}n(x.prototype,{remove:function(){delete this._handler;delete this._container[this._index];},fire:function(y,event){return k.applyWithGuard(this._handler,y,[event],function(z){z.event_type=event.type;z.dom_element=y.name||y.id;z.category='eventhandler';});}});a.$E=f.$E=q;});
__d("css",["DOMQuery","css-core","copyProperties"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('css-core'),i=b('copyProperties');i(h,{shown:function(j){return !h.hasClass(j,'hidden_elem');},toggle:function(j){h.conditionShow(j,!h.shown(j));},setClass:function(j,k){$(j).className=k||'';return j;},setStyle:function(j,k,l){switch(k){case 'opacity':j.style.opacity=l;j.style.filter=l!==''?'alpha(opacity='+l*100+')':'';break;case 'float':j.style.cssFloat=j.style.styleFloat=l;break;default:k=k.replace(/-(.)/g,function(m,n){return n.toUpperCase();});j.style[k]=l;}return j;},getStyle:function(j,k){j=$(j);k=k.replace(/-(.)/g,function(n,o){return o.toUpperCase();});function l(n){return n.replace(/([A-Z])/g,'-$1').toLowerCase();}if(window.getComputedStyle){var m=window.getComputedStyle(j,null);if(m)return m.getPropertyValue(l(k));}if(document.defaultView&&document.defaultView.getComputedStyle){var m=document.defaultView.getComputedStyle(j,null);if(m)return m.getPropertyValue(l(k));if(k=="display")return "none";}if(j.currentStyle)return j.currentStyle[k];return j.style&&j.style[k];},getStyleFloat:function(j,k){return parseFloat(h.getStyle(j,k),10);},getOpacity:function(j){j=$(j);var k=h.getStyle(j,'filter'),l=null;if(k&&(l=/(\d+(?:\.\d+)?)/.exec(k))){return parseFloat(l.pop())/100;}else if(k=h.getStyle(j,'opacity')){return parseFloat(k);}else return 1;},isFixed:function(j){while(j&&j!==document.documentElement){if(h.getStyle(j,'position')==='fixed')return true;j=j.parentNode;}return false;},getScrollParent:(function(){function j(k,l){var m=h.getStyle(k,l);return (m==='auto'||m==='scroll');}return function(k){if(!k)return null;while(k!==document.body){if(j(k,'overflow')||j(k,'overflowY')||j(k,'overflowX'))return k;k=k.parentNode;}return window;};})()});e.exports=h;},3);
__d("string-extensions",[],function(a,b,c,d,e,f){String.prototype.trim=function(){if(this==window)return null;return this.replace(/^\s*|\s*$/g,'');};f.trim=a.trim=function(g){try{return String(g.toString()).trim();}catch(h){return '';}};String.prototype.startsWith=function(g){if(this==window)return null;return this.substring(0,g.length)==g;};String.prototype.endsWith=function(g){if(this==window)return null;return this.length>=g.length&&this.substring(this.length-g.length)==g;};String.prototype.split=(function(g){return function(h,i){var j="";if(h===null||i===null){return [];}else if(typeof h=='string'){return g.call(this,h,i);}else if(h===undefined){return [this.toString()];}else if(h instanceof RegExp){if(!h._2||!h._1){j=h.toString().replace(/^[\S\s]+\//,"");if(!h._1)if(!h.global){h._1=new RegExp(h.source,"g"+j);}else h._1=1;}separator1=h._1===1?h:h._1;var k=(h._2?h._2:h._2=new RegExp("^"+separator1.source+"$",j));if(i===undefined||i<0){i=false;}else{i=Math.floor(i);if(!i)return [];}var l,m=[],n=0,o=0;while((i?o++<=i:true)&&(l=separator1.exec(this))){if((l[0].length===0)&&(separator1.lastIndex>l.index))separator1.lastIndex--;if(separator1.lastIndex>n){if(l.length>1)l[0].replace(k,function(){for(var p=1;p<arguments.length-2;p++)if(arguments[p]===undefined)l[p]=undefined;});m=m.concat(this.substring(n,l.index),(l.index===this.length?[]:l.slice(1)));n=separator1.lastIndex;}if(l[0].length===0)separator1.lastIndex++;}return (n===this.length)?(separator1.test("")?m:m.concat("")):(i?m:m.concat(this.substring(n)));}else return g.call(this,h,i);};})(String.prototype.split);},3);
__d("evalGlobal",[],function(a,b,c,d,e,f){function g(h){if(typeof h!='string')throw new TypeError('JS sent to evalGlobal is not a string. Only strings are permitted.');if(!h)return;var i=document.createElement('script');try{i.appendChild(document.createTextNode(h));}catch(j){i.text=h;}var k=document.getElementsByTagName('head')[0]||document.documentElement;k.appendChild(i);k.removeChild(i);}e.exports=g;});
__d("HTML",["function-extensions","string-extensions","ArrayUtils","ua","copyProperties","evalGlobal"],function(a,b,c,d,e,f){b("function-extensions");b("string-extensions");var g=b("ArrayUtils"),h=b("ua"),i=b("copyProperties"),j=b("evalGlobal");function k(l){if(l&&l.__html)l=l.__html;if(!(this instanceof k)){if(l instanceof k)return l;return new k(l);}this._content=l;this._defer=false;this._extra_action='';this._nodes=null;this._inline_js=bagofholding;this._ie_clone_bug=false;return this;}k.isHTML=function(l){return l&&(l instanceof k||l.__html!==undefined);};k.replaceJSONWrapper=function(l){return l&&l.__html!==undefined?new k(l.__html):l;};i(k.prototype,{toString:function(){var l=this._content||'';if(this._extra_action)l+='<script type="text/javascript">'+this._extra_action+'</scr'+'ipt>';return l;},setAction:function(l){this._extra_action=l;return this;},getAction:function(){this._fillCache();var l=function(){this._inline_js();j(this._extra_action);}.bind(this);if(this.getDeferred()){return l.defer.bind(l);}else return l;},setDeferred:function(l){this._defer=!!l;return this;},getDeferred:function(){return this._defer;},getContent:function(){return this._content;},getNodes:function(){this._fillCache();return this._nodes;},getRootNode:function(){return this.getNodes()[0];},ieCloneBug:function(){this._fillCache();return this._ie_clone_bug;},_fillCache:function(){if(null!==this._nodes)return;var l=this._content;if(!l){this._nodes=[];return;}l=l.replace(/(<(\w+)[^>]*?)\/>/g,function(w,x,y){return y.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?w:x+'></'+y+'>';});var m=l.trim().toLowerCase(),n=document.createElement('div'),o=false,p=(!m.indexOf('<opt')&&[1,'<select multiple="multiple" class="__WRAPPER">','</select>'])||(!m.indexOf('<leg')&&[1,'<fieldset class="__WRAPPER">','</fieldset>'])||(m.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,'<table class="__WRAPPER">','</table>'])||(!m.indexOf('<tr')&&[2,'<table><tbody class="__WRAPPER">','</tbody></table>'])||((!m.indexOf('<td')||!m.indexOf('<th'))&&[3,'<table><tbody><tr class="__WRAPPER">','</tr></tbody></table>'])||(!m.indexOf('<col')&&[2,'<table><tbody></tbody><colgroup class="__WRAPPER">','</colgroup></table>'])||null;if(null===p){n.className='__WRAPPER';if(h.ie()){p=[0,'<span style="display:none">&nbsp;</span>',''];o=true;}else p=[0,'',''];}n.innerHTML=p[1]+l+p[2];while(p[0]--)n=n.lastChild;if(o)n.removeChild(n.firstChild);n.className!='__WRAPPER';if(0!==n.getElementsByTagName('option').length||0!==n.getElementsByTagName('object').length)this._ie_clone_bug=true;if(h.ie()){var q;if(!m.indexOf('<table')&&-1==m.indexOf('<tbody')){q=n.firstChild&&n.firstChild.childNodes;}else if(p[1]=='<table>'&&-1==m.indexOf('<tbody')){q=n.childNodes;}else q=[];for(var r=q.length-1;r>=0;--r)if(q[r].nodeName&&q[r].nodeName.toLowerCase()=='tbody'&&q[r].childNodes.length==0)q[r].parentNode.removeChild(q[r]);}var s=n.getElementsByTagName('script'),t=[];for(var u=0;u<s.length;u++)if(s[u].src){t.push(Bootloader.requestResource.bind(Bootloader,'js',s[u].src));}else t.push(j.bind(null,s[u].innerHTML));for(var u=s.length-1;u>=0;u--)s[u].parentNode.removeChild(s[u]);var v=function(){for(var w=0;w<t.length;w++)t[w]();};this._nodes=g.createFrom(n.childNodes);this._inline_js=v;}});e.exports=k;});
__d("Intl",[],function(a,b,c,d,e,f){function g(i){if(typeof i!='string')return false;return i.match(new RegExp(g.punct_char_class+'['+')"'+"'"+'\u00BB'+'\u0F3B'+'\u0F3D'+'\u2019'+'\u201D'+'\u203A'+'\u3009'+'\u300B'+'\u300D'+'\u300F'+'\u3011'+'\u3015'+'\u3017'+'\u3019'+'\u301B'+'\u301E'+'\u301F'+'\uFD3F'+'\uFF07'+'\uFF09'+'\uFF3D'+'\s'+']*$'));}g.punct_char_class='['+'.!?'+'\u3002'+'\uFF01'+'\uFF1F'+'\u0964'+'\u2026'+'\u0EAF'+'\u1801'+'\u0E2F'+'\uFF0E'+']';function h(i){var j,k=i,l=window.intl_locale_rewrites,m,n;try{if(l){var p=[],q=[];for(var r in l.patterns){var s=r,t=l.patterns[r];for(m in l.meta){j=new RegExp(m.slice(1,-1),'g');s=s.replace(j,l.meta[m]);t=t.replace(j,l.meta[m]);}p[p.length]=s;q[q.length]=t;}for(var u=0;u<p.length;u++){j=new RegExp(p[u].slice(1,-1),'g');if(q[u]=='javascript'){n=i.match(j);m=n&&n[0];if(m)i=i.replace(j,m.slice(1).toLowerCase());}else i=i.replace(j,q[u]);}}}catch(o){i=k;}j=new RegExp('\x01','g');i=i.replace(j,'');return i;}e.exports={endsInPunct:g,phonologicalRules:h};});
__d("tx",["Intl","Util"],function(a,b,c,d,e,f){var g=b('Intl'),h=b('Util');function i(k,l){if(!l)return k;var m;for(var n in l){if(g.endsInPunct(l[n])){m=new RegExp('\\{'+n+'\\}'+g.endsInPunct.punct_char_class+'*','g');}else m=new RegExp('\\{'+n+'\\}','g');var o='\x01';k=k.replace(m,o+l[n]+o);}k=g.phonologicalRules(k);return k;}function j(k,l){if(typeof _string_table=='undefined')return;k=_string_table[k];return i(k,l);}j._=i;e.exports=j;});
__d("DOM",["array-extensions","event-extensions","ArrayUtils","css-core","DOMQuery","HTML","ObjectUtils","$","copyProperties","tx","ua"],function(a,b,c,d,e,f){b("array-extensions");b("event-extensions");var g=b("ArrayUtils"),h=b("css-core"),i=b("DOMQuery"),j=b("HTML"),k=b("ObjectUtils"),l=b("$"),m=b("copyProperties"),n=b("tx"),o=b("ua"),p='js_',q=0,r={};m(r,i);m(r,{create:function(v,w,x){var y=document.createElement(v);if(w)r.setAttributes(y,w);if(x!=null)r.setContent(y,x);return y;},setAttributes:function(v,w){if(w.type)v.type=w.type;for(var x in w){var y=w[x],z=(/^on/i).test(x);if(x=='type'){continue;}else if(x=='style'){if(typeof y=='string'){v.style.cssText=y;}else m(v.style,y);}else if(z){Event.listen(v,x.substr(2),y);}else if(x in v){v[x]=y;}else if(v.setAttribute)v.setAttribute(x,y);}},prependContent:function(v,w){return s(w,v,function(x){v.firstChild?v.insertBefore(x,v.firstChild):v.appendChild(x);});},insertAfter:function(v,w){var x=v.parentNode;return s(w,x,function(y){v.nextSibling?x.insertBefore(y,v.nextSibling):x.appendChild(y);});},insertBefore:function(v,w){var x=w.parentNode;return s(v,x,function(y){x.insertBefore(y,w);});},setContent:function(v,w){r.empty(v);return r.appendContent(v,w);},appendContent:function(v,w){return s(w,v,function(x){v.appendChild(x);});},replace:function(v,w){var x=v.parentNode;return s(w,x,function(y){x.replaceChild(y,v);});},remove:function(v){v=l(v);if(v.parentNode)v.parentNode.removeChild(v);},empty:function(v){v=l(v);while(v.firstChild)r.remove(v.firstChild);},getID:function(v){var w=v.id;if(!w){w=p+q++;v.id=w;}return w;}});function s(v,w,x){v=j.replaceJSONWrapper(v);if(v instanceof j&&''===w.innerHTML&&-1===v.toString().indexOf('<scr'+'ipt')){var y=o.ie();if(!y||(y>7&&!i.isNodeOfType(w,['table','tbody','thead','tfoot','tr','select','fieldset']))){var z=y?'<em style="display:none;">&nbsp;</em>':'';w.innerHTML=z+v;y&&w.removeChild(w.firstChild);return g.createFrom(w.childNodes);}}else if(i.isTextNode(w)){w.data=v;return [v];}var aa=document.createDocumentFragment(),ba,ca=[],da=[];if(!Array.isArray(v))v=[v];for(var ea=0;ea<v.length;ea++){ba=j.replaceJSONWrapper(v[ea]);if(ba instanceof j){da.push(ba.getAction());var fa=ba.getNodes();for(var ga=0;ga<fa.length;ga++){var ha=o.safari()||(o.ie()&&ba.ieCloneBug()),ia=ha?fa[ga]:fa[ga].cloneNode(true);ca.push(ia);aa.appendChild(ia);}}else if(k.isScalar(ba)){var ja=document.createTextNode(ba);ca.push(ja);aa.appendChild(ja);}else if(i.isNode(ba)){ca.push(ba);aa.appendChild(ba);}}x(aa);da.each(function(ka){ka();});return ca;}function t(v){function w(x){return r.create('div',{},x).innerHTML;}return function(x,y){var z={};if(y)for(var aa in y)z[aa]=w(y[aa]);return j(v(x,z));};}r.tx=t(n);r.tx._=r._tx=t(n._);function u(v,w,x){if(typeof w!='object'||i.isNode(w)||Array.isArray(w)||j.isHTML(w)){x=w;w=null;}return r.create(v,w,x);}r.$N=u;e.exports=r;});
__d("AsyncDOM",["css","DOM"],function(a,b,c,d,e,f){var g=b("css"),h=b("DOM"),i={invoke:function(j,k){for(var l=0;l<j.length;++l){var m=j[l],n=m[0],o=m[1],p=m[2],q=m[3],r=(p&&k)||null;if(o)r=h.scry(r||document.documentElement,o)[0];switch(n){case 'eval':(new Function(q)).apply(r);break;case 'hide':g.hide(r);break;case 'show':g.show(r);break;case 'setContent':h.setContent(r,q);break;case 'appendContent':h.appendContent(r,q);break;case 'prependContent':h.prependContent(r,q);break;case 'insertAfter':h.insertAfter(r,q);break;case 'insertBefore':h.insertBefore(q,r);break;case 'remove':h.remove(r);break;case 'replace':h.replace(r,q);break;default:}}}};e.exports=i;});
__d("AsyncResponse",["Bootloader","Env","copyProperties","tx"],function(a,b,c,d,e,f){var g=b("Bootloader"),h=b("Env"),i=b("copyProperties"),j=b("tx");function k(l,m){i(this,{error:0,errorSummary:null,errorDescription:null,onload:null,replay:false,payload:m||null,request:l||null,silentError:false,is_last:true});return this;}i(k,{defaultErrorHandler:function(l){try{if(!l.silentError){k.verboseErrorHandler(l);}else l.logErrorByGroup('silent',10);}catch(m){alert(l);}},verboseErrorHandler:function(l){try{var n=l.getErrorSummary(),o=l.getErrorDescription();l.logErrorByGroup('popup',10);if(l.silentError&&o=='')o="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";g.loadModules(["Dialog"],function(p){new p().setTitle(n).setBody(o).setButtons([p.OK]).setModal(true).setCausalElement(this.relativeTo).show();});}catch(m){alert(l);}}});i(k.prototype,{getRequest:function(){return this.request;},getPayload:function(){return this.payload;},getError:function(){return this.error;},getErrorSummary:function(){return this.errorSummary;},setErrorSummary:function(l){l=(l===undefined?null:l);this.errorSummary=l;return this;},getErrorDescription:function(){return this.errorDescription;},getErrorIsWarning:function(){return this.errorIsWarning;},logError:function(l,m){if(window.send_error_signal){var n={err_code:this.error,vip:(h.vip||'-')};if(m){n.duration=m.duration;n.xfb_ip=m.xfb_ip;}var o=this.request.getURI();n.path=o||'-';n.aid=this.request.userActionID;if(o&&o.indexOf('scribe_endpoint.php')!=-1)l='async_error_double';send_error_signal(l,JSON.stringify(n));}},logErrorByGroup:function(l,m){if(Math.floor(Math.random()*m)==0)if(this.error==1357010||this.error<15000){this.logError('async_error_oops_'+l);}else this.logError('async_error_logic_'+l);}});e.exports=k;});
__d("Cookie",["Env"],function(a,b,c,d,e,f){var g=b("Env"),h={set:function(i,j,k,l,m){if(g.no_cookies&&i!='tpa')return;document.cookie=i+"="+encodeURIComponent(j)+"; "+(k?"expires="+(new Date(Date.now()+k)).toGMTString()+"; ":"")+"path="+(l||'/')+"; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1')+(m?"; secure":"");},clear:function(i){document.cookie=i+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; "+"path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');},get:function(i){var j=document.cookie.match('(?:^|;\\s*)'+i+'=(.*?)(?:;|$)');return (j?decodeURIComponent(j[1]):j);}};e.exports=h;});
__d("JSCC",["array-extensions","Util","isEmpty"],function(a,b,c,d,e,f){b("array-extensions");var g=b("Util"),h=b("isEmpty"),i={},j={};function k(n){var o,p=false;return function(){if(!p){o=n();p=true;}return o;};}function l(n,o){if(h(n))return;for(var p in n){i[p]=k(n[p]);if(o){if(!j[o])j[o]=[];j[o].push(p);}}}var m={get:function(n){!i[n];return i[n]();},init:function(n){l(n);},initForPagelet:function(n,o){l(o,n);},clearForPagelet:function(n){if(j[n]){for(var o=0;o<j[n].length;o++){var p=j[n][o];delete i[p];}delete j[n];}}};e.exports=m;});
__d("Run",["Arbiter","OnloadEvent","Util"],function(a,b,c,d,e,f){var g=b("Arbiter"),h=b("OnloadEvent"),i=b("Util"),j=g.BEHAVIOR_STATE,k=function(y){window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp(y);};function l(){return !window.loading_page_chrome;}function m(y){if(window.loaded&&typeof _runHook!='undefined'){_runHook(y,'onlateloadhooks');}else r('onloadhooks',y);}function n(y){if(window.afterloaded&&typeof _runHook!='undefined'){setTimeout(function(){_runHook(y,'onlateafterloadhooks');},0);}else r('onafterloadhooks',y);}function o(y,z){if(z===undefined)z=l();z?r('onbeforeleavehooks',y):r('onbeforeunloadhooks',y);}function p(y){if(!window.onunload)window.onunload=function(){g.inform(h.ONUNLOAD,true,j);};r('onunloadhooks',y);}function q(y){r('onleavehooks',y);}function r(y,z){window[y]=(window[y]||[]).concat(z);}function s(y){window[y]=[];}function t(){g.inform(h.ONLOAD_DOMCONTENT,true,j);}a._domcontentready=t;function u(){var y=document,z=window;if(y.addEventListener){var aa=/AppleWebKit.(\d+)/.exec(navigator.userAgent);if(aa&&aa[1]<525){var ba=setInterval(function(){if(/loaded|complete/.test(y.readyState)){t();clearInterval(ba);}},10);}else y.addEventListener("DOMContentLoaded",t,true);}else{var ca='javascript:void(0)';if(z.location.protocol=='https:')ca='//:';y.write('<script onreadystatechange="if (this.readyState==\'complete\') {'+'this.parentNode.removeChild(this);_domcontentready();}" '+'defer="defer" src="'+ca+'"><\/script\>');}var da=z.onload;z.onload=function(){k('t_layout');da&&da();g.inform(h.ONLOAD,true,j);};z.onbeforeunload=function(){var ea={};g.inform(h.ONBEFOREUNLOAD,ea,j);if(!ea.warn)g.inform('onload/exit',true);return ea.warn;};}var v=g.registerCallback(function(){k('t_onload');g.inform(h.ONLOAD_CALLBACK,true,j);},[h.ONLOAD]),w=g.registerCallback(function(){k('t_domcontent');g.inform(h.ONLOAD_DOMCONTENT_CALLBACK,true,j);},[h.ONLOAD_DOMCONTENT]);u();var x={onLoad:m,onAfterLoad:n,onLeave:q,onBeforeUnload:o,onUnload:p,__domContentCallback:w,__onloadCallback:v,__removeHook:s};e.exports=x;});
__d("goURI",[],function(a,b,c,d,e,f){function g(h,i){h=h.toString();if(!i&&a.PageTransitions&&PageTransitions.isInitialized()){PageTransitions.go(h);}else if(window.location.href==h){window.location.reload();}else window.location.href=h;}e.exports=g;});
__d("URI",["copyProperties","goURI"],function(a,b,c,d,e,f){var g=b("copyProperties"),h=b("goURI");function i(j){if(!(this instanceof i))return new i(j||window.location.href);this.parse(j||'');}g(i,{getRequestURI:function(j,k){j=j===undefined||j;if(j&&window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getCurrentURI(!!k).getQualifiedURI();}else return new i(window.location.href);},getMostRecentURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getMostRecentURI().getQualifiedURI();}else return new i(window.location.href);},getNextURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getNextURI().getQualifiedURI();}else return new i(window.location.href);},expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,explodeQuery:function(j){if(!j)return {};var k={};j=j.replace(/%5B/ig,'[').replace(/%5D/ig,']');j=j.split('&');for(var l=0,m=j.length;l<m;l++){var n=j[l].match(i.arrayQueryExpression);if(!n){var o=j[l].split('=');k[i.decodeComponent(o[0])]=o[1]===undefined?null:i.decodeComponent(o[1]);}else{var p=n[2].split(/\]\[|\[|\]/).slice(0,-1),q=n[1],r=i.decodeComponent(n[3]||'');p[0]=q;var s=k;for(var t=0;t<p.length-1;t++)if(p[t]){if(s[p[t]]===undefined)if(p[t+1]&&!p[t+1].match(/^\d+$/)){s[p[t]]={};}else s[p[t]]=[];s=s[p[t]];}else{if(p[t+1]&&!p[t+1].match(/^\d+$/)){s.push({});}else s.push([]);s=s[s.length-1];}if(s instanceof Array&&p[p.length-1]===''){s.push(r);}else s[p[p.length-1]]=r;}}return k;},implodeQuery:function(j,k,l){k=k||'';if(l===undefined)l=true;var m=[];if(j===null||j===undefined){m.push(l?i.encodeComponent(k):k);}else if(j instanceof Array){for(var n=0;n<j.length;++n)try{if(j[n]!==undefined)m.push(i.implodeQuery(j[n],k?(k+'['+n+']'):n));}catch(o){}}else if(typeof(j)=='object'){if(('nodeName' in j)&&('nodeType' in j)){m.push('{node}');}else for(var p in j)try{if(j[p]!==undefined)m.push(i.implodeQuery(j[p],k?(k+'['+p+']'):p));}catch(o){}}else if(l){m.push(i.encodeComponent(k)+'='+i.encodeComponent(j));}else m.push(k+'='+j);return m.join('&');},encodeComponent:function(j){return encodeURIComponent(j).replace(/%5D/g,"]").replace(/%5B/g,"[");},decodeComponent:function(j){return decodeURIComponent(j.replace(/\+/g,' '));},INVALID_DOMAIN:'invalid.invalid',sanitizeDomain:function(j){var k=new RegExp('[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f'+'\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF'+'\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]');if(k.test(j)){return i.INVALID_DOMAIN;}else return j;}});g(i.prototype,{parse:function(j){var k=j.toString().match(i.expression);g(this,{protocol:k[3]||'',domain:i.sanitizeDomain(k[4]||''),port:k[6]||'',path:k[7]||'',query_s:k[9]||'',fragment:k[11]||''});return this;},setProtocol:function(j){this.protocol=j;return this;},getProtocol:function(){return this.protocol;},setQueryData:function(j){this.query_s=i.implodeQuery(j);return this;},addQueryData:function(j){return this.setQueryData(g(this.getQueryData(),j));},removeQueryData:function(j){if(!(j instanceof Array))j=[j];var k=this.getQueryData();for(var l=0,m=j.length;l<m;++l)delete k[j[l]];return this.setQueryData(k);},getQueryData:function(){return i.explodeQuery(this.query_s);},setFragment:function(j){this.fragment=j;return this;},getFragment:function(){return this.fragment;},setDomain:function(j){this.domain=i.sanitizeDomain(j);return this;},getDomain:function(){return this.domain;},setPort:function(j){this.port=j;return this;},getPort:function(){return this.port;},setPath:function(j){this.path=j;return this;},getPath:function(){return this.path.replace(/^\/+/,'/');},isEmpty:function(){return !(this.path||this.protocol||this.domain||this.port||this.query_s||this.fragment);},toString:function(){var j='';this.protocol&&(j+=this.protocol+'://');this.domain&&(j+=this.domain);this.port&&(j+=':'+this.port);if(this.domain&&!this.path)j+='/';this.path&&(j+=this.path);this.query_s&&(j+='?'+this.query_s);this.fragment&&(j+='#'+this.fragment);return j;},valueOf:function(){return this.toString();},isFacebookURI:function(){if(!i._facebookURIRegex)i._facebookURIRegex=new RegExp('(^|\\.)facebook\\.com([^.]*)$','i');return (!this.domain||i._facebookURIRegex.test(this.domain));},isQuicklingEnabled:function(){return window.Quickling&&Quickling.isActive()&&Quickling.isPageActive(this);},getRegisteredDomain:function(){if(!this.domain)return '';if(!this.isFacebookURI())return null;var j=this.domain.split('.'),k=j.indexOf('facebook');return j.slice(k).join('.');},getUnqualifiedURI:function(){return new i(this).setProtocol(null).setDomain(null).setPort(null);},getQualifiedURI:function(){var j=new i(this);if(!j.getDomain()){var k=i();j.setProtocol(k.getProtocol()).setDomain(k.getDomain()).setPort(k.getPort());}return j;},isSameOrigin:function(j){var k=j||window.location.href;if(!(k instanceof i))k=new i(k.toString());if(this.getProtocol()&&this.getProtocol()!=k.getProtocol())return false;if(this.getDomain()&&this.getDomain()!=k.getDomain())return false;return true;},go:function(j){h(this,j);},setSubdomain:function(j){var k=new i(this).getQualifiedURI(),l=k.getDomain().split('.');if(l.length<=2){l.unshift(j);}else l[0]=j;return k.setDomain(l.join('.'));},getSubdomain:function(){if(!this.getDomain())return '';var j=this.getDomain().split('.');if(j.length<=2){return '';}else return j[0];},setSecure:function(j){return this.setProtocol(j?'https':'http');},isSecure:function(){return this.getProtocol()=='https';}});e.exports=i;});
__d("invokeCallbacks",["ErrorUtils"],function(a,b,c,d,e,f){var g=b("ErrorUtils");function h(i,j){if(i)for(var k=0;k<i.length;k++)g.applyWithGuard(new Function(i[k]),j);}e.exports=h;});
__d("AsyncRequest",["array-extensions","event-extensions","json","Arbiter","AsyncDOM","AsyncResponse","Bootloader","Cookie","css-core","DOM","Env","JSCC","Parent","Run","ServerJS","URI","Util","ua","bind","copyProperties","evalGlobal","ge","goURI","invokeCallbacks","isEmpty","tx"],function(a,b,c,d,e,f){b("array-extensions");b("event-extensions");b("json");var g=b("Arbiter"),h=b("AsyncDOM"),i=b("AsyncResponse"),j=b("Bootloader"),k=b("Cookie"),l=b("css-core"),m=b("DOM"),n=b("Env"),o=b("JSCC"),p=b("Parent"),q=b("Run"),r=b("ServerJS"),s=b("URI"),t=b("Util"),u=b("ua"),v=b("bind"),w=b("copyProperties"),x=b("evalGlobal"),y=b("ge"),z=b("goURI"),aa=b("invokeCallbacks"),ba=b("isEmpty"),ca=b("tx");function da(){try{return !window.loaded;}catch(fa){return true;}}function ea(fa){var ga=v(this,function(){if(this.getOption('suppressEvaluation')){var ma=new i(this,this.transport);return {asyncResponse:ma};}var na=bagofholding;if(a.send_error_signal)na=function(va,wa,xa){if(this._xFbServer){wa='1008_'+wa;}else wa='1012_'+wa;a.send_error_signal('async_xport_resp',[wa,this._xFbServer||'-',va.getURI(),xa.length,xa.substr(0,1600)].join(':'));};var oa="for (;;);",pa=oa.length,qa=this.transport.responseText;if(qa.length<=pa){na(this,'empty',qa);return {transportError:'Response too short on async to '+this.getURI()};}var ra=0;while(qa.charAt(ra)==" "||qa.charAt(ra)=="\n")ra++;ra&&qa.substring(ra,ra+pa)==oa;var sa=qa.substring(ra+pa),ta;try{ta=(eval)('('+sa+')');}catch(ua){na(this,'excep',qa);return {transportError:'eval() failed on async to '+this.getURI()};}return ha(ta);}),ha=v(this,function(ma){if(ma.redirect)return {redirect:ma.redirect};var na=new i(this);if(ma.__ar!=1){na.payload=ma;}else w(na,ma);return {asyncResponse:na};}),ia=v(this,function(ma){if(typeof(ma.redirect)!='undefined'){(function(){this.setURI(ma.redirect).send();}).bind(this).defer();return;}if(this.handler||this.errorHandler||this.transportErrorHandler)if(typeof(ma.asyncResponse)!='undefined'){var na=ma.asyncResponse;if(!this.isRelevant()){this._invokeErrorHandler(1010);return;}if(na.inlinejs)x(na.inlinejs);if(na.lid){this._responseTime=Date.now();if(a.CavalryLogger)this.cavalry=a.CavalryLogger.getInstance(na.lid);this.lid=na.lid;}j.setResourceMap(na.resource_map);if(na.bootloadable)j.enableBootload(na.bootloadable);var oa;if(na.getError()&&!na.getErrorIsWarning()){var pa=this.errorHandler.bind(this);oa=this._dispatchErrorResponse.bind(this,na,pa);}else oa=this._dispatchResponse.bind(this,na);oa=oa.defer.bind(oa);var qa=false;if(this.preBootloadHandler)qa=this.preBootloadHandler(na);na.css=na.css||[];na.js=na.js||[];j.loadResources(na.css.concat(na.js),oa,qa,this.getURI());}else if(typeof(ma.transportError)!='undefined'){if(this._xFbServer){this._invokeErrorHandler(1008);}else this._invokeErrorHandler(1012);}else this._invokeErrorHandler(1007);}),ja=function(ma){var na=this.interpretResponse(ma);this.invokeResponseHandler(na);},ka=function(){try{if(this.transport.readyState==4){ea._inflightPurge();try{if(typeof(this.transport.getResponseHeader)!='undefined'&&this.transport.getResponseHeader('X-FB-Debug'))this._xFbServer=this.transport.getResponseHeader('X-FB-Debug');}catch(na){}if(this.transport.status>=200&&this.transport.status<300){ea.lastSuccessTime=Date.now();ia(ga());}else if(u.safari()&&(typeof(this.transport.status)=='undefined')){this._invokeErrorHandler(1002);}else if(window.Env&&window.Env.retry_ajax_on_network_error&&this.transport.status in {0:1,12029:1,12030:1,12031:1,12152:1}&&this.remainingRetries>0){--this.remainingRetries;delete this.transport;this.send(true);return;}else this._invokeErrorHandler();if(this.getOption('asynchronous')!==false)delete this.transport;}}catch(ma){if(da())return;delete this.transport;if(this.remainingRetries>0){--this.remainingRetries;this.send(true);}else{!this.getOption('suppressErrorAlerts');if(a.send_error_signal)a.send_error_signal('async_xport_resp',[1007,this._xFbServer||'-',this.getURI(),ma.message].join(':'));this._invokeErrorHandler(1007);}}},la=function(ma,na){var oa=(this.is_first===undefined);this.is_first=oa;if(this.transportIframe&&!na){if(this.cavalry)this.cavalry.collectBrowserTiming(this.transportIframe.contentWindow);(function(qa){document.body.removeChild(qa);}).bind(null,this.transportIframe).defer();}if(u.ie()>=9&&window.JSON)ma=window.JSON.parse(window.JSON.stringify(ma));var pa=this.interpretResponse(ma);pa.asyncResponse.is_first=oa;pa.asyncResponse.is_last=!na;this.invokeResponseHandler(pa);return na;};w(this,{onstatechange:ka,onjsonpresponse:la,invokeResponseHandler:ia,interpretResponse:ha,handleResponse:ja,transport:null,method:'POST',uri:'',timeout:null,timer:null,initialHandler:bagofholding,handler:null,errorHandler:null,transportErrorHandler:null,timeoutHandler:null,finallyHandler:bagofholding,serverDialogCancelHandler:null,relativeTo:null,statusElement:null,statusClass:'',data:{},file:null,context:{},readOnly:false,writeRequiredParams:['post_form_id'],remainingRetries:0,option:{asynchronous:true,suppressErrorHandlerWarning:false,suppressEvaluation:false,suppressErrorAlerts:false,retries:0,jsonp:false,bundle:false,useIframeTransport:false,tfbEndpoint:true,handleErrorAfterUnload:false},userActionID:'-'});this.errorHandler=i.defaultErrorHandler;this.transportErrorHandler=v(this,'errorHandler');if(fa!==undefined)this.setURI(fa);return this;}g.subscribe("page_transition",function(fa,ga){ea._id_threshold=ga.id;});w(ea,{receiveJSONPResponse:function(fa,ga,ha){if(this._JSONPReceivers[fa]){if(!this._JSONPReceivers[fa](ga,ha))delete this._JSONPReceivers[fa];}else if(a.logJSError&&!ha){var ia=(ga.payload&&ga.payload.uri)||'';a.logJSError('ajax',{error:'UnexpectedJsonResponse',extra:{id:fa,uri:ia}});}},_bundleRequest:function(fa){if(fa.getOption('jsonp')||fa.getOption('useIframeTransport')){fa.setOption('bundle',false);return false;}else if(!fa.uri.isFacebookURI()){fa.setOption('bundle',false);return false;}else if(!fa.getOption('asynchronous')){fa.setOption('bundle',false);return false;}var ga=fa.uri.getPath();if(!ea._bundleTimer)ea._bundleTimer=setTimeout(function(){ea._sendBundledRequests();},0);ea._allBundledRequests.push([ga,fa]);return true;},_sendBundledRequests:function(){clearTimeout(ea._bundleTimer);ea._bundleTimer=null;var fa,ga=ea._allBundledRequests;ea._allBundledRequests=[];if(ga.length==1){fa=ga[0][1];fa.setOption('bundle',false).send();return fa;}if(ga.length===0)return null;var ha=[];for(var ia=0;ia<ga.length;ia++)ha.push([ga[ia][0],s.implodeQuery(ga[ia][1].data)]);var ja={data:ha};fa=new ea();fa.setURI('/ajax/proxy.php').setData(ja).setMethod('POST').setInitialHandler(bagof(true)).setAllowCrossPageTransition(true).setHandler(function(ka){var la=ka.getPayload(),ma=la.responses;if(ma.length!=ga.length){return;}else for(var na=0;na<ga.length;na++){var oa=ga[na][0],pa=ga[na][1];pa.id=this.id;if(ma[na][0]!=oa){pa.invokeResponseHandler({transportError:'Wrong response order in bundled request to '+oa});continue;}var qa=pa.interpretResponse(ma[na][1]);pa.invokeResponseHandler(qa);}}).setTransportErrorHandler(function(ka){var la=[],ma={transportError:ka.errorDescription};for(var na=0;na<ga.length;na++){var oa=ga[na][0],pa=ga[na][1];la.push(oa);pa.id=this.id;pa.invokeResponseHandler(ma);}}).send();return fa;},bootstrap:function(fa,ga,ha){var ia='GET',ja=true,ka={};if(ha||ga&&(ga.rel=='async-post'||ga.getAttribute&&ga.getAttribute('forcemethod')=='post')){ia='POST';ja=false;if(fa){fa=s(fa);ka=fa.getQueryData();fa.setQueryData({});}}var la=p.byClass(ga,'stat_elem')||ga;if(la&&l.hasClass(la,'async_saving'))return false;var ma=new ea(fa).setReadOnly(ja).setMethod(ia).setData(ka).setNectarModuleDataSafe(ga).setRelativeTo(ga).setHandler(function(oa){Event.fire(ga,'success',{response:oa});}).setErrorHandler(function(oa){if(Event.fire(ga,'error',{response:oa})!==false)i.defaultErrorHandler(oa);});if(la){ma.setStatusElement(la);var na=la.getAttribute('data-status-class');na&&ma.setStatusClass(na);}ma.send();return false;},post:function(fa,ga){new ea(fa).setReadOnly(false).setMethod('POST').setData(ga).send();return false;},getLastId:function(){return ea._last_id;},_JSONPReceivers:{},_allBundledRequests:[],_bundleTimer:null,suppressOnloadToken:{},_last_id:2,_id_threshold:2,_inflight:[],_inflightAdd:bagofholding,_inflightPurge:bagofholding,_inflightEnable:function(){if(u.ie()){w(ea,{_inflightAdd:function(fa){this._inflight.push(fa);},_inflightPurge:function(){ea._inflight=ea._inflight.filter(function(fa){return fa.transport&&fa.transport.readyState<4;});}});q.onUnload(function(){ea._inflight.each(function(fa){if(fa.transport&&fa.transport.readyState<4){fa.transport.abort();delete fa.transport;}});});}}});w(ea.prototype,{_dispatchResponse:function(fa){try{this.clearStatusIndicator();if(!this.isRelevant()){this._invokeErrorHandler(1010);return;}if(this.initialHandler(fa)===false)return;clearTimeout(this.timer);if(fa.jscc_map){var ha=(eval)(fa.jscc_map);o.init(ha);}var ia;if(this.handler)try{ia=this._shouldSuppressJS(this.handler(fa));}catch(ja){fa.is_last&&this.finallyHandler(fa);throw ja;}if(!ia)this._handleJSResponse(fa);fa.is_last&&this.finallyHandler(fa);}catch(ga){}},_shouldSuppressJS:function(fa){return fa===ea.suppressOnloadToken;},_handleJSResponse:function(fa){var ga=this.getRelativeTo(),ha=fa.domops;if(ha)h.invoke(ha,ga);if(fa.jsmods)new r().setRelativeTo(ga).handle(fa.jsmods);fa.jscalls&&aa([fa.jscalls]);this._handleJSRegisters(fa,'onload');if(this.lid)g.inform('tti_ajax',{s:this.lid,d:[this._sendTimeStamp||0,(this._sendTimeStamp&&this._responseTime)?(this._responseTime-this._sendTimeStamp):0]},g.BEHAVIOR_EVENT);this._handleJSRegisters(fa,'onafterload');},_handleJSRegisters:function(fa,ga){var ha=fa[ga];if(!ha)return;for(var ia=0;ia<ha.length;ia++)try{(new Function(ha[ia])).apply(this);}catch(ja){}},_invokeErrorHandler:function(fa){if(da()&&!this.getOption('handleErrorAfterUnload'))return;var ga;if(this.responseText===''){ga=1002;}else if(this._requestAborted){ga=1011;}else{try{ga=fa||this.transport.status||1004;}catch(ha){ga=1005;}if(false===navigator.onLine)ga=1006;}if(!this.transportErrorHandler)return;var ia=this.transportErrorHandler.bind(this),ja,ka,la=true;if(ga===1006){ka="No Network Connection";ja="Your browser appears to be offline. Please check your internet connection and try again.";}else if(ga>=300&&ga<=399){ka="Redirection";ja="Your access to Facebook was redirected or blocked by a third party at this time, please contact your ISP or reload. ";var ma=this.transport.getResponseHeader("Location");if(ma)z(ma,true);la=true;}else{ka="Oops!";ja="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";}!this.getOption('suppressErrorAlerts');var na=new i(this);w(na,{error:ga,errorSummary:ka,errorDescription:ja,silentError:la});this._dispatchErrorResponse(na,ia);},_dispatchErrorResponse:function(fa,ga){var ha=fa.getError();try{this.clearStatusIndicator();var ja=this._sendTimeStamp&&{duration:Date.now()-this._sendTimeStamp,xfb_ip:this._xFbServer||'-'};fa.logError('async_error',ja);if(!this.isRelevant()||ha===1010)return;if(ha==1357008||ha==1357007||ha==1442002||ha==1357001){var ka=fa.getPayload(),la=ha==1357008||ha==1357007;this._displayServerDialog(ka.__dialog,la);}else if(this.initialHandler(fa)!==false){clearTimeout(this.timer);try{ga(fa);}catch(ma){this.finallyHandler(fa);throw ma;}this.finallyHandler(fa);}}catch(ia){}},_displayServerDialog:function(fa,ga){j.loadModules(["Dialog"],function(ha){var ia=new ha(fa);if(ga)ia.setHandler(this._displayConfirmationHandler.bind(this,ia));ia.setCancelHandler(function(){var ja=this.getServerDialogCancelHandler();if(ja)ja.apply(this,arguments);this.finallyHandler.apply(this,arguments);}.bind(this)).setCausalElement(this.relativeTo).setCloseHandler(this.finallyHandler.bind(this)).show();}.bind(this));},_displayConfirmationHandler:function(fa){this.data.confirmed=1;w(this.data,fa.getFormData());this.send();},setMethod:function(fa){this.method=fa.toString().toUpperCase();return this;},getMethod:function(){return this.method;},setData:function(fa){this.data=fa;return this;},_setDataHash:function(){if(this.method!='POST'||!this.getOption('tfbEndpoint')||this.data.phstamp)return;var fa=s.implodeQuery(this.data).length,ga='';for(var ha=0;ha<this.data.fb_dtsg.length;ha++)ga+=this.data.fb_dtsg.charCodeAt(ha);this.data.phstamp='1'+ga+fa;},setFile:function(fa){this.file=fa;return this;},getData:function(){return this.data;},setContextData:function(fa,ga,ha){ha=ha===undefined?true:ha;if(ha)this.context['_log_'+fa]=ga;return this;},_setUserActionID:function(){var fa=a.ArbiterMonitor&&a.ArbiterMonitor.getUE()||'-';this.userActionID=(a.EagleEye&&a.EagleEye.getSessionID()||'-')+'/'+fa;},setURI:function(fa){var ga=s(fa);if(this.getOption('useIframeTransport')&&!ga.isFacebookURI())return this;if(!this.getOption('jsonp')&&!this.getOption('useIframeTransport')&&!ga.isSameOrigin())return this;this._setUserActionID();if(!fa||ga.isEmpty()){if(a.send_error_signal&&a.get_error_stack){var ha={err_code:1013,vip:'-',duration:0,xfb_ip:'-',path:window.location.href,aid:this.userActionID};a.send_error_signal('async_error',JSON.stringify(ha));a.send_error_signal('async_xport_stack',[1013,window.location.href,null,a.get_error_stack()].join(':'));}return this;}this.uri=ga;return this;},getURI:function(){return this.uri.toString();},setInitialHandler:function(fa){this.initialHandler=fa;return this;},setHandler:function(fa){if(!(typeof(fa)!='function'))this.handler=fa;return this;},getHandler:function(){return this.handler;},setErrorHandler:function(fa){if(!(typeof(fa)!='function'))this.errorHandler=fa;return this;},setTransportErrorHandler:function(fa){this.transportErrorHandler=fa;return this;},getErrorHandler:function(){return this.errorHandler;},getTransportErrorHandler:function(){return this.transportErrorHandler;},setTimeoutHandler:function(fa,ga){if(!(typeof(ga)!='function')){this.timeout=fa;this.timeoutHandler=ga;}return this;},resetTimeout:function(fa){if(!(this.timeoutHandler===null))if(fa===null){this.timeout=null;clearTimeout(this.timer);this.timer=null;}else{var ga=!this._allowCrossPageTransition;this.timeout=fa;clearTimeout(this.timer);this.timer=this._handleTimeout.bind(this).defer(this.timeout,ga);}return this;},_handleTimeout:function(){this.abandon();this.timeoutHandler(this);},setNewSerial:function(){this.id=++ea._last_id;return this;},setFinallyHandler:function(fa){this.finallyHandler=fa;return this;},getServerDialogCancelHandler:function(){return this.serverDialogCancelHandler;},setServerDialogCancelHandler:function(fa){this.serverDialogCancelHandler=fa;return this;},setPreBootloadHandler:function(fa){this.preBootloadHandler=fa;return this;},setReadOnly:function(fa){if(!(typeof(fa)!='boolean'))this.readOnly=fa;return this;},setFBMLForm:function(){this.writeRequiredParams=["fb_sig"];return this;},getReadOnly:function(){return this.readOnly;},setRelativeTo:function(fa){this.relativeTo=fa;return this;},getRelativeTo:function(){return this.relativeTo;},setStatusClass:function(fa){this.statusClass=fa;return this;},setStatusElement:function(fa){this.statusElement=fa;return this;},getStatusElement:function(){return y(this.statusElement);},isRelevant:function(){if(this._allowCrossPageTransition)return true;if(!this.id)return true;return this.id>ea._id_threshold;},clearStatusIndicator:function(){var fa=this.getStatusElement();if(fa){l.removeClass(fa,'async_saving');l.removeClass(fa,this.statusClass);}},addStatusIndicator:function(){var fa=this.getStatusElement();if(fa){l.addClass(fa,'async_saving');l.addClass(fa,this.statusClass);}},specifiesWriteRequiredParams:function(){return this.writeRequiredParams.every(function(fa){this.data[fa]=this.data[fa]||n[fa]||(y(fa)||{}).value;if(this.data[fa]!==undefined)return true;return false;},this);},setOption:function(fa,ga){if(typeof(this.option[fa])!='undefined')this.option[fa]=ga;return this;},getOption:function(fa){typeof(this.option[fa])=='undefined';return this.option[fa];},abort:function(){if(this.transport){var fa=this.getTransportErrorHandler();this.setOption('suppressErrorAlerts',true);this.setTransportErrorHandler(bagofholding);this._requestAborted=true;this.transport.abort();this.setTransportErrorHandler(fa);}},abandon:function(){clearTimeout(this.timer);this.setOption('suppressErrorAlerts',true).setHandler(bagofholding).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding);if(this.transport){this._requestAborted=true;this.transport.abort();}},setNectarData:function(fa){if(fa){if(this.data.nctr===undefined)this.data.nctr={};w(this.data.nctr,fa);}return this;},setNectarModuleDataSafe:function(fa){if(this.setNectarModuleData)this.setNectarModuleData(fa);return this;},setNectarImpressionIdSafe:function(){if(this.setNectarImpressionId)this.setNectarImpressionId();return this;},setAllowCrossPageTransition:function(fa){this._allowCrossPageTransition=!!fa;if(this.timer)this.resetTimeout(this.timeout);return this;},send:function(fa){fa=fa||false;if(!this.uri)return false;!this.errorHandler&&!this.getOption('suppressErrorHandlerWarning');if(this.getOption('jsonp')&&this.method!='GET')this.setMethod('GET');if(this.getOption('useIframeTransport')&&this.method!='GET')this.setMethod('GET');this.timeoutHandler!==null&&(this.getOption('jsonp')||this.getOption('useIframeTransport'));if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!='POST')return false;}if(this.method=='POST'&&this.getOption('tfbEndpoint')){this.data.fb_dtsg=n.fb_dtsg;this.data.lsd=k.get('lsd');}if(!ba(this.context)&&this.getOption('tfbEndpoint')){w(this.data,this.context);this.data.ajax_log=1;}if(window.Env&&n.force_param)w(this.data,n.force_param);if(!this.getReadOnly()&&this.getOption('tfbEndpoint')&&this.method=='POST'&&this.data.post_form_id_source===undefined)this.data.post_form_id_source='AsyncRequest';if(window.Env)this.data.__user=n.user;this._setUserActionID();if(this.getOption('bundle')&&ea._bundleRequest(this))return true;this.setNewSerial();if(this.getOption('tfbEndpoint')){this.uri.addQueryData({__a:1});if(!this.getOption('asynchronous'))this.uri.addQueryData({__s:1});if(n.fb_isb)this.uri.addQueryData({fb_isb:n.fb_isb});}this.finallyHandler=async_callback(this.finallyHandler,'final');var ga,ha;if(this.method=='GET'||this.file){ga=this.uri.addQueryData(this.data).toString();ha='';}else{ga=this.uri.toString();this._setDataHash();ha=s.implodeQuery(this.data);}if(this.getOption('jsonp')||this.getOption('useIframeTransport')){ga=this.uri.addQueryData({__a:this.id}).toString();ea._JSONPReceivers[this.id]=async_callback(v(this,'onjsonpresponse'),'json');if(this.getOption('jsonp')){(function(){document.body.appendChild(m.create('script',{src:ga,type:"text/javascript"}));}).bind(this).defer();}else{var ia={position:'absolute',top:'-9999999px',width:'80px',height:'80px'};this.transportIframe=m.create('iframe',{src:"javascript:''",style:ia});document.body.appendChild(this.transportIframe);this.transportIframe.src=ga;}return true;}if(this.transport)return false;var ja=null;try{ja=new XMLHttpRequest();}catch(ka){}if(!ja)try{ja=new ActiveXObject("Msxml2.XMLHTTP");}catch(ka){}if(!ja)try{ja=new ActiveXObject("Microsoft.XMLHTTP");}catch(ka){}if(!ja)return false;ja.onreadystatechange=async_callback(v(this,'onstatechange'),'xhr');if(!fa)this.remainingRetries=this.getOption('retries');if(window.send_error_signal||window.ArbiterMonitor)this._sendTimeStamp=this._sendTimeStamp||Date.now();this.transport=ja;try{this.transport.open(this.method,ga,this.getOption('asynchronous'));}catch(la){return false;}var ma=n.svn_rev;if(ma)this.transport.setRequestHeader('X-SVN-Rev',String(ma));if(this.method=='POST')this.transport.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this.addStatusIndicator();ha=this.file||ha;this.transport.send(ha);if(this.timeout!==null)this.resetTimeout(this.timeout);ea._inflightAdd(this);return true;}});e.exports=ea;});
__d("legacy:async",["AsyncRequest","AsyncResponse"],function(a,b,c,d){a.AsyncRequest=b('AsyncRequest');a.AsyncResponse=b('AsyncResponse');},3);
__d("AsyncRequestNectarLogging",["string-extensions","AsyncRequest","Env","copyProperties"],function(a,b,c,d,e,f){b("string-extensions");var g=b("AsyncRequest"),h=b("Env"),i=b("copyProperties");i(g.prototype,{setNectarModuleData:function(j){if(this.method=='POST'){var k=h.module;if(j&&k===undefined){var l={fbpage_fan_confirm:1},m=null;for(var n=j;n&&n!=document.body;n=n.parentNode){if(!n.id||typeof n.id!=='string')continue;if(n.id.startsWith('pagelet_')){k=n.id;break;}if(!m&&l[n.id])m=n.id;}if(k===undefined&&m)k=m;}if(k!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._mod=k;}}},setNectarImpressionId:function(){if(this.method=='POST'){var j=h.impid;if(j!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._impid=j;}}}});});
__d("legacy:async-postlude",["AsyncRequestNectarLogging"],function(a,b,c,d){b('AsyncRequestNectarLogging');},3);
__d("deferUntil",[],function(a,b,c,d,e,f){function g(h,i,j,k,l){var m=i();if(m){h(m);return null;}var n=Date.now(),o=setInterval(function(){m=i();if(!m){if(!j||(j<new Date()-n))return;l&&l();}clearInterval(o);h(m);},20,k);return o;}e.exports=g;});
__d("legacy:function-utils",["FunctionUtils","deferUntil"],function(a,b,c,d){var e=b('FunctionUtils');a.debounce=e.debounce;a.throttle=e.throttle;a.defer_until=b('deferUntil');},3);
__d("resolveWindow",[],function(a,b,c,d,e,f){function g(h){var i=window,j=h.split('.');try{for(var l=0;l<j.length;l++){var m=j[l],n=/^frames\[['"]?([a-zA-Z0-9\-_]+)['"]?\]$/.exec(m);if(n){i=i.frames[n[1]];}else if(m==='opener'||m==='parent'||m==='top'){i=i[m];}else return null;}}catch(k){return null;}return i;}e.exports=g;});
__d("XD",["function-extensions","copyProperties","ua","URI","Arbiter","resolveWindow"],function(a,b,c,d,e,f){b("function-extensions");var g=b("copyProperties"),h=b("ua"),i=b("URI"),j=b("Arbiter"),k=b("resolveWindow"),l='fb_xdm_frame_'+location.protocol.replace(':',''),m={_callbacks:[],_opts:{autoResize:false,allowShrink:true,channelUrl:null,hideOverflow:false,newResizeMethod:false,resizeTimeout:100,resizeWidth:false,expectResizeAck:false,resizeAckTimeout:6000},_lastResizeAckId:0,_resizeCount:0,_resizeTimestamp:0,init:function(o){this._opts=g(g({},this._opts),o);if(this._opts.autoResize)this._startResizeMonitor();j.subscribe('Connect.Unsafe.resize.ack',function(p,q){if(!q.id)q.id=this._resizeCount;if(q.id>this._lastResizeAckId)this._lastResizeAckId=q.id;}.bind(this));},send:function(o,p){p=p||this._opts.channelUrl;if(!p)return;if(!(/xd_arbiter\.php/.test(p))){if(p.substr(0,4)!='http')return;var q=p+'&'+i.implodeQuery(o),r='f'+(Math.random()*(1<<30)).toString(16).replace('.',''),s=document.body.appendChild(document.createElement('div')),t=false;s.style.position='absolute';s.style.top='-10000px';s.style.width='1px';s.style.height='1px';m._callbacks[r]=function(){if(t){(function(){s.parentNode.removeChild(s);}).defer(3000);delete m._callbacks[r];}};if(h.ie()){var u,v=document.createElement('div');u='<iframe onload="XD._callbacks.'+r+'()"></iframe>';v.innerHTML=u;v.firstChild.setAttribute('src',q);u=v.innerHTML;s.innerHTML='<iframe src="javascript:false"></iframe>';t=true;(function(){s.innerHTML=u;}).defer();}else{var w=document.createElement('iframe');w.onload=m._callbacks[r];s.appendChild(w);t=true;w.src=q;}return;}var x={},y=new i(p);g(x,o);g(x,i.explodeQuery(y.getFragment()));var z=new i(x.origin),aa=[z.getDomain()],ba=k(x.relation.replace(/^parent\./,''));ba.frames[l].proxyMessage(i.implodeQuery(x),aa);},_computeSize:function(){return {width:this._opts.resizeWidth?this._calcWidth(m.forced_min_width):0,height:this._calcHeight(this._opts.newResizeMethod)};},_calcHeight:function(o){var p=document.body,q=document.documentElement,r=0;if(o){r=Math.max(Math.max(p.offsetHeight,p.scrollHeight)+p.offsetTop,Math.max(q.offsetHeight,q.scrollHeight)+q.offsetTop);}else{if(h.ie()){r=Math.max(p.offsetHeight,p.scrollHeight)+p.offsetTop;}else r=q.offsetHeight+q.offsetTop;if(window.Dialog)r=Math.max(r,Dialog.max_bottom);}return r;},_calcWidth:function(o){var p=document.body,q=document.documentElement,r=0;if(p.offsetWidth<p.scrollWidth){r=p.scrollWidth+p.offsetLeft;}else{var s=p.childNodes;for(var t=0;t<s.length;t++){var u=s[t],v=u.offsetWidth+u.offsetLeft;if(v>r)r=v;}}if(o)r=Math.max(r,o);if(q.clientLeft>0)r+=(q.clientLeft*2);if(q.clientTop>0)height+=(q.clientTop*2);return r;},_startResizeMonitor:function(){var o,p=document.documentElement;if(this._opts.hideOverflow){p.style.overflow='hidden';document.body.style.overflow='hidden';}setInterval((function(){var q=this._computeSize(),r=Date.now(),s=this._lastResizeAckId<this._resizeCount&&(r-this._resizeTimestamp)>this._opts.resizeAckTimeout;if(!o||(this._opts.expectResizeAck&&s)||(this._opts.allowShrink&&o.width!=q.width)||(!this._opts.allowShrink&&o.width<q.width)||(this._opts.allowShrink&&o.height!=q.height)||(!this._opts.allowShrink&&o.height<q.height)){o=q;this._resizeCount++;this._resizeTimestamp=r;var t={type:'resize',height:q.height,ackData:{id:this._resizeCount}};if(q.width&&q.width!=0)t.width=q.width;try{if(i(document.referrer).isFacebookURI()&&window.parent!=window&&window.name&&window.parent.location&&window.parent.location.toString&&i(window.parent.location).isFacebookURI()){var v=window.parent.document.getElementsByTagName('iframe');for(var w=0;w<v.length;w=w+1)if(v[w].name==window.name){if(this._opts.resizeWidth)v[w].style.width=t.width+'px';v[w].style.height=t.height+'px';}}this.send(t);}catch(u){this.send(t);}}}).bind(this),this._opts.resizeTimeout);}},n=g({},m);e.exports.UnverifiedXD=n;e.exports.XD=m;a.UnverifiedXD=n;a.XD=m;});
__d("legacy:connect-xd",["XD"],function(a,b,c,d){a.UnverifiedXD=b('XD').UnverifiedXD;a.XD=b('XD').XD;},3);
__d("legacy:uri",["URI"],function(a,b,c,d){a.URI=b('URI');},3);
WindowComm={_callbacks:{},makeHandler:function(a,b){b=b||'opener';var c='f'+(Math.random()*(1<<30)).toString(16).replace('.','');WindowComm._callbacks[c]=a;return new URI('/connect/window_comm.php').setQueryData({_id:c,_relation:b}).getQualifiedURI().toString();},_recv:function(a){var b=new URI(a).getQueryData();WindowComm._callbacks[b._id](b);}};
__d("DOMDimensions",["DOMQuery"],function(a,b,c,d,e,f){var g=b("DOMQuery"),h={getElementDimensions:function(i){return {width:i.offsetWidth||0,height:i.offsetHeight||0};},getViewportDimensions:function(){var i=(window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0,j=(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return {width:i,height:j};},getDocumentDimensions:function(i){i=i||document;var j=g.getDocumentScrollElement(i),k=j.scrollWidth||0,l=j.scrollHeight||0;return {width:k,height:l};}};e.exports=h;});
__d("PopupWindow",["copyProperties","ua","DOMQuery","DOMDimensions"],function(a,b,c,d,e,f){var g=b("copyProperties"),h=b("ua"),i=b("DOMQuery"),j=b("DOMDimensions"),k={_opts:{allowShrink:true,strategy:'vector',timeout:100,widthElement:null},init:function(l){g(k._opts,l);setInterval(k._resizeCheck,k._opts.timeout);},_resizeCheck:function(){var l=j.getViewportDimensions(),m=k._getDocumentSize(),n=m.height-l.height,o=m.width-l.width;if(o<0&&!k._opts.widthElement)o=0;if(!k._opts.allowShrink&&n<0)n=0;if(n||o)try{if(window.console&&window.console.firebug)console.log('Resizing will not work in firefox with firebug enabled. '+'See https://bugzilla.mozilla.org/show_bug.cgi?id=691693');window.resizeBy(o,n);if(o)window.moveBy(o/-2,0);}catch(p){}},_getDocumentSize:function(){var l=j.getDocumentDimensions();if(k._opts.strategy==='offsetHeight')l.height=document.body.offsetHeight;if(k._opts.widthElement){var m=i.scry(document.body,k._opts.widthElement)[0];if(m)l.width=j.getElementDimensions(m).width;}if(window.Dialog&&Dialog.max_bottom&&Dialog.max_bottom>l.height)l.height=Dialog.max_bottom;return l;},open:function(l,m,n){var o=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,p=typeof window.screenY!='undefined'?window.screenY:window.screenTop,q=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth,r=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22),s=parseInt(o+((q-n)/2),10),t=parseInt(p+((r-m)/2.5),10),u=('width='+n+',height='+m+',left='+s+',top='+t);return window.open(l,'_blank',u);}};e.exports=k;});
__d("legacy:popup-resizer",["PopupWindow"],function(a,b,c,d){a.PopupResizer=b('PopupWindow');},3);
ConnectLogin={init:function(a){this.appID=a.appID;this.addToProfile=a.addToProfile;this.oneClick=a.oneClick;this.channelUrl=a.channelUrl;XD.init(a);},login:function(a,b,c){if(this.oneClick&&!b){this._oneClick(a);}else this._openPopup(a,b,c);},logout:function(){XD.send({type:'logout'});},_oneClick:function(a){new AsyncRequest().setURI('/ajax/api/tos.php').setData({app_id:this.appID,grant_perm:1}).setHandler(function(b){ConnectLogin._refreshLoginStatus();a&&a();}).send();},_openPopup:function(a,b,c){c=c||{};var d=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();if(ConnectLogin.appID)ConnectLogin._refreshLoginStatus();a&&a();}),e=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();}),f=new URI('/login.php');f.setQueryData({api_key:this.appID,next:d,channel_url:e,cancel_url:e,req_perms:b,v:'1.0',fbconnect:1,add_to_profile:this.addToProfile,display:'popup'});f.addQueryData(c);var g=this._getSize(c);this._popup=PopupResizer.open(f.toString(),g.height,g.width);},_closePopup:function(){if(this._popup){this._popup.close();this._popup=null;}},_refreshLoginStatus:function(){if(this.channelUrl){XD.send({type:'refreshLoginStatus'});}else window.location.reload();},_getSize:function(a){if(a.social_plugin=='registration'){return {width:640,height:370};}else return {width:610,height:280};}};
__d("legacy:intl-core",["tx","Intl"],function(a,b,c,d){var e=b('tx'),f=b('Intl');a.tx=e;a._tx=e._;a.intl_ends_in_punct=f.endsInPunct;a.intl_phonological_rules=f.phonologicalRules;},3);
__d("DOMPosition",["DOMQuery"],function(a,b,c,d,e,f){var g=b("DOMQuery"),h={getScrollPosition:function(){var i=g.getDocumentScrollElement();return {x:i.scrollLeft,y:i.scrollTop};},getElementPosition:function(i){if(!i)return;if(!('getBoundingClientRect' in i))return {x:0,y:0};var j=i.getBoundingClientRect(),k=document.documentElement,l=Math.round(j.left)-k.clientLeft,m=Math.round(j.top)-k.clientTop;return {x:l,y:m};}};e.exports=h;});
__d("Vector",["event-extensions","DOMDimensions","DOMPosition","Util","copyProperties"],function(a,b,c,d,e,f){b("event-extensions");var g=b("DOMDimensions"),h=b("DOMPosition"),i=b("Util"),j=b("copyProperties");function k(l,m,n){j(this,{x:parseFloat(l),y:parseFloat(m),domain:n||'pure'});}j(k.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(l,m){if(arguments.length==1){if(l.domain!='pure')l=l.convertTo(this.domain);return this.add(l.x,l.y);}var n=parseFloat(l),o=parseFloat(m);return new k(this.x+n,this.y+o,this.domain);},mul:function(l,m){if(typeof m=="undefined")m=l;return new k(this.x*l,this.y*m,this.domain);},sub:function(l,m){if(arguments.length==1){return this.add(l.mul(-1));}else return this.add(-l,-m);},distanceTo:function(l){return this.sub(l).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(l){if(l!='pure'&&l!='viewport'&&l!='document')return new k(0,0);if(l==this.domain)return new k(this.x,this.y,this.domain);if(l=='pure')return new k(this.x,this.y);if(this.domain=='pure')return new k(0,0);var m=k.getScrollPosition('document'),n=this.x,o=this.y;if(this.domain=='document'){n-=m.x;o-=m.y;}else{n+=m.x;o+=m.y;}return new k(n,o,l);},setElementPosition:function(l){var m=this.convertTo('document');l.style.left=parseInt(m.x)+'px';l.style.top=parseInt(m.y)+'px';return this;},setElementDimensions:function(l){return this.setElementWidth(l).setElementHeight(l);},setElementWidth:function(l){l.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(l){l.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(l){if(l==document.body){window.scrollBy(this.x,this.y);}else{l.scrollLeft+=this.x;l.scrollTop+=this.y;}return this;}});j(k,{getEventPosition:function(l,m){m=m||'document';var n=Event.getPosition(l),o=new k(n.x,n.y,'document');return o.convertTo(m);},getScrollPosition:function(l){l=l||'document';var m=h.getScrollPosition();return new k(m.x,m.y,'document').convertTo(l);},getElementPosition:function(l,m){m=m||'document';var n=h.getElementPosition(l);return new k(n.x,n.y,'viewport').convertTo(m);},getElementDimensions:function(l){var m=g.getElementDimensions(l);return new k(m.width,m.height);},getViewportDimensions:function(){var l=g.getViewportDimensions();return new k(l.width,l.height,'viewport');},getDocumentDimensions:function(l){var m=g.getDocumentDimensions(l);return new k(m.width,m.height,'document');},deserialize:function(l){var m=l.split(',');return new k(m[0],m[1]);}});e.exports=k;});
__d("legacy:vector",["Vector"],function(a,b,c,d){a.Vector2=b('Vector');},3);
__d("legacy:dom",["DOM"],function(a,b,c,d){var e=b('DOM');a.DOM=e;a.$N=e.$N;},3);
__d("legacy:dom-core",["$","ge"],function(a,b,c,d){a.$=b('$');a.ge=b('ge');},3);
__d("legacy:dom-html",["HTML"],function(a,b,c,d){a.HTML=b('HTML');},3);
__d("legacy:object-core-utils",["isEmpty","copyProperties"],function(a,b,c,d){a.is_empty=b('isEmpty');a.copy_properties=b('copyProperties');function e(f,g){return copy_properties(window[f]||(window[f]={}),g);}a.add_properties=e;},3);
__d("legacy:onload",["Run","Util","OnloadEvent"],function(a,b,c,d){var e=b('Run'),f=b('Util');a.OnloadEvent=b('OnloadEvent');a.onloadRegister_DEPRECATED=e.onLoad;a.onloadRegister=function(){return e.onLoad.apply(this,arguments);};a.onafterloadRegister_DEPRECATED=e.onAfterLoad;a.onafterloadRegister=function(){return e.onAfterLoad.apply(this,arguments);};a.onleaveRegister=e.onLeave;a.onbeforeunloadRegister=e.onBeforeUnload;a.onunloadRegister=e.onUnload;},3);
InitialJSLoader=window.InitialJSLoader||{INITIAL_JS_READY:'BOOTLOAD/JSREADY',load:function(a){InitialJSLoader.callback=Bootloader.loadResources(a,InitialJSLoader.callback);},callback:Arbiter.registerCallback(function(){Arbiter.inform(InitialJSLoader.INITIAL_JS_READY,true,Arbiter.BEHAVIOR_STATE);},[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK])};
__d("legacy:util",["Util"],function(a,b,c,d){a.Util=b('Util');},3);
__d("legacy:errorutils",["ErrorUtils"],function(a,b,c,d){a.ErrorUtils=b('ErrorUtils');},3);
function _onloadHook(){!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_prehooks');_runHooks('onloadhooks');!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_hooks');window.loaded=true;Arbiter.inform('uipage_onload',true,Arbiter.BEHAVIOR_STATE);}function _onafterloadHook(){_runHooks('onafterloadhooks');window.afterloaded=true;}function _runHook(a,b){return ErrorUtils.applyWithGuard(a,null,null,function(c){c.event_type=b;c.category='runhook';});}function _runHooks(a){var b=a=='onbeforeleavehooks'||a=='onbeforeunloadhooks',c=null;do{var d=window[a];if(!b)window[a]=null;if(!d)break;for(var e=0;e<d.length;e++)if(b){c=c||_runHook(d[e],a);}else _runHook(d[e],a);if(b)break;}while(window[a]);if(b&&c)return c;}function keep_window_set_as_loaded(){if(window.loaded==false){window.loaded=true;_runHooks('onloadhooks');}if(window.afterloaded==false){window.afterloaded=true;_runHooks('onafterloadhooks');}}Arbiter.registerCallback(_onloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.registerCallback(_onafterloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,OnloadEvent.ONLOAD_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.subscribe(OnloadEvent.ONBEFOREUNLOAD,function(a,b){b.warn=_runHooks('onbeforeleavehooks')||_runHooks('onbeforeunloadhooks');if(!b.warn){window.loaded=false;window.afterloaded=false;}},Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe(OnloadEvent.ONUNLOAD,function(a,b){_runHooks('onunloadhooks');},Arbiter.SUBSCRIBE_NEW);
var PlatformOptInPopup=function(){};copy_properties(PlatformOptInPopup,{DIALOG_URL:'/connect/uiserver.php',DIALOG_WIDTH:420,DIALOG_HEIGHT:450,APP_ID:127760087237610,open:function(a,b,c){if(!a)a='generic';if(!b)b='opt.in';var d=new URI(PlatformOptInPopup.DIALOG_URL);d.addQueryData({social_plugin:a,method:b,display:'popup',secure:URI.getRequestURI().isSecure(),app_id:PlatformOptInPopup.APP_ID});if(c)d.addQueryData(c);return PopupResizer.open(d.toString(),PlatformOptInPopup.DIALOG_WIDTH,PlatformOptInPopup.DIALOG_HEIGHT);}});
__d("Animation",["string-extensions","css","DOM","ua"],function(a,b,c,d,e,f){b("string-extensions");var g=b("css"),h=b("DOM"),i=b("ua");function j(k){if(a==this){return new j(k);}else{this.obj=k;this._reset_state();this.queue=[];this.last_attr=null;}}j.resolution=20;j.offset=0;j.prototype._reset_state=function(){this.state={attrs:{},duration:500};};j.prototype.stop=function(){this._reset_state();this.queue=[];return this;};j.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var k=document.createElement('div');k.style.padding='0px';k.style.margin='0px';k.style.border='0px';k.__animation_refs=1;var l=this.obj.childNodes;while(l.length)k.appendChild(l[0]);this.obj.appendChild(k);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=k;this._refresh_container();};j.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};j.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var k=this.container_div.childNodes;while(k.length)this.obj.appendChild(k[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};j.ATTR_TO=1;j.ATTR_BY=2;j.ATTR_FROM=3;j.prototype._attr=function(k,l,m){k=k.replace(/-[a-z]/gi,function(o){return o.substring(1).toUpperCase();});var n=false;switch(k){case 'background':this._attr('backgroundColor',l,m);return this;case 'margin':l=j.parse_group(l);this._attr('marginBottom',l[0],m);this._attr('marginLeft',l[1],m);this._attr('marginRight',l[2],m);this._attr('marginTop',l[3],m);return this;case 'padding':l=j.parse_group(l);this._attr('paddingBottom',l[0],m);this._attr('paddingLeft',l[1],m);this._attr('paddingRight',l[2],m);this._attr('paddingTop',l[3],m);return this;case 'backgroundColor':case 'borderColor':case 'color':l=j.parse_color(l);break;case 'opacity':l=parseFloat(l,10);break;case 'height':case 'width':if(l=='auto'){n=true;}else l=parseInt(l,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':l=parseInt(l,10);break;default:throw new Error(k+' is not a supported attribute!');}if(this.state.attrs[k]===undefined)this.state.attrs[k]={};if(n)this.state.attrs[k].auto=true;switch(m){case j.ATTR_FROM:this.state.attrs[k].start=l;break;case j.ATTR_BY:this.state.attrs[k].by=true;case j.ATTR_TO:this.state.attrs[k].value=l;break;}};j._get_box_width=function(k){var l=parseInt(g.getStyle(k,'paddingLeft'),10),m=parseInt(g.getStyle(k,'paddingRight'),10),n=parseInt(g.getStyle(k,'borderLeftWidth'),10),o=parseInt(g.getStyle(k,'borderRightWidth'),10);return k.offsetWidth-(l?l:0)-(m?m:0)-(n?n:0)-(o?o:0);};j._get_box_height=function(k){var l=parseInt(g.getStyle(k,'paddingTop'),10),m=parseInt(g.getStyle(k,'paddingBottom'),10),n=parseInt(g.getStyle(k,'borderTopWidth'),10),o=parseInt(g.getStyle(k,'borderBottomWidth'),10);return k.offsetHeight-(l?l:0)-(m?m:0)-(n?n:0)-(o?o:0);};j.prototype.to=function(k,l){if(l===undefined){this._attr(this.last_attr,k,j.ATTR_TO);}else{this._attr(k,l,j.ATTR_TO);this.last_attr=k;}return this;};j.prototype.by=function(k,l){if(l===undefined){this._attr(this.last_attr,k,j.ATTR_BY);}else{this._attr(k,l,j.ATTR_BY);this.last_attr=k;}return this;};j.prototype.from=function(k,l){if(l===undefined){this._attr(this.last_attr,k,j.ATTR_FROM);}else{this._attr(k,l,j.ATTR_FROM);this.last_attr=k;}return this;};j.prototype.duration=function(k){this.state.duration=k?k:0;return this;};j.prototype.checkpoint=function(k,l){if(k===undefined)k=1;this.state.checkpoint=k;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=l;return this;};j.prototype.blind=function(){this.state.blind=true;return this;};j.prototype.hide=function(){this.state.hide=true;return this;};j.prototype.show=function(){this.state.show=true;return this;};j.prototype.ease=function(k){this.state.ease=k;return this;};j.prototype.go=function(){var k=(new Date()).getTime();this.queue.push(this.state);for(var l=0;l<this.queue.length;l++){this.queue[l].start=k-j.offset;if(this.queue[l].checkpoint)k+=this.queue[l].checkpoint*this.queue[l].duration;}j.push(this);return this;};j.prototype._show=function(){g.show(this.obj);};j.prototype._hide=function(){g.hide(this.obj);};j.prototype._frame=function(k){var l=true,m=false,n=false,o;function p(z){return document.documentElement[z]||document.body[z];}for(var q=0;q<this.queue.length;q++){var r=this.queue[q];if(r.start>k){l=false;continue;}if(r.checkpointcb){this._callback(r.checkpointcb,k-r.start);r.checkpointcb=null;}if(r.started===undefined){if(r.show)this._show();for(var s in r.attrs){if(r.attrs[s].start!==undefined)continue;switch(s){case 'backgroundColor':case 'borderColor':case 'color':o=j.parse_color(g.getStyle(this.obj,s=='borderColor'?'borderLeftColor':s));if(r.attrs[s].by){r.attrs[s].value[0]=Math.min(255,Math.max(0,r.attrs[s].value[0]+o[0]));r.attrs[s].value[1]=Math.min(255,Math.max(0,r.attrs[s].value[1]+o[1]));r.attrs[s].value[2]=Math.min(255,Math.max(0,r.attrs[s].value[2]+o[2]));}break;case 'opacity':o=g.getOpacity(this.obj);if(r.attrs[s].by)r.attrs[s].value=Math.min(1,Math.max(0,r.attrs[s].value+o));break;case 'height':o=j._get_box_height(this.obj);if(r.attrs[s].by)r.attrs[s].value+=o;break;case 'width':o=j._get_box_width(this.obj);if(r.attrs[s].by)r.attrs[s].value+=o;break;case 'scrollLeft':case 'scrollTop':o=(this.obj===document.body)?p(s):this.obj[s];if(r.attrs[s].by)r.attrs[s].value+=o;r['last'+s]=o;break;default:o=parseInt(g.getStyle(this.obj,s),10)||0;if(r.attrs[s].by)r.attrs[s].value+=o;break;}r.attrs[s].start=o;}if((r.attrs.height&&r.attrs.height.auto)||(r.attrs.width&&r.attrs.width.auto)){if(i.firefox()<3)n=true;this._destroy_container();for(var s in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(r.attrs[s])this.obj.style[s]=r.attrs[s].value+(typeof r.attrs[s].value=='number'?'px':'');if(r.attrs.height&&r.attrs.height.auto)r.attrs.height.value=j._get_box_height(this.obj);if(r.attrs.width&&r.attrs.width.auto)r.attrs.width.value=j._get_box_width(this.obj);}r.started=true;if(r.blind)this._build_container();}var t=(k-r.start)/r.duration;if(t>=1){t=1;if(r.hide)this._hide();}else l=false;var u=r.ease?r.ease(t):t;if(!m&&t!=1&&r.blind)m=true;if(n&&this.obj.parentNode){var v=this.obj.parentNode,w=this.obj.nextSibling;v.removeChild(this.obj);}for(var s in r.attrs)switch(s){case 'backgroundColor':case 'borderColor':case 'color':this.obj.style[s]='rgb('+j.calc_tween(u,r.attrs[s].start[0],r.attrs[s].value[0],true)+','+j.calc_tween(u,r.attrs[s].start[1],r.attrs[s].value[1],true)+','+j.calc_tween(u,r.attrs[s].start[2],r.attrs[s].value[2],true)+')';break;case 'opacity':g.setStyle(this.obj,'opacity',j.calc_tween(u,r.attrs[s].start,r.attrs[s].value));break;case 'height':case 'width':this.obj.style[s]=u==1&&r.attrs[s].auto?'auto':j.calc_tween(u,r.attrs[s].start,r.attrs[s].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var x=this.obj===document.body;o=x?p(s):this.obj[s];if(r['last'+s]!==o){delete r.attrs[s];}else{var y=j.calc_tween(u,r.attrs[s].start,r.attrs[s].value,true);if(!x){y=this.obj[s]=y;}else{if(s=='scrollLeft'){a.scrollTo(y,p('scrollTop'));}else a.scrollTo(p('scrollLeft'),y);y=p(s);}r['last'+s]=y;}break;default:this.obj.style[s]=j.calc_tween(u,r.attrs[s].start,r.attrs[s].value,true)+'px';break;}if(t==1){this.queue.splice(q--,1);this._callback(r.ondone,k-r.start-r.duration);}}if(n)v[w?'insertBefore':'appendChild'](this.obj,w);if(!m&&this.container_div)this._destroy_container();return !l;};j.prototype.ondone=function(k){this.state.ondone=k;return this;};j.prototype._callback=function(k,l){if(k){j.offset=l;k.call(this);j.offset=0;}};j.calc_tween=function(k,l,m,n){return (n?parseInt:parseFloat)((m-l)*k+l,10);};j.parse_color=function(k){var l=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(k);if(l){return [parseInt(l[1].length==1?l[1]+l[1]:l[1],16),parseInt(l[2].length==1?l[2]+l[2]:l[2],16),parseInt(l[3].length==1?l[3]+l[3]:l[3],16)];}else{var m=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9]+))?\)$/.exec(k);if(m){if(m[4]==='0'){return [255,255,255];}else return [parseInt(m[1],10),parseInt(m[2],10),parseInt(m[3],10)];}else if(k=='transparent'){return [255,255,255];}else throw 'Named color attributes are not supported.';}};j.parse_group=function(k){k=k.trim().split(/ +/);if(k.length==4){return k;}else if(k.length==3){return [k[0],k[1],k[2],k[1]];}else if(k.length==2){return [k[0],k[1],k[0],k[1]];}else return [k[0],k[0],k[0],k[0]];};j.push=function(k){if(!j.active)j.active=[];j.active.push(k);if(j.active.length===1){if(!j.requestAnimationFrame){var l=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame;if(l)j.requestAnimationFrame=l.bind(a);}if(j.requestAnimationFrame){j.requestAnimationFrame(j._animate);}else j.timeout=setInterval(j._animate,j.resolution,false);}if(j.requestAnimationFrame)j._updateEndingTimer();j._animate(Date.now(),true);};j._updateEndingTimer=function(){if(!j.requestAnimationFrame)throw new Error('Ending timer only valid with requestAnimationFrame');var k=0;for(var l=0;l<j.active.length;l++){var m=j.active[l];for(var n=0;n<m.queue.length;n++){var o=m.queue[n].start+m.queue[n].duration;if(o>k)k=o;}}if(j.timeout){clearTimeout(j.timeout);delete j.timeout;}var p=Date.now();if(k>p)j.timeout=setTimeout(j._animate.shield(),k-p,false);};j._animate=function(k,l){k=k||Date.now();for(var m=(l===true)?j.active.length-1:0;m<j.active.length;m++)try{if(!j.active[m]._frame(k))j.active.splice(m--,1);}catch(n){j.active.splice(m--,1);}if(j.active.length===0){if(j.timeout){if(j.requestAnimationFrame){clearTimeout(j.timeout);}else clearInterval(j.timeout);delete j.timeout;}}else if(j.requestAnimationFrame)j.requestAnimationFrame(j._animate);};j.ease={};j.ease.begin=function(k){return Math.sin(Math.PI/2*(k-1))+1;};j.ease.end=function(k){return Math.sin(.5*Math.PI*k);};j.ease.both=function(k){return .5*Math.sin(Math.PI*(k-.5))+.5;};j.prependInsert=function(k,l){j.insert(k,l,h.prependContent);};j.appendInsert=function(k,l){j.insert(k,l,h.appendContent);};j.insert=function(k,l,m){g.setStyle(l,'opacity',0);m(k,l);new j(l).from('opacity',0).to('opacity',1).duration(400).go();};e.exports=j;});
__d("legacy:animation",["Animation"],function(a,b,c,d){a.animation=b('Animation');},3);
__d("Button",["event-extensions","css","DataStore","DOM","Parent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('css'),h=b('DataStore'),i=b('DOM'),j=b('Parent'),k=(function(){var l='uiButtonDisabled',m='uiButtonDepressed',n='button:blocker',o='href';function p(s,t){var u=h.get(s,n);if(t){if(u){u.remove();h.remove(s,n);}}else if(!u)h.set(s,n,Event.listen(s,'click',bagof(false),Event.Priority.URGENT));}function q(s){var t=j.byClass(s,'uiButton');if(!t)throw new Error('invalid use case');return t;}function r(s){return i.isNodeOfType(s,'a');}return {getInputElement:function(s){s=q(s);if(r(s))throw new Error('invalid use case');return i.find(s,'input');},isEnabled:function(s){return !g.hasClass(q(s),l);},setEnabled:function(s,t){s=q(s);g.conditionClass(s,l,!t);if(r(s)){var u=s.href,v=h.get(s,o,'#');if(t){if(!u)s.href=v;}else{if(u&&u!==v)h.set(s,o,u);s.removeAttribute('href');}p(s,t);}else{var w=k.getInputElement(s);w.disabled=!t;p(w,t);}},setDepressed:function(s,t){g.conditionClass(q(s),m,t);},isDepressed:function(s){return g.hasClass(q(s),m);},setLabel:function(s,t){s=q(s);if(r(s)){var u=i.find(s,'span.uiButtonText');i.setContent(u,t);}else k.getInputElement(s).value=t;g.conditionClass(s,'uiButtonNoText',!t);},setIcon:function(s,t){if(!i.isNode(t))return;g.addClass(t,'customimg');s=q(s);var u=i.scry(s,'.img')[0];if(u!=t)if(u){i.replace(u,t);}else i.prependContent(s,t);}};})();a.Button=e.exports=k;},3);
__d("legacy:env",["Env"],function(a,b,c,d){var e=b('Env');a.Env=e;},3);
__d("legacy:event-extensions",["event-extensions"],function(a,b,c,d){b('event-extensions');},3);
__d("Locale",["css"],function(a,b,c,d,e,f){var g=b("css"),h,i={isRTL:function(){if(h===undefined)h=('rtl'===g.getStyle(document.body,'direction'));return h;}};e.exports=i;});
__d("legacy:intl-locale",["Locale"],function(a,b,c,d){a.intl_locale_is_rtl=b('Locale').isRTL;},3);
__d("PlaceholderListener",["Arbiter","css-core","Parent"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('css-core'),i=b('Parent'),j=document.documentElement,k=function(l){l=l||window.event;var m=l.target||l.srcElement,n=m.getAttribute('placeholder');if(n){var o=i.byClass(m,'focus_target');if('focus'==l.type||'focusin'==l.type){var p=m.value.replace(/\r\n/g,'\n'),q=n.replace(/\r\n/g,'\n');if(p==q&&h.hasClass(m,'DOMControl_placeholder')){m.value='';h.removeClass(m,'DOMControl_placeholder');}if(o){h.addClass(o,'child_is_active');h.addClass(o,'child_is_focused');h.addClass(o,'child_was_focused');g.inform('reflow');}}else{if(m.value===''){h.addClass(m,'DOMControl_placeholder');m.value=n;o&&h.removeClass(o,'child_is_active');m.style.direction='';}o&&h.removeClass(o,'child_is_focused');}}};if(j.addEventListener){j.addEventListener('focus',k,true);j.addEventListener('blur',k,true);}else j.onfocusin=j.onfocusout=k;});
__d("legacy:placeholder-form-listener",["PlaceholderListener"],function(a,b,c,d){b('PlaceholderListener');},3);
__d("DOMControl",["DataStore","$","copyProperties"],function(a,b,c,d,e,f){var g=b("DataStore"),h=b("$"),i=b("copyProperties");function j(k){this.root=h(k);this.updating=false;g.set(k,'DOMControl',this);}i(j.prototype,{getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(k){if(!this.beginUpdate())return this;this.onupdate(k);this.endUpdate();},onupdate:function(k){}});j.getInstance=function(k){return g.get(k,'DOMControl');};e.exports=j;});
__d("Input",["css-core","DOMQuery","DOMControl"],function(a,b,c,d,e,f){var g=b("css-core"),h=b("DOMQuery"),i=b("DOMControl"),j=function(l){var m=l.getAttribute('maxlength');if(m&&m>0)d(["enforceMaxLength"],function(n){n(l,m);});},k={focus:function(l){try{l.focus();}catch(m){}},isEmpty:function(l){return !(/\S/).test(l.value||'')||g.hasClass(l,'DOMControl_placeholder');},getValue:function(l){return k.isEmpty(l)?'':l.value;},setValue:function(l,m){g.removeClass(l,'DOMControl_placeholder');l.value=m||'';j(l);var n=i.getInstance(l);n&&n.resetHeight&&n.resetHeight();},setPlaceholder:function(l,m){l.setAttribute('title',m);l.setAttribute('placeholder',m);if(l==document.activeElement)return;if(k.isEmpty(l)){g.conditionClass(l,'DOMControl_placeholder',m);l.value=m||'';}},reset:function(l){var m=l!==document.activeElement?(l.getAttribute('placeholder')||''):'';l.value=m;g.conditionClass(l,'DOMControl_placeholder',m);l.style.height='';},setSubmitOnEnter:function(l,m){g.conditionClass(l,'enter_submit',m);},getSubmitOnEnter:function(l){return g.hasClass(l,'enter_submit');},setMaxLength:function(l,m){if(m>0){l.setAttribute('maxlength',m);j(l);}else l.removeAttribute('maxlength');}};e.exports=k;});
__d("PlaceholderOnsubmitFormListener",["event-extensions","Input"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Input');Event.listen(document.documentElement,'submit',function(h){var i=h.getTarget().getElementsByTagName('*');for(var j=0;j<i.length;j++)if(i[j].getAttribute('placeholder')&&g.isEmpty(i[j]))g.setValue(i[j],'');});});
__d("legacy:placeholder-onsubmit-form-listener",["PlaceholderOnsubmitFormListener"],function(a,b,c,d){b('PlaceholderOnsubmitFormListener');},3);
__d("legacy:array-utils",["ArrayUtils","hasArrayNature"],function(a,b,c,d){a.$A=b('ArrayUtils').createFrom;a.hasArrayNature=b('hasArrayNature');},3);
WidgetArbiter={_findSiblings:function(){if(WidgetArbiter._siblings)return;WidgetArbiter._siblings=[];for(var a=parent.frames.length-1;a>=0;a--)try{if(parent.frames[a]&&parent.frames[a].Arbiter&&parent.frames[a].Arbiter.inform)WidgetArbiter._siblings.push(parent.frames[a].Arbiter);}catch(b){}},inform:function(){WidgetArbiter._findSiblings();var a=$A(arguments);WidgetArbiter._siblings.each(function(b){b.inform.apply(b,a);});}};
var ExternalNodeConnectWidget=function(a){copy_properties(this,{widgetID:a.widgetID,widget:$(a.widgetID),viewerID:a.viewer,nodeType:a.nodeType,viewerIsAdmin:a.viewerIsAdmin&&!a.userOptedOut,adminUrl:a.adminUrl,popupOptInParams:{},nodeUri:new URI(a.nodeURL),externalUrl:a.externalURL,pageId:a.pageId,domainId:a.domainId,layout:a.layout,edgeType:a.edgeType,error:a.error,errorURI:new URI('/'),alreadyConnected:a.alreadyConnected,usingConnectLibrary:!!a.channelURL,commentWidgetMarkup:a.commentWidgetMarkup,commentWidgetOpen:false,commentWidgetVisible:false,userProfile:null,connectStoryFbid:0,isAmbiguousText:a.isAmbiguousText,socialBar:a.socialbar,useDisconnectLink:a.useDisconnectLink,showError:a.showError,showConfirm:a.showConfirm,showFaces:a.showFaces,connectText:a.connectText,ref:a.ref,userOptedOut:a.userOptedOut,usingInlineCommenting:a.usingInlineCommenting,mobile:a.mobile,supportCommenting:!a.mobile&&(!!a.channelURL||a.usingInlineCommenting),inlineCommentListenersInitialized:false,inlineCommentFocused:false,forceCommentHooks:a.forceCommentHooks,nux:a.nux,iframeReferer:a.iframeReferer,isBlocked:a.isBlocked,isPersonalized:a.isPersonalized,confirmedConnect:a.confirmedConnect,hasSend:a.send,colorScheme:a.colorScheme,grayOut:a.grayOut});if(this.usingConnectLibrary)UnverifiedXD.init({autoResize:a.autoResize,channelUrl:a.channelURL,resizeWidth:a.autoResize&&a.layout!==ExternalNodeConnectWidget.STANDARD_LAYOUT});this.connectButtonSlider=DOM.scry(this.widget,'div.connect_button_slider');this.connectButtonContainer=null;if(this.connectButtonSlider.length){this.connectButtonSlider=this.connectButtonSlider[0];this.connectButtonContainer=DOM.find(this.connectButtonSlider,'div.connect_button_container');}else this.connectButtonSlider=null;this.connectButton=DOM.find(this.widget,'a.connect_widget_like_button');if(this.grayOut)this.tombstoneCross=DOM.find(this.widget,'div.tombstone_cross');this.connectedMessage=DOM.scry(this.widget,'span.connect_widget_connected_text');this.connectedMessage=this.connectedMessage.length?this.connectedMessage[0]:null;this.notConnectedMessage=DOM.scry(this.widget,'span.connect_widget_not_connected_text');this.notConnectedMessage=this.notConnectedMessage.length?this.notConnectedMessage[0]:null;this.adminSpans=DOM.scry(this.widget,'span.connect_widget_admin_span');if(this.adminSpans.length>0){this.adminLinks=[];for(var b=0;b<this.adminSpans.length;b++)this.adminLinks[b]=DOM.find(this.adminSpans[b],'a.connect_widget_admin_option');}if(this.layout==ExternalNodeConnectWidget.STANDARD_LAYOUT){this.confirmationCell=DOM.find(this.widget,'div.connect_confirmation_cell');this.userActionTextSpan=DOM.find(this.confirmationCell,'span.connect_widget_user_action');this.summaryTextSpan=DOM.find(this.confirmationCell,'span.connect_widget_summary');this.summaryText=DOM.find(this.confirmationCell,'div.connect_widget_text_summary');var c=DOM.scry(this.widget,'div.connect_widget_sample_connections');this.sampleConnections=c.length>0?c[0]:null;if(a.showFaces&&a.viewer>0){var d=DOM.scry(this.widget,'div.connect_widget_logged_in_user');this.loggedInUserPhotoDiv=d.length>0?d[0]:null;}}if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){this.originalButtonWidth=this.computeButtonDimensions().width;this.summaryIncluding=DOM.find(this.widget,'td.connect_widget_simple_including');this.supportCommenting=false;this.usingInlineCommenting=false;}this.setQueryData();if(this.pageId)copy_properties(this.popupOptInParams,{connect_id:this.pageId});this.errorSpans=DOM.scry(this.widget,'span.connect_widget_error_span');if(this.errorSpans.length>0){this.errorLinks=[];for(var e=0;e<this.errorSpans.length;e++)this.errorLinks[e]=DOM.find(this.errorSpans[e],'a.connect_widget_error_text');}this.confirmSpans=DOM.scry(this.widget,'span.connect_widget_confirm_span');if(this.confirmSpans.length>0){this.confirmLinks=[];for(var f=0;f<this.confirmSpans.length;f++)this.confirmLinks[f]=DOM.find(this.confirmSpans[f],'a.connect_widget_confirm_link');}this.unlikeSpans=DOM.scry(this.widget,'span.unlike_span');this.unlikeLinks=[];for(var g=0;g<this.unlikeSpans.length;g++){this.unlikeLinks[g]=DOM.find(this.unlikeSpans[g],'a.connect_widget_unlike_link');Event.listen(this.unlikeLinks[g],'click',this.connectToNodeOnClick.bind(this));}var h=DOM.scry(this.widget,'div.connect_widget_number_cloud');if(h.length==1){this.numberCloud=h[0];this.numberCloudNub=DOM.find(this.widget,'div.connect_widget_number_cloud_nub');this.numberCloudExtension=DOM.find(this.numberCloud,'div.connect_widget_number_cloud_extension');this.sizeNumberCloud();this.numberCloudUnlikeSpan=DOM.find(this.numberCloudExtension,'span.unlike_span');this.numberCloudReminderSpan=DOM.find(this.numberCloudExtension,'span.like_reminder');this.inAnimation=false;this.reminderIsVisible=CSS.hasClass(this.numberCloudUnlikeSpan,'hidden_elem');Event.listen(this.numberCloud,'mouseleave',this.restoreReminderSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseleave',this.restoreReminderSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseenter',this.exposeUnlikeSpan.bind(this));Event.listen(this.numberCloud,'mouseenter',this.exposeUnlikeSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseleave',function(event){this.requiresMouseLeaveEvent=false;}.bind(this));}if(this.usingInlineCommenting&&!this.showFaces){this.shareCommentSpans=DOM.scry(this.widget,'span.connect_widget_share_comment_span');for(var i=0;i<this.shareCommentSpans.length;i++){var j=DOM.find(this.shareCommentSpans[i],'a.connect_widget_share_comment_option');Event.listen(j,'click',function(event){for(var l=0;l<this.shareCommentSpans.length;l++)CSS.addClass(this.shareCommentSpans[l],'hidden_elem');this.presentCommentingOption();}.bind(this));}}if(this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){XD.forced_min_width=this.getButtonCountWidgetWidth();this.numberExcluding=DOM.find(this.widget,'td.connect_widget_button_count_excluding');this.summaryIncluding=DOM.find(this.widget,'td.connect_widget_button_count_including');this.thumbsUpIcon=DOM.find(this.summaryIncluding,'div.thumbs_up');this.undoRegion=DOM.find(this.summaryIncluding,'div.undo');this.originalButtonWidth=this.computeButtonDimensions().width;Event.listen(this.thumbsUpIcon,'mouseenter',function(event){this.undoButton=DOM.find(this.undoRegion,'label.undo_button input');Event.listen(this.undoButton,'click',this.connectToNodeOnClick.bind(this));CSS.addClass(this.thumbsUpIcon,'hidden_elem');CSS.removeClass(this.undoRegion,'hidden_elem');}.bind(this));Event.listen(this.undoRegion,'mouseleave',function(event){CSS.removeClass(this.thumbsUpIcon,'hidden_elem');CSS.addClass(this.undoRegion,'hidden_elem');}.bind(this));}if(!this.isBlocked){Event.listen(this.connectButton,'click',this.primaryLikeButtonOnClick.bind(this));if(this.grayOut)Event.listen(this.tombstoneCross,'click',this.connectToNodeOnClick.bind(this));}if(this.adminLinks)for(var b=0;b<this.adminLinks.length;b++)Event.listen(this.adminLinks[b],'click',this.presentAdminPage.bind(this));if(this.errorLinks)for(var b=0;b<this.errorLinks.length;b++)Event.listen(this.errorLinks[b],'click',this.presentErrorDialog.bind(this));if(this.confirmLinks)for(var k=0;k<this.confirmLinks.length;k++)Event.listen(this.confirmLinks[k],'click',this.presentConfirmDialog.bind(this));if(a.showCaptcha){this.showCaptcha=true;this.connectToNode(true);}if(this.forceCommentHooks)this.setupCommentHooks($(this.forceCommentHooks));this.textInputMarginWithButton=5;this.widthSyncArbiter=Arbiter.subscribe('platform/socialplugins/send/resize',this.syncSendWidgetWidth.bind(this));Arbiter.inform('platform/socialplugins/like/resize',{button_width:this.computeButtonDimensionsWithPadding().width,widget_width:Vector2.getElementDimensions(this.widget).x,layout:this.layout},Arbiter.BEHAVIOR_STATE);Arbiter.subscribe('platform/socialplugins/dialog',function(l,m){if(m.controllerID!==this.widgetID)this.otherCommentWidgetOpen=(m.event=='open');}.bind(this));Arbiter.subscribe('platform/socialplugins/dialog',function(l,m){if(m.controllerID!==this.divID&&m.event=='open')this.closeCommentWidget();}.bind(this));this.subscribeToSync(a);};copy_properties(ExternalNodeConnectWidget,{STANDARD_LAYOUT:'standard',BOX_COUNT_LAYOUT:'box_count',BUTTON_COUNT_LAYOUT:'button_count',SIMPLE_LAYOUT:'simple',COLOR_DARK:0,COLOR_LIGHT:1,OPT_IN_FACEBOOK_APP_ID:'127760087237610',updateLoggedInUser:function(a){var b=ExternalNodeConnectWidget.controllerManagingLogin;b.setLoggedIn(a);b.connectToNode(true);b.userOptedOut=false;delete ExternalNodeConnectWidget.controllerManagingLogin;Arbiter.inform('platform/socialplugins/login',{user:a.user},Arbiter.BEHAVIOR_STATE);WidgetArbiter.inform('platform/socialplugins/login',{user:a.user},Arbiter.BEHAVIOR_STATE);},onCommentWidgetLoaded:function(a,b){var c=ExternalNodeConnectWidget.self;delete ExternalNodeConnectWidget.self;c.injectCommentWidgetMarkup(a);setTimeout(function(){c.positionNub(b);},1000);}});copy_properties(ExternalNodeConnectWidget.prototype,{getSyncEndpointName:function(){},getConnectionEndpointName:function(){},getPluginName:function(){},subscribeToSync:function(a){Arbiter.subscribe('platform/socialplugins/login',function(b,c){if(this.viewerID&&c.user!==this.viewerID)document.location.reload();}.bind(this));Arbiter.subscribe(this.getSyncEndpointName(),function(b,c){if(c.externalUrl==a.externalURL){this.userOptedOut=false;this.updateWidget(c.opts,true);}}.bind(this));},setQueryData:function(){copy_properties(this.popupOptInParams,{protocol:window.location.protocol,external_page_url:this.externalUrl});if(this.nux)copy_properties(this.popupOptInParams,{nux:this.nux,referer:this.iframeReferer});},updateWidget:function(a,b,c){var d=(this.alreadyConnected!=a.nowConnected)||(this.showConfirm!=a.showConfirm);if(!b)Arbiter.inform(this.getConnectionEndpointName(),a,Arbiter.BEHAVIOR_STATE);this.alreadyConnected=a.nowConnected;this.viewerIsAdmin=a.isAdmin;this.showError=a.showError;this.showConfirm=a.showConfirm;this.adminUrl=a.adminUrl;this.userProfile=a.userProfile;this.connectStoryFbid=a.connectStoryFbid;this.error=a.error;if(!a.nowConnected)this.closeCommentWidget();if(d&&!b||c){var e=a.nowConnected?'edgeCreated':'edgeRemoved';UnverifiedXD.send({type:e});}if(d||this.error)this.syncWidgetDisplay();if(!b||c)WidgetArbiter.inform(this.getSyncEndpointName(),{externalUrl:this.externalUrl,opts:a},Arbiter.BEHAVIOR_STATE);},presentOptIn:function(){ExternalNodeConnectWidget.controllerManagingLogin=this;PlatformOptInPopup.open(this.getPluginName(),'opt.inlike',this.popupOptInParams);UnverifiedXD.send({type:'authPrompted'});},setLoggedIn:function(a){this.viewerID=a.user;this.newProfilePic=a.profilePic;this.placeFormUserCheck(a.formUserCheck,a.fbDtsg);},placeFormUserCheck:function(a,b){Env.fb_dtsg=b;if(ge('post_form_id')){DOM.replace($('post_form_id'),HTML(a));}else DOM.appendContent(DOM.find(document,'body'),HTML(a));},syncWidgetWithServer:function(a){var b=a.getPayload();if(b.requires_login){this.updateWidget({nowConnected:false,isAdmin:false},false);this.presentOptIn();return;}var c={nowConnected:b.success&&b.already_connected,isAdmin:b.is_admin,showError:b.show_error,showConfirm:b.show_confirm,adminUrl:b.admin_url,userProfile:b.user_profile,connectStoryFbid:b.story_fbid,error:b.error_info};this.updateWidget(c,!b.success,b.success);if(b.success&&this.showCaptcha){window.opener.location.reload();window.close();}},getButtonCountWidgetWidth:function(){var a=DOM.find(this.widget,'table.connect_widget_interactive_area'),b=CSS.getStyle(a,'width');return parseInt(b,10);},sizeNumberCloud:function(){this.collapsedNumberCloudHeight=this.getCollapsedNumberCloudHeight();this.expandedNumberCloudHeight=this.collapsedNumberCloudHeight+this.getNumberCloudExtensionHeight();if(this.alreadyConnected)CSS.setStyle(this.numberCloud,'height',this.expandedNumberCloudHeight+'px');var a=this.computeButtonDimensionsWithPadding().width;XD.forced_min_width=a;var b=intl_locale_is_rtl();a-=2;CSS.setStyle(this.numberCloud,'width',a+'px');CSS.setStyle(this.numberCloud,'visibility','visible');animation(this.numberCloud).from('opacity',0).to('opacity',1).duration(100).go();},getCollapsedNumberCloudHeight:function(){var a=Vector2.getElementDimensions(this.numberCloud).y,b=parseInt(CSS.getStyle(this.numberCloud,'paddingTop'),10),c=parseInt(CSS.getStyle(this.numberCloud,'paddingBottom'),10),d=parseInt(CSS.getStyle(this.numberCloud,'border'),10);return a-b-c-2;},getNumberCloudExtensionHeight:function(){CSS.addClass(this.numberCloudExtension,'connect_widget_offscreen');if(!this.alreadyConnected)CSS.removeClass(this.numberCloudExtension,'hidden_elem');var a=Vector2.getElementDimensions(this.numberCloudExtension).y;if(!this.alreadyConnected)CSS.addClass(this.numberCloudExtension,'hidden_elem');CSS.removeClass(this.numberCloudExtension,'connect_widget_offscreen');return a;},restoreReminderSpan:function(event){if(this.reminderIsVisible||this.inAnimation)return;this.animateReminderSpanReappearance();},animateReminderSpanReappearance:function(){if(this.reminderIsVisible||this.inAnimation)return;this.inAnimation=true;CSS.addClass(this.numberCloudUnlikeSpan,'hidden_elem');CSS.setStyle(this.numberCloudReminderSpan,'opacity',0);CSS.removeClass(this.numberCloudReminderSpan,'hidden_elem');animation(this.numberCloudReminderSpan).to('opacity',1).duration(100).ondone(function(){this.inAnimation=false;this.reminderIsVisible=true;}.bind(this)).go();},exposeUnlikeSpan:function(event){if(!this.alreadyConnected||this.requiresMouseLeaveEvent||!this.reminderIsVisible||this.inAnimation)return;this.inAnimation=true;CSS.addClass(this.numberCloudReminderSpan,'hidden_elem');CSS.setStyle(this.numberCloudUnlikeSpan,'opacity',0);CSS.removeClass(this.numberCloudUnlikeSpan,'hidden_elem');animation(this.numberCloudUnlikeSpan).to('opacity',1).duration(100).ondone(function(){this.inAnimation=false;this.reminderIsVisible=false;}.bind(this)).go();},conditionallyActivateButton:function(event){this.commentButtonIsActive=this.inlineCommentInput.value.trim().length>0;},updateConnectionWithComment:function(event){Event.kill(event);if(this.commentButtonIsActive){this.postInlineComment();this.resetInlineComment();this.closeInlineComment();}},postInlineComment:function(){this.postUserComment(this.inlineCommentInput.value.trim(),false,'iframe');},resetInlineComment:function(){this.concealCommentButton();var a=this.inlineCommentInput.getAttribute('placeholder');this.inlineCommentInput.value=a;},showInlineComment:function(event){Event.kill(event);if(!this.inlineCommentFlyoutOpen||this.inlineCommentFlyoutVisible||this.showConfirm||this.error)return;this.inlineCommentFlyoutVisible=true;CSS.show(this.inlineCommentFlyout);},hideInlineComment:function(event){if(event)Event.kill(event);if(this.inlineCommentFocused||!this.inlineCommentFlyoutOpen||!this.inlineCommentFlyoutVisible)return;if(event&&DOM.contains(this.inlineCommentFlyout,event.getRelatedTarget()))return;var a=this.inlineCommentInput.value.trim(),b=this.inlineCommentInput.getAttribute('placeholder');if(a.length>0&&a!=b)return;this.inlineCommentFlyoutVisible=false;CSS.hide(this.inlineCommentFlyout);},closeInlineComment:function(){this.inlineCommentFlyoutVisible=false;this.inlineCommentFlyoutOpen=false;CSS.hide(this.inlineCommentFlyout);this.resetInlineComment();},concealCommentButton:function(){CSS.addClass(this.inlineCommentButton,'hidden_elem');CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithoutButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',0);},positionInlineCommentFlyout:function(){CSS.addClass(this.inlineCommentFlyout,'comment_widget_offscreen');CSS.removeClass(this.inlineCommentFlyout,'hidden_elem');var a=0,b=this.computeButtonDimensions(),c=b.height,d=this.grayOut?a:a+20,e=intl_locale_is_rtl()?'right':'left';if(this.showFaces){var f=DOM.scry(this.widget,'span.connect_widget_text')[0],g=intl_locale_is_rtl()?'paddingRight':'paddingLeft',h=CSS.getStyle(f,g);d=this.grayOut?a:a+parseInt(h,10);var i=Vector2.getElementDimensions(this.sampleConnections).y;c=i-3;}var j=Vector2.getElementDimensions(this.summaryText).y;if(j>15)c+=2;CSS.setStyle(this.inlineCommentFlyout,e,d+'px');CSS.setStyle(this.inlineCommentFlyout,'top',(-c)+'px');var k=Vector2.getElementPosition(this.widget,'document').x,l=Vector2.getElementDimensions(this.widget).x,m=k+l-d-5;CSS.setStyle(this.inlineCommentFlyout,'width',m+'px');CSS.removeClass(this.inlineCommentButton,'hidden_elem');var n=Vector2.getElementDimensions(this.inlineCommentButton).x;CSS.addClass(this.inlineCommentButton,'hidden_elem');var o=(this.inlineCommentClose)?15:0;this.textInputWidthWithoutButton=m-24-o;this.textInputWidthWithButton=this.textInputWidthWithoutButton-n-this.textInputMarginWithButton-1;CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithoutButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',0);CSS.removeClass(this.inlineCommentFlyout,'comment_widget_offscreen');CSS.addClass(this.inlineCommentFlyout,'hidden_elem');},postUserComment:function(a,b,c){var d={href:this.externalUrl,node_type:this.nodeType,edge_type:this.edgeType,page_id:this.pageId,connect_text:this.connectText,story_fbid:this.connectStoryFbid,comment:a,widget_type:c||'xfbml',own_product:b};new AsyncRequest().setURI(this.getCommentAjaxEndpoint()).setData(d).setNectarModuleDataSafe().setNectarImpressionIdSafe().send();this.closeCommentWidget();},closeCommentWidget:function(){if(this.commentWidgetOpen){delete this.inGracePeriod;delete this.commentWidgetIsExpanded;this.commentWidgetVisible=false;this.commentWidgetOpen=false;UnverifiedXD.send({type:'dismissEdgeCommentDialog'});}},presentAdminPage:function(){var a='_blank';window.open(this.adminUrl.toString(),a);},presentErrorDialog:function(){if(!this.error.errorUri)return;var a='_blank',b='toolbar=0, status=0, width=960, height=300';window.open(this.error.errorUri.toString(),a,b);},presentConfirmDialog:function(){var a='_blank',b='toolbar=0,status=0,width=450,height=200,scrollbars=0,location=0,menubar=0';if(!window.confirmDialogReturn)window.confirmDialogReturn={};window.confirmDialogReturn[this.widgetID]=this;var c=this.getConfirmURL();window.open(c,a,b);},returnFromConfirmDialog:function(a){if(a){this.showConfirm=null;this.confirmedConnect=a;this.connectToNode(!this.alreadyConnected);}else this.updateWidget({nowConnected:this.alreadyConnected,showConfirm:null,isAdmin:this.viewerIsAdmin},false);},syncWidgetDisplay:function(){var a=this.alreadyConnected;this.setButtonState(a);this.showElementIf(this.connectedMessage,a);this.showElementIf(this.notConnectedMessage,!a);if(this.adminSpans)for(var b=0;b<this.adminSpans.length;b++)this.showElementIf(this.adminSpans[b],this.viewerIsAdmin);if(this.errorSpans)for(var c=0;c<this.errorSpans.length;c++)this.showElementIf(this.errorSpans[c],this.error&&(this.viewerIsAdmin||this.showError));for(var d=0;d<this.confirmSpans.length;d++)this.showElementIf(this.confirmSpans[d],!this.alreadyConnected&&this.showConfirm);for(var e=0;e<this.unlikeSpans.length;e++)this.showElementIf(this.unlikeSpans[e],this.alreadyConnected);if(this.shareCommentSpans)for(var f=0;f<this.shareCommentSpans.length;f++)this.showElementIf(this.shareCommentSpans[f],a);this.showElementIf(this.connectButton,(!this.useDisconnectLink||!a)&&!this.showConfirm);if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT){this.manageBoxCountButtonAnimation(a);}else if(this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){this.manageButtonCountButtonAnimation(a);}else if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){this.manageSimpleButtonAnimation(a);}else this.manageStandardButtonAnimation(a);if(!this.loggedInUserPhotoDiv)return;if(a){this.slideUserPhotoIn(this.loggedInUserPhotoDiv);}else this.slideUserPhotoOut(this.loggedInUserPhotoDiv);},manageStandardButtonAnimation:function(a){if(this.grayOut)return;if(this.alreadyConnected||this.showConfirm){this.hideButton(true);}else this.hideButton(false);},setButtonState:function(a){if(a){CSS.removeClass(this.connectButton,'like_button_no_like');CSS.addClass(this.connectButton,'like_button_like');this.fixIEButtonDoubleLineBug();}else{CSS.addClass(this.connectButton,'like_button_no_like');CSS.removeClass(this.connectButton,'like_button_like');}},fixIEButtonDoubleLineBug:function(){if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&ua.ie()<=7&&!this.hasBeenFixed){var a=this.computeButtonDimensionsWithPadding();CSS.setStyle(this.connectButton,'width',a.width+1);this.hasBeenFixed=true;}},hideButton:function(a){if(this.layout!=='standard')return;if(this.oAnimateBlind)this.oAnimateBlind.stop();this.oAnimateBlind=animation(this.connectButtonSlider).duration(150);var b=1,c=intl_locale_is_rtl(),d=c?'marginRight':'marginLeft',e=c?'marginLeft':'marginRight';if(a){CSS.addClass(this.connectButtonContainer,'hidden');this.oAnimateBlind.ondone(function(){CSS.setStyle(this.connectButtonContainer,d,'2px');CSS.setStyle(this.connectButtonContainer,'visibility','hidden');CSS.addClass(this.confirmationCell,'connect_confirmation_cell_like');CSS.removeClass(this.confirmationCell,'connect_confirmation_cell_no_like');this.oAnimateBlind=null;}.bind(this));}else{CSS.setStyle(this.connectButtonContainer,d,'0px');b=Vector2.getElementDimensions(this.connectButton).x;this.oAnimateBlind.ondone(function(){CSS.setStyle(this.connectButtonSlider,'overflow','visible');CSS.setStyle(this.connectButtonSlider,'width','auto');CSS.removeClass(this.confirmationCell,'connect_confirmation_cell_like');CSS.addClass(this.confirmationCell,'connect_confirmation_cell_no_like');CSS.setStyle(this.connectButtonContainer,'visibility','visible');CSS.removeClass(this.connectButtonContainer,'hidden');this.oAnimateBlind=null;}.bind(this));}this.oAnimateBlind.to('width',b).blind().go();},showElementIf:function(a,b){if(!a)return;if(b){CSS.show(a);}else CSS.hide(a);},slideUserPhotoIn:function(a){if(!CSS.hasClass(a,'connect_widget_user_not_connected'))return;var b=CSS.getStyle(a,'width');CSS.setStyle(a,'width',0);CSS.setStyle(a,'opacity',0);CSS.removeClass(a,'connect_widget_user_not_connected');animation(a).to('width',b).duration(100).checkpoint().to('opacity',1).duration(400).go();},slideUserPhotoOut:function(a){if(CSS.hasClass(a,'connect_widget_user_not_connected'))return;animation(a).to('opacity',0).duration(100).checkpoint(.25).to('width',0).duration(100).ondone(function(){CSS.addClass(a,'connect_widget_user_not_connected');CSS.setStyle(a,'width',null);}).go();},primaryLikeButtonOnClick:function(event){if(this.grayOut&&this.alreadyConnected&&!this.mobile)return;this.connectToNodeOnClick(event);if(this.tombstoneCross&&this.alreadyConnected)DOM.replace(this.tombstoneCross,HTML('<div class="tombstone_cross tombstone_cross_static" />'));setTimeout(function(){this.tombstoneCross=DOM.find(this.widget,'div.tombstone_cross');CSS.removeClass(this.tombstoneCross,'tombstone_cross_static');Event.listen(this.tombstoneCross,'click',this.connectToNodeOnClick.bind(this));}.bind(this),1000);},_clickLocked:false,connectToNodeOnClick:function(event){Event.kill(event);if(!this._clickLocked){this._clickLocked=true;setTimeout(function(){this._clickLocked=false;}.bind(this),1000);if(this.viewerID==0||this.userOptedOut){this.presentOptIn();}else this.connectToNode(!this.alreadyConnected);}},connectToNode:function(a){if(!a){if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT)return;if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&!this.usingConnectLibrary){CSS.addClass(this.userActionTextSpan,'hidden_elem');CSS.removeClass(this.summaryTextSpan,'hidden_elem');CSS.setStyle(this.summaryTextSpan,'opacity',1);}if(this.shareCommentSpans)for(var b=0;b<this.shareCommentSpans.length;b++)CSS.addClass(this.shareCommentSpans[b],'hidden_elem');if(this.commentWidgetOpen){this.closeCommentWidget();}else if(this.inlineCommentFlyoutOpen)this.closeInlineComment();}this.updateWidget({nowConnected:!this.alreadyConnected,isAdmin:this.viewerIsAdmin},true);var c={href:this.externalUrl,node_type:this.nodeType,edge_type:this.edgeType,page_id:this.pageId,layout:this.layout,is_personalized:this.isPersonalized,show_captcha:this.showCaptcha,connect_text:this.connectText,ref:this.ref,now_connected:a,post_form_id:$('post_form_id').value,iframe_referer:this.iframeReferer};if(this.confirmedConnect)c.confirm=1;new AsyncRequest().setURI(this.getAjaxEndpoint()).setHandler(this.syncWidgetWithServer.bind(this)).setData(c).setNectarModuleDataSafe().setNectarImpressionIdSafe().send();if(a){if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT)this.requiresMouseLeaveEvent=true;if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&!this.usingConnectLibrary){CSS.setStyle(this.userActionTextSpan,'opacity',1);CSS.removeClass(this.userActionTextSpan,'hidden_elem');CSS.addClass(this.summaryTextSpan,'hidden_elem');Event.listen(this.widget,'mouseleave',this.transitionBetweenMessages.bind(this));}if(this.shareCommentSpans){for(var d=0;d<this.shareCommentSpans;d++)CSS.removeClass(this.shareCommentSpans[d],'hidden_elem');}else if(this.supportCommenting)this.presentCommentingOption();this.repositionFacepileVertically();}},transitionBetweenMessages:function(event){if(!this.alreadyConnected||CSS.hasClass(this.userActionTextSpan,'hidden_elem'))return;animation(this.userActionTextSpan).to('opacity',0).duration(500).ondone(function(){CSS.addClass(this.userActionTextSpan,'hidden_elem');CSS.setStyle(this.summaryTextSpan,'opacity',0);CSS.removeClass(this.summaryTextSpan,'hidden_elem');animation(this.summaryTextSpan).to('opacity',1).duration(500).ondone(function(){this.repositionFacepileVertically();}.bind(this)).go();this.positionInlineCommentFlyout();}.bind(this)).go();},presentCommentingOption:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.widgetID,event:'open'});if(this.usingConnectLibrary){ExternalNodeConnectWidget.self=this;var a={type:'presentEdgeCommentDialog',masterFrameName:window.name,version:2},b=Vector2.getElementDimensions(this.connectButton),c=Vector2.getElementPosition(this.connectButton);a.anchorGeometry={x:b.x,y:b.y};a.anchorPosition={x:c.x,y:c.y};a.width=400;a.height=225;UnverifiedXD.send(a);this.commentWidgetOpen=true;this.commentWidgetVisible=true;this.commentWidgetExpanded=true;}else if(this.usingInlineCommenting)if(!this.inlineCommentListenersInitialized){this.unwrapComment();this.initializeInlineCommentListeners();this.openInlineCommentFlyout();this.positionInlineCommentFlyout();this.inlineCommentListenersInitialized=true;}else{this.positionInlineCommentFlyout();this.openInlineCommentFlyout();}},unwrapComment:function(){if(this.unwrapComment.done)return;var a=$('connect-widget-comment-box-markup'),b=ExternalNodeConnectWidget.commentMarkup;a.innerHTML=b;this.unwrapComment.done=true;},initializeInlineCommentListeners:function(){this.inlineCommentFlyout=DOM.find(this.widget,'.connect_widget_comment_box');this.inlineCommentInput=DOM.find(this.inlineCommentFlyout,'.connect_widget_comment_textinput');this.inlineCommentButton=DOM.find(this.inlineCommentFlyout,'.connect_widget_comment_button');this.inlineCommentClose=DOM.scry(this.inlineCommentFlyout,'.connect_widget_comment_close_button');if(this.inlineCommentClose.length>0)this.inlineCommentClose=this.inlineCommentClose[0];this.commentButtonIsActive=false;Event.listen(this.inlineCommentInput,'keyup',this.conditionallyActivateButton.bind(this));Event.listen(this.inlineCommentInput,'focus',function(){this.inlineCommentFocused=true;this.exposeCommentButton();}.bind(this));Event.listen(this.inlineCommentButton,'click',this.updateConnectionWithComment.bind(this));Event.listen(this.inlineCommentInput,'blur',function(){this.inlineCommentFocused=false;this.hideInlineComment();}.bind(this));Event.listen(this.widget,'mouseout',this.hideInlineComment.bind(this));Event.listen(this.widget,'mouseover',this.showInlineComment.bind(this));if(this.inlineCommentClose)Event.listen(this.inlineCommentClose,'click',function(event){for(var a=0;a<this.shareCommentSpans.length;a++)CSS.removeClass(this.shareCommentSpans[a],'hidden_elem');this.closeInlineComment();}.bind(this));},exposeCommentButton:function(event){if(!CSS.hasClass(this.inlineCommentButton,'hidden_elem'))return;CSS.removeClass(this.inlineCommentButton,'hidden_elem');CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',this.textInputMarginWithButton+'px');},openInlineCommentFlyout:function(){CSS.show(this.inlineCommentFlyout);this.inlineCommentFlyoutOpen=true;this.inlineCommentFlyoutVisible=true;},manageBoxCountButtonAnimation:function(a){if(a&&!this.showConfirm){this.animateBoxCountButtonDisappearance();}else this.animateBoxCountButtonReappearance();},animateBoxCountButtonDisappearance:function(){if(this.grayOut)return;CSS.addClass(this.connectButton,'hidden_elem');CSS.setStyle(this.numberCloudExtension,'opacity',0);CSS.removeClass(this.numberCloudExtension,'hidden_elem');CSS.addClass(this.numberCloudNub,'hidden_elem');CSS.addClass(this.numberCloudUnlikeSpan,'hidden_elem');CSS.removeClass(this.numberCloudReminderSpan,'hidden_elem');animation(this.numberCloud).to('height',this.expandedNumberCloudHeight).duration(100).ondone(function(){animation(this.numberCloudExtension).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();},animateBoxCountButtonReappearance:function(){CSS.addClass(this.numberCloudExtension,'hidden_elem');animation(this.numberCloud).to('height',this.collapsedNumberCloudHeight).duration(75).ondone(function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else{CSS.setStyle(this.connectButton,'opacity',0);CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('opacity',0).to('opacity',1).duration(75).ondone(function(){CSS.setStyle(this.numberCloudNub,'opacity',0);CSS.removeClass(this.numberCloudNub,'hidden_elem');animation(this.numberCloudNub).from('opacity',0).to('opacity',1).duration(50).go();}.bind(this)).go();}}.bind(this)).go();},manageButtonCountButtonAnimation:function(a){if(a&&!this.showConfirm){this.animateButtonCountButtonDisappearance();}else this.animateButtonCountButtonReappearance();if(!this.grayOut){CSS.removeClass(this.thumbsUpIcon,'hidden_elem');CSS.addClass(this.undoRegion,'hidden_elem');}},manageSimpleButtonAnimation:function(a){if(this.grayOut)return;if(a&&!this.showConfirm){this.animateSimpleButtonDisappearance();}else this.animateSimpleButtonReappearance();},animateButtonCountButtonDisappearance:function(){if(!this.grayOut)animation(this.connectButton).from('opacity',1).to('opacity',0).from('width',this.originalButtonWidth).to('width','0px').ondone(function(){CSS.addClass(this.connectButton,'hidden_elem');}.bind(this)).duration(100).go();animation(this.numberExcluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.numberExcluding,'hidden_elem');CSS.setStyle(this.summaryIncluding,'opacity',0);CSS.removeClass(this.summaryIncluding,'hidden_elem');animation(this.summaryIncluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();for(var a=0;a<this.confirmSpans.length;a++)CSS.addClass(this.confirmSpans[a],'hidden_elem');if(this.grayOut)CSS.removeClass(this.connectButton,'hidden_elem');},animateSimpleButtonDisappearance:function(){animation(this.connectButton).from('opacity',1).to('opacity',0).from('width',this.originalButtonWidth).to('width','0px').ondone(function(){CSS.addClass(this.connectButton,'hidden_elem');CSS.setStyle(this.summaryIncluding,'opacity',0);CSS.removeClass(this.summaryIncluding,'hidden_elem');animation(this.summaryIncluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).duration(50).go();for(var a=0;a<this.confirmSpans.length;a++)CSS.addClass(this.confirmSpans[a],'hidden_elem');if(this.grayOut)CSS.removeClass(this.connectButton,'hidden_elem');},computeButtonDimensions:function(){var a=CSS.hasClass(this.connectButton,'hidden_elem');if(a){CSS.addClass(this.connectButton,'connect_widget_offscreen');CSS.removeClass(this.connectButton,'hidden_elem');}var b=Vector2.getElementDimensions(this.connectButton),c=b.x,d=b.y,e=parseInt(CSS.getStyle(this.connectButton,'paddingLeft'),10),f=parseInt(CSS.getStyle(this.connectButton,'paddingRight'),10),g=parseInt(CSS.getStyle(this.connectButton,'paddingTop'),10),h=parseInt(CSS.getStyle(this.connectButton,'paddingBottom'),10);if(a){CSS.addClass(this.connectButton,'hidden_elem');CSS.removeClass(this.connectButton,'connect_widget_offscreen');}return {width:c-e-f-2,height:d};},computeButtonDimensionsWithPadding:function(){var a=CSS.hasClass(this.connectButton,'hidden_elem');if(a){CSS.addClass(this.connectButton,'connect_widget_offscreen');CSS.removeClass(this.connectButton,'hidden_elem');}var b=Vector2.getElementDimensions(this.connectButton),c=b.x,d=b.y;if(ua.ie())c+=3;if(a){CSS.addClass(this.connectButton,'hidden_elem');CSS.removeClass(this.connectButton,'connect_widget_offscreen');}return {width:c,height:d};},animateButtonCountButtonReappearance:function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else if(!this.grayOut){CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('width','0px').to('width',this.originalButtonWidth).from('opacity',0).to('opacity',1).duration(100).go();}CSS.setStyle(this.summaryIncluding,'opacity',1);animation(this.summaryIncluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.summaryIncluding,'hidden_elem');CSS.setStyle(this.numberExcluding,'opacity',0);CSS.removeClass(this.numberExcluding,'hidden_elem');animation(this.numberExcluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();},animateSimpleButtonReappearance:function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else{CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('width','0px').to('width',this.originalButtonWidth).from('opacity',0).to('opacity',1).duration(100).go();}CSS.setStyle(this.summaryIncluding,'opacity',1);animation(this.summaryIncluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.summaryIncluding,'hidden_elem');}.bind(this)).go();},injectCommentWidgetMarkup:function(a){this.commentDocument=a;this.commentDocument.body.innerHTML=this.commentWidgetMarkup;this.transferCSSStyles();if(this.newProfilePic){var b=DOM.find(this.commentDocument,'img.connect_comment_widget_user_pic');b.src=this.newProfilePic;delete this.newProfilePic;}if(ua.ie()){var c=DOM.scry(this.commentDocument,'img.connect_comment_share_preview_pic');if(c.length>0){c=c[0];var d=50,e=Vector2.getElementDimensions(c),f=d/e.x;if(f<1){CSS.setStyle(c,'width',d);CSS.setStyle(c,'height',e.y*f);}}}this.setupCommentHooks(this.commentDocument);this.commentWidgetIsExpanded=!this.inlineUnlikeLink;var g=this.getCommentActivatingComponent();g.onmouseout=this.commentDocument.body.onmouseout=this.onCommentMouseOut.bind(this);g.onmouseover=this.commentDocument.body.onmouseover=this.onCommentMouseOver.bind(this);this.inGracePeriod=false;},positionNub:function(a){var b=DOM.find(this.connectButton,'.liketext'),c=Vector2.getElementPosition(b).x+7,d=DOM.find(this.commentDocument.body,'.nub');if(intl_locale_is_rtl()){c+=b.offsetWidth-14-7;left=c-parseFloat(a)+d.offsetWidth/2;}else left=c-parseFloat(a)-d.offsetWidth/2;d.style.left=left+'px';d.style.visibility='visible';},onCommentMouseOut:function(a){this.mouseOutside=true;return true;},onCommentMouseOver:function(a){this.mouseOutside=false;return true;},setupCommentHooks:function(a){this.placeholderInputRegion=DOM.find(a,'div.connect_comment_widget_placeholder_input_region');this.placeholderInput=DOM.find(this.placeholderInputRegion,'input.connect_comment_widget_placeholder_input');this.fullInputRegion=DOM.find(a,'div.connect_comment_widget_full_input_region');this.fullInputTextarea=DOM.find(this.fullInputRegion,'textarea.connect_comment_widget_full_input_textarea');this.ownProductCheckbox=DOM.scry(a,'input.connect_comment_widget_own_product_checkbox');if(this.ownProductCheckbox.length>0)this.ownProductCheckbox=this.ownProductCheckbox[0];this.widgetButtonRegion=DOM.find(a,'div.connect_comment_widget_button_region');this.postToFacebookButton=DOM.scry(this.widgetButtonRegion,'.connect_comment_widget_post_button input');if(this.postToFacebookButton.length>0){this.postToFacebookButton=this.postToFacebookButton[0];this.postToFacebookButton.onclick=this.updateUserComment.bind(this);}this.closeButton=DOM.scry(this.widgetButtonRegion,'.connect_comment_widget_close_button input');if(this.closeButton.length>0){this.closeButton=this.closeButton[0];this.closeButton.onclick=this.closeCommentWidget.bind(this);}this.inlineUnlikeLink=DOM.scry(a,'a.connect_comment_widget_unlike_link');if(this.inlineUnlikeLink.length>0){this.inlineUnlikeLink=this.inlineUnlikeLink[0];this.inlineUnlikeLink.onclick=this.connectToNodeOnClick.bind(this);}this.defaultInputText=this.placeholderInput.value;this.placeholderInput.onfocus=this.transitionToFullInputMode.bind(this);this.fullInputTextarea.onfocus=this.removePlaceholderText.bind(this);this.fullInputTextarea.onblur=(function(b){this.restorePlaceholderText();if(this.mouseOutside)return this.hideCommentWidget();}).bind(this);if(this.inlineUnlikeLink)this.inlineUnlikeLink.onclick=this.connectToNodeOnClick.bind(this);if(this.closeButton){this.closeButton.onclick=this.closeCommentWidget.bind(this);this.fullInputTextarea.onkeydown=(function(b){b=b||window.event;if(!b)return true;if(b.keyCode==13&&!(b.ctrlKey||b.shiftKey||b.altKey||b.metaKey)){this.updateUserComment();return false;}if(this.didResetOnKeydown)return true;this.removePlaceholderText();this.didResetOnKeydown=true;return true;}).bind(this);this.transitionToFullInputMode();}},getCommentActivatingComponent:function(){if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT||this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){return this.widget;}else if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){return this.widget;}else if(this.grayOut){return DOM.find(this.widget,'table.connect_widget_interactive_area');}else return this.confirmationCell;},showCommentWidget:function(event){if(this.otherCommentWidgetOpen)return false;this.inGracePeriod=true;this.killCloseThread();if(this.commentWidgetOpen&&!this.commentWidgetVisible){this.commentWidgetVisible=true;CSS.show(this.commentDocument.body);UnverifiedXD.send({type:'showEdgeCommentDialog'});}return false;},hideCommentWidget:function(event){if(this.otherCommentWidgetOpen)return false;this.inGracePeriod=false;if(this.commentWidgetOpen&&this.commentWidgetVisible){var a=function(){if(!this.inGracePeriod&&this.shouldHideExpandedWidget()){this.fullInputTextarea.blur();this.commentWidgetVisible=false;if(!this.socialBar)CSS.hide(this.commentDocument.body);UnverifiedXD.send({type:'hideEdgeCommentDialog'});}this.inGracePeriod=false;this.killCloseThread();}.bind(this);this.closeThreadID=setTimeout(a,100);}return false;},shouldHideExpandedWidget:function(){return !this.commentWidgetIsExpanded||this.fullInputTextarea.value===''||this.fullInputTextarea.value===this.defaultInputText;},killCloseThread:function(){if(this.closeThreadID){clearTimeout(this.closeThreadID);delete this.closeThreadID;}},transferCSSStyles:function(){var a=DOM.scry(window.document,'link'),b=DOM.scry(window.document,'style'),c=DOM.find(window.document,'html'),d=DOM.find(this.commentDocument,'html'),e=DOM.find(this.commentDocument,'head');for(var f=0;f<a.length;f++)if(a[f].rel=='stylesheet'){var g=this.commentDocument.createElement('link');g.rel=a[f].rel;g.href=a[f].href;g.type=a[f].type;e.appendChild(g);}for(f=0;f<b.length;f++){var h=this.commentDocument.createElement('style'),i=b[f].innerText||b[f].textContent||b[f].innerHTML;h.setAttribute("type","text/css");e.appendChild(h);if(h.styleSheet){h.styleSheet.cssText=i;}else{var j=this.commentDocument.createTextNode(i);h.appendChild(j);}}d.id=c.id;d.className=c.className;this.commentDocument.body.className=window.document.body.className;},transitionToFullInputMode:function(event){this.commentWidgetIsExpanded=true;CSS.hide(this.placeholderInputRegion);CSS.show(this.fullInputRegion);CSS.show(this.widgetButtonRegion);if(this.closeButton){this.restorePlaceholderText();var a=this.fullInputTextarea;if(document.selection){var b=a.createTextRange();b.collapse(true);b.moveEnd('character',0);b.moveStart('character',0);b.select();}else if(a.setSelectionRange){a.focus();a.setSelectionRange(0,0);}}return false;},removePlaceholderText:function(event){if(CSS.hasClass(this.fullInputTextarea,'connect_comment_widget_disabled')){CSS.removeClass(this.fullInputTextarea,'connect_comment_widget_disabled');this.fullInputTextarea.value='';}return false;},restorePlaceholderText:function(event){if(this.fullInputTextarea.value.trim()==''){this.fullInputTextarea.value=this.defaultInputText;CSS.addClass(this.fullInputTextarea,'connect_comment_widget_disabled');}return false;},updateUserComment:function(event){var a=this.fullInputTextarea.value.trim(),b=this.ownProductCheckbox.checked;if(a===''||a==this.defaultInputText){if(b===false)return false;a='';}this.postUserComment(a,b);return false;},getAjaxEndpoint:function(){return '/ajax/connect/external_node_connect.php';},getCommentAjaxEndpoint:function(){return '/ajax/connect/external_edge_comment.php';},getConfirmURL:function(){var a={href:this.externalUrl,page_id:this.pageId,node_type:this.nodeType,edge_type:this.edgeType,widget_id:this.widgetID};if(this.ref)a.ref=this.ref;return URI('/plugins/like_confirm.php').addQueryData(a).toString();},updateLoggedInUser:function(a,b){ExternalNodeConnectWidget.updateLoggedInUser(a,b);},syncSendWidgetWidth:function(a,b){var c=this.computeButtonDimensionsWithPadding().width,d=b.button_width-c;if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT&&d>0&&d<=5){CSS.setStyle(this.connectButton,'width',(b.button_width-parseInt(CSS.getStyle(this.connectButton,'paddingLeft'))-parseInt(CSS.getStyle(this.connectButton,'paddingRight'))-parseInt(CSS.getStyle(this.connectButton,'borderLeftWidth'))-parseInt(CSS.getStyle(this.connectButton,'borderRightWidth')))+'px');this.sizeNumberCloud();}if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT){var e=Vector2.getElementDimensions(this.widget).y;CSS.setStyle(this.widget,'height',(e+5)+'px');var f=ua.ie(),g=intl_locale_is_rtl(),h=g?'right':'left';if(f&&f<9){CSS.setStyle(this.connectButton,'position','absolute');CSS.setStyle(this.connectButton,h,-(b.button_width+10)+'px');}else{CSS.setStyle(this.connectButton,'position','fixed');CSS.setStyle(this.connectButton,h,'0px');}if(f&&this.connectButtonSlider){CSS.setStyle(this.connectButtonSlider,h,b.button_width+'px');if(f<=7)this.fixIEButtonDoubleLineBug();}CSS.setStyle(this.confirmationCell,'position','absolute');CSS.setStyle(this.confirmationCell,h,(b.button_width+c+5)+'px');CSS.setStyle(this.confirmationCell,'top','5px');if(this.sampleConnections){CSS.setStyle(this.sampleConnections,'position','fixed');CSS.setStyle(this.sampleConnections,h,'0');}this.invertedButtons=true;this.repositionFacepileVertically();}},repositionFacepileVertically:function(){if(this.invertedButtons&&this.sampleConnections){var a=Vector2.getElementDimensions(this.summaryText).y;CSS.setStyle(this.sampleConnections,'margin-top',(5+a+5)+'px');}}});
var ExternalPageLikeWidget=function(a){a.edgeType='like';this.parent.construct(this,a);this.unactionLink=DOM.scry(this.widget,'span.unlike_link')[0];if(this.unactionLink)Event.listen(this.unactionLink,'click',this.connectToNodeOnClick.bind(this));this.hasShowedInsights=false;this.showInsights();};Class.extend(ExternalPageLikeWidget,'ExternalNodeConnectWidget');ExternalPageLikeWidget.LIKE_EDGE_TYPE=0;ExternalPageLikeWidget.RECOMMEND_EDGE_TYPE=1;copy_properties(ExternalPageLikeWidget.prototype,{getSyncEndpointName:function(){var a=this.connectText?this.connectText:'like';if(a==ExternalPageLikeWidget.RECOMMEND_EDGE_TYPE)a='like';return 'platform/'+a+'/sync';},getConnectionEndpointName:function(){return 'platform/like/connection';},getPluginName:function(){return 'like';},presentInsightsPage:function(){var a;a='/insights/?inline_link=true&sk=';if(this.pageId){a+='po_'+this.pageId;}else a+='lo_'+this.domainId;window.open(a,'_blank');},showInsights:function(){if(this.hasShowedInsights||(!this.pageId&&!this.domainId))return;var a=DOM.scry(this.widget,'a.connect_widget_insights_link');if(a)for(var b=0;b<a.length;b++){CSS.show(a[b].parentNode);Event.listen(a[b],'click',this.presentInsightsPage.bind(this));}this.hasShowedInsights=true;},repositionFacepileVertically:function(){this.showInsights();this.parent.repositionFacepileVertically();}});
function SendButton(a){var b=$(a.divID);copy_properties(this,{button:DOM.find(b,'a.btnLink'),channel:a.channel,div:b,divID:a.divID,loggedIn:!!a.userID,nodeImageURL:a.nodeImageURL,nodeTitle:a.nodeTitle,nodeURL:a.nodeURL,nodeSummary:a.nodeSummary,error:a.error,initFormOpen:a.initFormOpen,extended_social_context:a.extended_social_context,likeButtonLayout:a.likeButtonLayout});this.init();}copy_properties(SendButton.prototype,{init:function(){this.formIsOpen=false;this.formIsShown=false;this.pendingFormShow=false;Arbiter.subscribe('platform/socialplugins/send/sent',function(a,b){if(b.controllerID===this.divID)this.closeForm();}.bind(this),Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe('platform/socialplugins/send/cancel',function(a,b){if(b.controllerID===this.divID)this.hideForm();}.bind(this),Arbiter.SUBSCRIBE_NEW);this.buttonWidth=Vector2.getElementDimensions(this.button).x;this.widthSyncArbiter=Arbiter.subscribe('platform/socialplugins/like/resize',this.syncLikeWidgetWidth.bind(this));Arbiter.inform('platform/socialplugins/send/resize',{button_width:this.buttonWidth},Arbiter.BEHAVIOR_STATE);Arbiter.subscribe('platform/socialplugins/dialog',function(a,b){if(b.controllerID!==this.divID&&b.event=='open')this.closeForm();}.bind(this));UnverifiedXD.init({channelUrl:this.channel,autoResize:true,resizeWidth:true});Event.listen(this.button,'click',this.toggleFormVisibility.bind(this));if(this.initFormOpen)onafterloadRegister_DEPRECATED(this.toggleFormVisibility.bind(this));},syncLikeWidgetWidth:function(a,b){var c=b.button_width-this.buttonWidth;if(b.layout==='box_count'&&c>0&&c<=5)CSS.setStyle(this.div,'width',(b.button_width-parseInt(CSS.getStyle(this.button,'paddingLeft'))-parseInt(CSS.getStyle(this.button,'paddingRight'))-parseInt(CSS.getStyle(this.button,'borderLeftWidth'))-parseInt(CSS.getStyle(this.button,'borderRightWidth')))+'px');if(b.layout==='standard'){var d=intl_locale_is_rtl()?'right':'left';CSS.setStyle(this.div,'position','absolute');CSS.setStyle(this.div,d,(b.button_width+5)+'px');this.invertedButtons=true;}this.likeWidgetWidth=b.widget_width;this.likeButtonWidth=b.button_width;},toggleFormVisibility:function(a){if(!this.loggedIn){a.kill();PlatformOptInPopup.open('send');return;}if(!this.formIsOpen){this.openForm();}else if(this.formIsShown){this.hideForm();}else this.showForm();},hideForm:function(){if(this.formIsShown){this.formIsShown=false;UnverifiedXD.send({type:'hideEdgeCommentDialog'});CSS.removeClass(this.div,'fbSendButtonSelected');}},showForm:function(){if(!this.formIsShown){CSS.addClass(this.div,'fbSendButtonSelected');this.formIsShown=true;UnverifiedXD.send({type:'showEdgeCommentDialog'});}},closeForm:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.divID,event:'close'});if(this.formIsOpen){this.formIsOpen=this.formIsShown=false;UnverifiedXD.send({type:'dismissEdgeCommentDialog'});CSS.removeClass(this.div,'fbSendButtonSelected');}return this;},openForm:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.divID,event:'open'});if(!this.formIsOpen){CSS.addClass(this.div,'fbSendButtonSelected');this.formIsOpen=this.formIsShown=true;var a={type:'presentEdgeCommentDialog',nodeImageURL:this.nodeImageURL,nodeTitle:this.nodeTitle,nodeURL:this.nodeURL,nodeSummary:this.nodeSummary,controllerID:this.divID,error:this.error,widget_type:'send',extended_social_context:this.extended_social_context,width:400,height:300},b=Vector2.getElementDimensions(this.button),c=Vector2.getElementPosition(this.button);a.anchorGeometry={x:b.x,y:b.y};a.anchorPosition={x:c.x,y:c.y};var d=DOM.find(this.button,'.msgIcon'),e=Vector2.getElementPosition(d),f=Vector2.getElementDimensions(d);a.query={anchorTargetX:e.x+f.x/2,anchorTargetY:e.y+f.y/2};UnverifiedXD.send(a);}return this;}});
__d("legacy:cookie",["Cookie"],function(a,b,c,d){var e=b('Cookie');a.getCookie=e.get;a.setCookie=e.set;a.clearCookie=e.clear;},3);